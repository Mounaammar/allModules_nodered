(function(e){function t(t){for(var o,n,r=t[0],l=t[1],c=t[2],u=0,p=[];u<r.length;u++)n=r[u],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&p.push(i[n][0]),i[n]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);d&&d(t);while(p.length)p.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],o=!0,r=1;r<s.length;r++){var l=s[r];0!==i[l]&&(o=!1)}o&&(a.splice(t--,1),e=n(n.s=s[0]))}return e}var o={},i={app:0},a=[];function n(t){if(o[t])return o[t].exports;var s=o[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=o,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(s,o,function(t){return e[t]}.bind(null,o));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/%BASE_PATH%/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=l;a.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("cd49")},"0231":function(e,t,s){},"03b2":function(e,t,s){},"041d":function(e,t,s){},"06b5":function(e,t,s){"use strict";s("dbb9")},"0759":function(e,t,s){"use strict";s("7d1a")},"07f7":function(e,t,s){"use strict";s("767b")},"082b3":function(e,t,s){"use strict";s("0f29")},"0b8a":function(e,t,s){},"0d1f":function(e,t,s){e.exports={trigger:"TriggerIcon_trigger_2V4Ig"}},"0d3e":function(e,t,s){},"0ef5":function(e,t,s){"use strict";s("5c8b")},"0f29":function(e,t,s){},1:function(e,t){},1017:function(e,t,s){"use strict";s("9e8d")},"10ec":function(e,t,s){"use strict";s("399b")},"12ec":function(e,t,s){"use strict";s("3370")},"186c":function(e,t,s){"use strict";s("fc5a")},"18a9":function(e,t,s){"use strict";s("4774")},"19d7":function(e,t,s){"use strict";s("284d")},"1b39":function(e,t,s){"use strict";s("fc8e")},2:function(e,t){},"224a":function(e,t,s){},2644:function(e,t,s){},"26fe":function(e,t,s){"use strict";s("a38a")},"280a":function(e,t,s){},"284d":function(e,t,s){},2929:function(e,t,s){"use strict";s("a267")},2942:function(e,t,s){},"2cd0":function(e,t,s){"use strict";s("d0c7")},"2d96":function(e,t,s){"use strict";s("b8b6")},"2df2":function(e,t,s){"use strict";s("55e6")},"30db":function(e,t,s){"use strict";s("55f4")},3370:function(e,t,s){},"33ac":function(e,t,s){"use strict";s("ee76")},"351e":function(e,t,s){"use strict";s("77cf")},"366e":function(e,t,s){"use strict";s("d4d1")},"368d":function(e,t,s){},"37a6":function(e,t,s){},"37f7":function(e,t,s){},"399b":function(e,t,s){},"3a3b":function(e,t,s){"use strict";s("0d3e")},"3a3bc":function(e,t,s){"use strict";s("280a")},"3aeb":function(e,t,s){e.exports={"node-item":"NodeItem_node-item_2Zsor",bordered:"NodeItem_bordered_w_vFL",details:"NodeItem_details_2r40-","node-icon":"NodeItem_node-icon_2HTdM",name:"NodeItem_name_YVqyq",description:"NodeItem_description_381cn","trigger-icon":"NodeItem_trigger-icon_2L8v3"}},"3b87":function(e,t,s){},"3c38":function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"paramter-input-list-wrapper"},e._l(e.filteredParameters,(function(t){return s("div",{key:t.name},[!0===e.multipleValues(t)&&"fixedCollection"!==t.type?s("div",{staticClass:"parameter-item"},[s("multiple-parameter",{attrs:{parameter:t,values:e.getParameterValue(e.nodeValues,t.name,e.path),nodeValues:e.nodeValues,path:e.getPath(t.name)},on:{valueChanged:e.valueChanged}})],1):["collection","fixedCollection"].includes(t.type)?s("div",{staticClass:"multi-parameter"},[s("div",{staticClass:"parameter-name",attrs:{title:t.displayName}},[!0===e.hideDelete||e.isReadOnly?e._e():s("div",{staticClass:"delete-option clickable",attrs:{title:"Delete"}},[s("font-awesome-icon",{staticClass:"reset-icon clickable",attrs:{icon:"trash",title:"Parameter Options"},on:{click:function(s){return e.deleteOption(t.name)}}})],1),e._v("\n\t\t\t\t"+e._s(t.displayName)+":\n\t\t\t\t"),t.description?s("el-tooltip",{staticClass:"parameter-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(t.description)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1):e._e()],1),s("div",["collection"===t.type?s("collection-parameter",{attrs:{parameter:t,values:e.getParameterValue(e.nodeValues,t.name,e.path),nodeValues:e.nodeValues,path:e.getPath(t.name)},on:{valueChanged:e.valueChanged}}):"fixedCollection"===t.type?s("fixed-collection-parameter",{attrs:{parameter:t,values:e.getParameterValue(e.nodeValues,t.name,e.path),nodeValues:e.nodeValues,path:e.getPath(t.name)},on:{valueChanged:e.valueChanged}}):e._e()],1)]):e.displayNodeParameter(t)?s("div",{staticClass:"parameter-item"},[!0===e.hideDelete||e.isReadOnly?e._e():s("div",{staticClass:"delete-option clickable",attrs:{title:"Delete"}},[s("font-awesome-icon",{staticClass:"reset-icon clickable",attrs:{icon:"trash",title:"Delete Parameter"},on:{click:function(s){return e.deleteOption(t.name)}}})],1),s("parameter-input-full",{attrs:{parameter:t,value:e.getParameterValue(e.nodeValues,t.name,e.path),displayOptions:!0,path:e.getPath(t.name)},on:{valueChanged:e.valueChanged}})],1):e._e()])})),0)},i=[],a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"duplicate-parameter",on:{keydown:function(e){e.stopPropagation()}}},[s("div",{staticClass:"parameter-name"},[e._v("\n\t\t"+e._s(e.parameter.displayName)+":\n\t\t"),e.parameter.description?s("el-tooltip",{staticClass:"parameter-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.parameter.description)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1):e._e()],1),e._l(e.values,(function(t,o){return s("div",{key:o,staticClass:"duplicate-parameter-item",class:e.parameter.type},[e.isReadOnly?e._e():s("div",{staticClass:"delete-item clickable"},[s("font-awesome-icon",{attrs:{icon:"trash",title:"Delete Item"},on:{click:function(t){return e.deleteItem(o)}}}),e.sortable?s("div",[0!==o?s("font-awesome-icon",{staticClass:"clickable",attrs:{icon:"angle-up",title:"Move up"},on:{click:function(t){return e.moveOptionUp(o)}}}):e._e(),o!==e.values.length-1?s("font-awesome-icon",{staticClass:"clickable",attrs:{icon:"angle-down",title:"Move down"},on:{click:function(t){return e.moveOptionDown(o)}}}):e._e()],1):e._e()],1),"collection"===e.parameter.type?s("div",[s("collection-parameter",{attrs:{parameter:e.parameter,values:t,nodeValues:e.nodeValues,path:e.getPath(o),hideDelete:e.hideDelete},on:{valueChanged:e.valueChanged}})],1):s("div",[s("parameter-input",{staticClass:"duplicate-parameter-input-item",attrs:{parameter:e.parameter,value:t,displayOptions:!0,path:e.getPath(o)},on:{valueChanged:e.valueChanged}})],1)])})),s("div",{staticClass:"add-item-wrapper"},[e.values&&0===Object.keys(e.values).length||e.isReadOnly?s("div",{staticClass:"no-items-exist"},[e._v("\n\t\t\tCurrently no items exist\n\t\t")]):e._e(),e.isReadOnly?e._e():s("el-button",{staticClass:"add-item",attrs:{size:"small"},on:{click:function(t){return e.addItem()}}},[e._v(e._s(e.addButtonText))])],1)],2)},n=[],r=s("3eb9"),l=s("89e8"),c=s("9ec3"),d=s("4971"),u=s("aaf5"),p=Object(u["a"])(d["a"]).extend({name:"MultipleParameter",components:{CollectionParameter:r["default"],ParameterInput:l["a"]},props:["nodeValues","parameter","path","values"],computed:{addButtonText(){return this.parameter.typeOptions&&this.parameter.typeOptions.multipleValueButtonText?this.parameter.typeOptions.multipleValueButtonText:"Add item"},hideDelete(){return 1===this.parameter.options.length},sortable(){return this.parameter.typeOptions&&this.parameter.typeOptions.sortable}},methods:{addItem(){const e=this.getPath();let t=Object(c["get"])(this.nodeValues,e);void 0===t&&(t=[]),t.push(JSON.parse(JSON.stringify(this.parameter.default)));const s={name:e,value:t};this.$emit("valueChanged",s)},deleteItem(e){const t={name:this.getPath(e),value:void 0};this.$emit("valueChanged",t)},getPath(e){return this.path+(void 0!==e?`[${e}]`:"")},moveOptionDown(e){this.values.splice(e+1,0,this.values.splice(e,1)[0]);const t={name:this.path,value:this.values};this.$emit("valueChanged",t)},moveOptionUp(e){this.values.splice(e-1,0,this.values.splice(e,1)[0]);const t={name:this.path,value:this.values};this.$emit("valueChanged",t)},valueChanged(e){this.$emit("valueChanged",e)}}}),h=p,m=(s("c9f4"),s("5e82"),s("2be6")),f=Object(m["a"])(h,a,n,!1,null,"4087f0d8",null),g=f.exports,w=s("d2e2"),v=s("4a0c"),y=Object(u["a"])(d["a"],w["a"]).extend({name:"ParameterInputList",components:{MultipleParameter:g,ParameterInputFull:v["a"]},props:["nodeValues","parameters","path","hideDelete"],computed:{filteredParameters(){return this.parameters.filter(e=>this.displayNodeParameter(e))},filteredParameterNames(){return this.filteredParameters.map(e=>e.name)}},methods:{multipleValues(e){return!0===this.getArgument("multipleValues",e)},getArgument(e,t){if(void 0!==t.typeOptions&&void 0!==t.typeOptions[e])return t.typeOptions[e]},getPath(e){return(this.path?this.path+".":"")+e},deleteOption(e){const t={name:this.getPath(e),value:void 0};this.$emit("valueChanged",t)},displayNodeParameter(e){if("hidden"===e.type)return!1;if(void 0===e.displayOptions)return!0;const t={};let s=this.nodeValues;this.path&&(s=Object(c["get"])(this.nodeValues,this.path));const o=Object.keys(s);let i,a=0,n=!1;do{if(i=o.shift(),"string"===typeof s[i]&&"="===s[i].charAt(0)){if(s[i].includes("$parameter")&&o.some(e=>s[i].includes(e))){o.push(i);continue}try{t[i]=this.resolveExpression(s[i],t)}catch(r){t[i]=""}n=!0}else t[i]=s[i];if(a++>50)break}while(0!==o.length);return!0===n?this.path?(s=JSON.parse(JSON.stringify(this.nodeValues)),Object(c["set"])(s,this.path,t),this.displayParameter(s,e,this.path)):this.displayParameter(t,e,""):this.displayParameter(this.nodeValues,e,this.path)},valueChanged(e){this.$emit("valueChanged",e)}},watch:{filteredParameterNames(e,t){if(void 0!==e)for(const s of t)if(!e.includes(s)){const e={name:`${this.path}.${s}`,node:this.$store.getters.activeNode.name,value:void 0};this.$emit("valueChanged",e)}}},beforeCreate:function(){this.$options.components.FixedCollectionParameter=s("fe0b").default,this.$options.components.CollectionParameter=s("3eb9").default}}),b=y,k=(s("ae93"),Object(m["a"])(b,o,i,!1,null,null,null));t["default"]=k.exports},"3eb9":function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"collection-parameter",on:{keydown:function(e){e.stopPropagation()}}},[s("div",{staticClass:"collection-parameter-wrapper"},[0===e.getProperties.length?s("div",{staticClass:"no-items-exist"},[e._v("\n\t\t\tCurrently no properties exist\n\t\t")]):e._e(),s("parameter-input-list",{attrs:{parameters:e.getProperties,nodeValues:e.nodeValues,path:e.path,hideDelete:e.hideDelete},on:{valueChanged:e.valueChanged}}),e.parameterOptions.length>0&&!e.isReadOnly?s("div",[1===e.parameter.options.length?s("el-button",{staticClass:"add-option",attrs:{size:"small"},on:{click:function(t){return e.optionSelected(e.parameter.options[0].name)}}},[e._v(e._s(e.getPlaceholderText))]):s("el-select",{staticClass:"add-option",attrs:{placeholder:e.getPlaceholderText,size:"small",filterable:""},on:{change:e.optionSelected},model:{value:e.selectedOption,callback:function(t){e.selectedOption=t},expression:"selectedOption"}},e._l(e.parameterOptions,(function(e){return s("el-option",{key:e.name,attrs:{label:e.displayName,value:e.name}})})),1)],1):e._e()],1)])},i=[],a=s("4971"),n=s("6fae"),r=s("9ec3"),l=s("aaf5"),c=Object(l["a"])(a["a"],n["a"]).extend({name:"CollectionParameter",props:["hideDelete","nodeValues","parameter","path","values"],data(){return{selectedOption:void 0}},computed:{getPlaceholderText(){return this.parameter.placeholder?this.parameter.placeholder:"Choose Option To Add"},getProperties(){const e=[];let t;for(const s of this.propertyNames)t=this.getOptionProperties(s),void 0!==t&&e.push(...t);return e},filteredOptions(){return this.parameter.options.filter(e=>this.displayNodeParameter(e))},parameterOptions(){return this.filteredOptions.filter(e=>!this.propertyNames.includes(e.name))},propertyNames(){return this.values?Object.keys(this.values):[]}},methods:{getArgument(e){if(void 0!==this.parameter.typeOptions&&void 0!==this.parameter.typeOptions[e])return this.parameter.typeOptions[e]},getOptionProperties(e){const t=[];for(const s of this.parameter.options)s.name===e&&t.push(s);return t},displayNodeParameter(e){return void 0===e.displayOptions||this.displayParameter(this.nodeValues,e,this.path)},optionSelected(e){const t=this.getOptionProperties(e);if(0===t.length)return;const s=t[0],o=`${this.path}.${s.name}`;let i;if(void 0!==s.typeOptions&&!0===s.typeOptions.multipleValues){let t;"fixedCollection"===s.type?t=Object(r["get"])(this.nodeValues,`${this.path}.${e}`,{}):(t=Object(r["get"])(this.nodeValues,`${this.path}.${e}`,[]),t.push(JSON.parse(JSON.stringify(s.default)))),i={name:o,value:t}}else i={name:o,value:JSON.parse(JSON.stringify(s.default))};this.$emit("valueChanged",i),this.selectedOption=void 0},valueChanged(e){this.$emit("valueChanged",e)}},beforeCreate:function(){this.$options.components.ParameterInputList=s("3c38").default}}),d=c,u=(s("ab7d"),s("2be6")),p=Object(u["a"])(d,o,i,!1,null,null,null);t["default"]=p.exports},"3f8a":function(e,t,s){"use strict";s("721e")},"42af":function(e,t,s){},"42b8":function(e,t,s){"use strict";s("6d73")},4637:function(e,t,s){},4699:function(e,t,s){},"46d0":function(e,t,s){"use strict";s("f481")},"470f":function(e,t,s){"use strict";s("37f7")},4774:function(e,t,s){},"478f":function(e,t,s){"use strict";s("aef8")},4971:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var o=s("e5bf"),i=s.n(o),a=s("77f0"),n=s("9ec3"),r=s("aaf5");const l=Object(r["a"])(a["a"]).extend({data(){return{loadingService:null,debouncedFunctions:[]}},computed:{isReadOnly(){return!["NodeViewExisting","NodeViewNew"].includes(this.$route.name)}},methods:{convertToDisplayDate(e){return i()(e,"yyyy-mm-dd HH:MM:ss")},displayTimer(e,t=!1){if(e<6e4)return!1===t?Math.floor(e/1e3)+" sec.":e/1e3+" sec.";const s=Math.floor(e/1e3),o=Math.floor(s/60),i=(s-60*o).toString().padStart(2,"0");return`${o}:${i} min.`},editAllowedCheck(){return!this.isReadOnly||(this.$showMessage({title:"Workflow can not be changed!",message:"The workflow can not be edited as a past execution gets displayed. To make changed either open the original workflow of which the execution gets displayed or save it under a new name first.",type:"error",duration:0}),!1)},startLoading(e){null===this.loadingService&&(this.loadingService=this.$loading({lock:!0,text:e||"Loading",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.8)"}))},setLoadingText(e){this.loadingService.text=e},stopLoading(){null!==this.loadingService&&(this.loadingService.close(),this.loadingService=null)},async callDebounced(...e){const t=e.shift(),s=e.shift();void 0===this.debouncedFunctions[t]&&(this.debouncedFunctions[t]=Object(n["debounce"])(this[t],s,{leading:!0})),await this.debouncedFunctions[t].apply(this,e)},async confirmMessage(e,t,s="warning",o="OK",i="Cancel"){try{return await this.$confirm(e,t,{confirmButtonText:o,cancelButtonText:i,type:s,dangerouslyUseHTMLString:!0}),!0}catch(a){return!1}}}})},"4a0c":function(e,t,s){"use strict";var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-row",{staticClass:"parameter-wrapper"},[s("el-col",{staticClass:"parameter-name",class:{"multi-line":e.isMultiLineParameter},attrs:{span:e.isMultiLineParameter?24:10}},[s("span",{staticClass:"title",attrs:{title:e.parameter.displayName}},[e._v(e._s(e.parameter.displayName))]),e._v(":\n\t\t"),e.parameter.description?s("el-tooltip",{staticClass:"parameter-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.parameter.description)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1):e._e()],1),s("el-col",{staticClass:"parameter-value",attrs:{span:e.isMultiLineParameter?24:14}},[s("parameter-input",{attrs:{parameter:e.parameter,value:e.value,displayOptions:e.displayOptions,path:e.path},on:{valueChanged:e.valueChanged}})],1)],1)},i=[],a=s("9869"),n=s("89e8"),r=a["default"].extend({name:"ParameterInputFull",components:{ParameterInput:n["a"]},computed:{isMultiLineParameter(){if(this.level>4)return!0;const e=this.getArgument("rows");return void 0!==e&&e>1},level(){return this.path.split(".").length}},props:["displayOptions","parameter","path","value"],methods:{getArgument(e){if(void 0!==this.parameter.typeOptions&&void 0!==this.parameter.typeOptions[e])return this.parameter.typeOptions[e]},valueChanged(e){this.$emit("valueChanged",e)}}}),l=r,c=(s("63f3"),s("2be6")),d=Object(c["a"])(l,o,i,!1,null,null,null);t["a"]=d.exports},"4a15":function(e,t,s){"use strict";s("b4ca")},"4ad1":function(e,t,s){},"4ba5":function(e,t,s){"use strict";s("37a6")},"4cb6":function(e,t,s){"use strict";s("fd90")},"4e6b":function(e,t,s){"use strict";s("f9da")},"4fe2":function(e,t,s){"use strict";s("b44c")},"51d6":function(e,t,s){"use strict";s("b99a")},"52f2":function(e,t,s){"use strict";s("e78d")},"53f5":function(e,t,s){"use strict";s("ea6e")},5539:function(e,t,s){"use strict";s("0231")},5572:function(e,t,s){},"55e6":function(e,t,s){},"55f4":function(e,t,s){},"5c0b":function(e,t,s){"use strict";s("4ad1")},"5c8b":function(e,t,s){},"5d38":function(e,t,s){"use strict";var o=s("c823"),i=s.n(o);s.d(t,"default",(function(){return i.a}))},"5d93":function(e,t,s){},"5e82":function(e,t,s){"use strict";s("2644")},6188:function(e,t,s){"use strict";s("aaea")},"62ca":function(e,t,s){"use strict";s("224a")},"63f3":function(e,t,s){"use strict";s("2942")},"67d2":function(e,t,s){"use strict";s("cf47")},"6d73":function(e,t,s){},"6e4f":function(e,t,s){"use strict";s("eaf6")},"6fae":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var o=s("e105"),i=s("7b04"),a=s("9ec3"),n=s("aaf5");const r=Object(n["a"])(i["a"]).extend({methods:{getParameterValue(e,t,s){return Object(a["get"])(e,s?s+"."+t:t)},displayParameter(e,t,s){return o["NodeHelpers"].displayParameterPath(e,t,s)},getNodeIssues(e,t,s){let i=null;if(s=s||[],!0===t.disabled)return null;if(null===e)s.includes("typeUnknown")||(i={typeUnknown:!0});else if(s.includes("parameters")||(i=o["NodeHelpers"].getNodeParametersIssues(e.properties,t)),!s.includes("credentials")){const s=this.getNodeCredentialIssues(t,e);null===i?i=s:o["NodeHelpers"].mergeIssues(i,s)}return!0!==this.hasNodeExecutionIssues(t)||s.includes("execution")||(null===i&&(i={}),i.execution=!0),i},hasNodeExecutionIssues(e){const t=this.$store.getters.getWorkflowRunData;if(null===t||!t.hasOwnProperty(e.name))return!1;for(const s of t[e.name])if(void 0!==s.error)return!0;return!1},updateNodesExecutionIssues(){const e=this.$store.getters.allNodes;for(const t of e)this.$store.commit("setNodeIssue",{node:t.name,type:"execution",value:!!this.hasNodeExecutionIssues(t)||null})},updateNodeCredentialIssues(e){const t=this.getNodeCredentialIssues(e);let s=null;null!==t&&(s=t.credentials),this.$store.commit("setNodeIssue",{node:e.name,type:"credentials",value:s})},updateNodeParameterIssues(e,t){if(void 0===t&&(t=this.$store.getters.nodeType(e.type)),null===t)return;const s=o["NodeHelpers"].getNodeParametersIssues(t.properties,e);let i=null;null!==s&&(i=s.parameters),this.$store.commit("setNodeIssue",{node:e.name,type:"parameters",value:i})},getNodeCredentialIssues(e,t){if(!0===e.disabled)return null;if(void 0===t&&(t=this.$store.getters.nodeType(e.type)),null===t||void 0===t.credentials)return null;if(void 0===t.credentials)return null;const s={};let o,i,a,n;for(const r of t.credentials)!0===this.displayParameter(e.parameters,r,"")&&(i=this.$store.getters.credentialType(r.name),a=null===i?r.name:i.displayName,void 0===e.credentials||void 0===e.credentials[r.name]?!0===r.required&&(s[r.name]=[`Credentials for "${a}" are not set.`]):(n=e.credentials[r.name],o=this.$store.getters.credentialsByType(r.name),null===o&&(o=[]),void 0===o.find(e=>e.name===n)&&(s[r.name]=[`Credentials with name "${n}" do not exist for "${a}".`])));return 0===Object.keys(s).length?null:{credentials:s}},updateNodesCredentialsIssues(){const e=this.$store.getters.allNodes;let t;for(const s of e)t=this.getNodeCredentialIssues(s),this.$store.commit("setNodeIssue",{node:s.name,type:"credentials",value:null===t?null:t.credentials})},getNodeInputData(e,t=0,s=0){if(null===e)return[];if(null===this.$store.getters.getWorkflowExecution)return[];const o=this.$store.getters.getWorkflowExecution.data,i=o.resultData.runData;return null!==i&&void 0!==i[e.name]&&i[e.name][t].data&&void 0!==i[e.name][t].data?this.getMainInputData(i[e.name][t].data,s):[]},getMainInputData(e,t){return!e||!e.hasOwnProperty("main")||void 0===e.main||e.main.length<t||null===e.main[t]?[]:e.main[t]},getBinaryData(e,t,s,o){if(null===t)return[];const i=e;if(null===i||!i[t]||!i[t][s]||!i[t][s].data)return[];const a=this.getMainInputData(i[t][s].data,o),n=[];for(let r=0;r<a.length;r++)a[r].hasOwnProperty("binary")&&void 0!==a[r].binary&&n.push(a[r].binary);return n},disableNodes(e){for(const t of e){const e={name:t.name,properties:{disabled:!t.disabled}};this.$store.commit("updateNodeProperties",e),this.updateNodeParameterIssues(t),this.updateNodeCredentialIssues(t)}},getNodeSubtitle(e,t,s){if(e.notesInFlow)return e.notes;if(null!==t&&void 0!==t.subtitle)return s.expression.getSimpleParameterValue(e,t.subtitle,"internal");if(void 0!==e.parameters.operation){const s=e.parameters.operation;if(null===t)return s;const o=t.properties.find(e=>"operation"===e.name);if(void 0===o)return s;if(void 0===o.options)return s;const i=o.options.find(t=>t.value===e.parameters.operation);return void 0===i?s:i.name}}}})},"721e":function(e,t,s){},"767b":function(e,t,s){},"77cf":function(e,t,s){},"77f0":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var o=s("8767"),i=s("aaf5"),a=s("debe");const n=Object(i["a"])(a["a"]).extend({methods:{$showMessage(e){return e.dangerouslyUseHTMLString=!0,void 0===e.position&&(e.position="bottom-right"),Object(o["Notification"])(e)},$showError(e,t,s){const o=s?s+"<br/>":"";this.$showMessage({title:t,message:`\n\t\t\t\t\t${o}\n\t\t\t\t\t<i>${e.message}</i>\n\t\t\t\t\t${this.collapsableDetails(e)}`,type:"error",duration:0}),this.$externalHooks().run("showMessage.showError",{title:t,message:s,errorMessage:e.message})},collapsableDetails({description:e,node:t}){if(!e)return"";const s=e.length>500?e.slice(0,500)+"...":e;return`\n\t\t\t\t<br>\n\t\t\t\t<br>\n\t\t\t\t<details>\n\t\t\t\t\t<summary\n\t\t\t\t\t\tstyle="color: #ff6d5a; font-weight: bold; cursor: pointer;"\n\t\t\t\t\t>\n\t\t\t\t\t\tShow Details\n\t\t\t\t\t</summary>\n\t\t\t\t\t<p>${t.name}: ${s}</p>\n\t\t\t\t</details>\n\t\t\t`}}})},"7b04":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var o=s("9869"),i=s("2f01"),a=s("a185");function n(e){const t={...e,workflowData:e.workflowData,data:Object(i["a"])(e.data)};return t.finished=!!t.finished&&t.finished,e.id&&(t.id=e.id),t}const r=o["default"].extend({methods:{restApi(){const e=this;return{async makeRestApiRequest(t,s,o){return Object(a["b"])(e.$store.getters.getRestApiContext,t,s,o)},getActiveWorkflows:()=>e.restApi().makeRestApiRequest("GET","/active"),getActivationError:t=>e.restApi().makeRestApiRequest("GET","/active/error/"+t),getCurrentExecutions:t=>{let s={};return t&&(s={filter:t}),e.restApi().makeRestApiRequest("GET","/executions-current",s)},stopCurrentExecution:t=>e.restApi().makeRestApiRequest("POST",`/executions-current/${t}/stop`),getSettings:()=>e.restApi().makeRestApiRequest("GET","/settings"),getNodeTypes:()=>e.restApi().makeRestApiRequest("GET","/node-types"),getNodesInformation:t=>e.restApi().makeRestApiRequest("POST","/node-types",{nodeNames:t}),getNodeParameterOptions:(t,s,o,i,a)=>{const n={nodeType:t,path:s,methodName:o,credentials:a,currentNodeParameters:i};return e.restApi().makeRestApiRequest("GET","/node-parameter-options",n)},removeTestWebhook:t=>e.restApi().makeRestApiRequest("DELETE","/test-webhook/"+t),runWorkflow:async t=>e.restApi().makeRestApiRequest("POST","/workflows/run",t),createNewWorkflow:t=>e.restApi().makeRestApiRequest("POST","/workflows",t),updateWorkflow:(t,s)=>e.restApi().makeRestApiRequest("PATCH","/workflows/"+t,s),deleteWorkflow:t=>e.restApi().makeRestApiRequest("DELETE","/workflows/"+t),getWorkflow:t=>e.restApi().makeRestApiRequest("GET","/workflows/"+t),getWorkflows:t=>{let s;return t&&(s={filter:t}),e.restApi().makeRestApiRequest("GET","/workflows",s)},getWorkflowFromUrl:t=>e.restApi().makeRestApiRequest("GET","/workflows/from-url",{url:t}),createNewCredentials:t=>e.restApi().makeRestApiRequest("POST","/credentials",t),deleteCredentials:t=>e.restApi().makeRestApiRequest("DELETE","/credentials/"+t),updateCredentials:(t,s)=>e.restApi().makeRestApiRequest("PATCH","/credentials/"+t,s),getCredentials:(t,s)=>{let o;return s&&(o={includeData:s}),e.restApi().makeRestApiRequest("GET","/credentials/"+t,o)},getAllCredentials:t=>{let s;return t&&(s={filter:t}),e.restApi().makeRestApiRequest("GET","/credentials",s)},getCredentialTypes:()=>e.restApi().makeRestApiRequest("GET","/credential-types"),oAuth1CredentialAuthorize:t=>e.restApi().makeRestApiRequest("GET","/oauth1-credential/auth",t),oAuth2CredentialAuthorize:t=>e.restApi().makeRestApiRequest("GET","/oauth2-credential/auth",t),oAuth2Callback:(t,s)=>{const o={code:t,state:s};return e.restApi().makeRestApiRequest("POST","/oauth2-credential/callback",o)},getExecution:async t=>{const s=await e.restApi().makeRestApiRequest("GET","/executions/"+t);return n(s)},deleteExecutions:t=>e.restApi().makeRestApiRequest("POST","/executions/delete",t),retryExecution:(t,s)=>{let o;return!0===s&&(o={loadWorkflow:!0}),e.restApi().makeRestApiRequest("POST",`/executions/${t}/retry`,o)},getPastExecutions:(t,s,o,i)=>{let a={};return t&&(a={filter:t,firstId:i,lastId:o,limit:s}),e.restApi().makeRestApiRequest("GET","/executions",a)},getTimezones:()=>e.restApi().makeRestApiRequest("GET","/options/timezones")}}}})},"7d1a":function(e,t,s){},"847d":function(e,t,s){"use strict";s("0b8a")},"85ee":function(e,t,s){"use strict";s.d(t,"m",(function(){return o})),s.d(t,"n",(function(){return i})),s.d(t,"q",(function(){return a})),s.d(t,"r",(function(){return n})),s.d(t,"h",(function(){return r})),s.d(t,"p",(function(){return l})),s.d(t,"j",(function(){return c})),s.d(t,"o",(function(){return d})),s.d(t,"i",(function(){return u})),s.d(t,"w",(function(){return p})),s.d(t,"C",(function(){return h})),s.d(t,"d",(function(){return m})),s.d(t,"c",(function(){return f})),s.d(t,"b",(function(){return g})),s.d(t,"e",(function(){return w})),s.d(t,"x",(function(){return v})),s.d(t,"u",(function(){return y})),s.d(t,"f",(function(){return b})),s.d(t,"g",(function(){return k})),s.d(t,"v",(function(){return x})),s.d(t,"s",(function(){return C})),s.d(t,"y",(function(){return $})),s.d(t,"a",(function(){return N})),s.d(t,"z",(function(){return E})),s.d(t,"A",(function(){return T})),s.d(t,"k",(function(){return D})),s.d(t,"B",(function(){return _})),s.d(t,"l",(function(){return O})),s.d(t,"t",(function(){return S}));const o=204800,i=250,a="node-",n="__EMPTY__",r="My workflow",l=128,c=" copy",d=24,u="duplicate",p="tagsManager",h="workflowOpen",m=768,f=992,g=1200,w=1920,v="https://api.n8n.io/",y="n8n-nodes-base.start",b="Core Nodes",k="Custom Nodes",x={"Core Nodes":{Flow:"Branches, core triggers, merge data",Files:"Work with CSV, XML, text, images etc.","Data Transformation":"Manipulate data fields, run code",Helpers:"HTTP Requests (API calls), date and time, scrape HTML"}},C="Regular",$="Trigger",N="All",E="Miscellaneous",T="Helpers",D=["n8n-nodes-base.start"],_="n8n-nodes-base.webhook",O="n8n-nodes-base.httpRequest",S="https://n8n-community.typeform.com/to/K1fBVTZ3"},"85f9":function(e,t,s){"use strict";s("dd9c")},"89e8":function(e,t,s){"use strict";var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:e.parameterInputClasses,on:{keydown:function(e){e.stopPropagation()}}},[s("expression-edit",{attrs:{dialogVisible:e.expressionEditDialogVisible,value:e.value,parameter:e.parameter,path:e.path},on:{closeDialog:e.closeExpressionEditDialog,valueChanged:e.expressionUpdated}}),s("div",{staticClass:"parameter-input ignore-key-press",style:e.parameterInputWrapperStyle},[["json","string"].includes(e.parameter.type)||null!==e.remoteParameterOptionsLoadingIssues?s("div",[s("code-edit",{attrs:{dialogVisible:e.codeEditDialogVisible,value:e.value,parameter:e.parameter},on:{closeDialog:e.closeCodeEditDialog,valueChanged:e.expressionUpdated}}),s("text-edit",{attrs:{dialogVisible:e.textEditDialogVisible,value:e.value,parameter:e.parameter},on:{closeDialog:e.closeTextEditDialog,valueChanged:e.expressionUpdated}}),!0===e.isEditor?s("div",{staticClass:"clickable",on:{click:function(t){return e.displayEditDialog()}}},[e.codeEditDialogVisible?e._e():s("prism-editor",{attrs:{lineNumbers:!0,readonly:!0,code:e.displayValue,language:"js"}})],1):s("el-input",{ref:"inputField",attrs:{size:"small",type:e.getStringInputType,rows:e.getArgument("rows"),value:e.displayValue,disabled:!e.isValueExpression&&e.isReadOnly,title:e.displayTitle,placeholder:e.isValueExpression?"":e.parameter.placeholder},on:{change:e.valueChanged,keydown:function(e){e.stopPropagation()},focus:e.setFocus},model:{value:e.tempValue,callback:function(t){e.tempValue=t},expression:"tempValue"}},[e.isValueExpression||e.isReadOnly?e._e():s("font-awesome-icon",{staticClass:"edit-window-button clickable",attrs:{slot:"suffix",icon:"external-link-alt",title:"Open Edit Window"},on:{click:function(t){return e.displayEditDialog()}},slot:"suffix"})],1)],1):"dateTime"===e.parameter.type?s("div",[s("el-date-picker",{ref:"inputField",attrs:{type:"datetime",size:"small",value:e.displayValue,title:e.displayTitle,disabled:e.isReadOnly,placeholder:e.parameter.placeholder?e.parameter.placeholder:"Select date and time","picker-options":e.dateTimePickerOptions},on:{change:e.valueChanged,focus:e.setFocus,keydown:function(e){e.stopPropagation()}},model:{value:e.tempValue,callback:function(t){e.tempValue=t},expression:"tempValue"}})],1):"number"===e.parameter.type?s("div",[s("el-input-number",{ref:"inputField",attrs:{size:"small",value:e.displayValue,max:e.getArgument("maxValue"),min:e.getArgument("minValue"),precision:e.getArgument("numberPrecision"),step:e.getArgument("numberStepSize"),disabled:e.isReadOnly,title:e.displayTitle,placeholder:e.parameter.placeholder},on:{change:e.valueChanged,focus:e.setFocus,keydown:function(e){e.stopPropagation()}}})],1):"options"===e.parameter.type?s("el-select",{ref:"inputField",attrs:{size:"small",filterable:"",value:e.displayValue,loading:e.remoteParameterOptionsLoading,disabled:e.isReadOnly||e.remoteParameterOptionsLoading,title:e.displayTitle},on:{change:e.valueChanged,keydown:function(e){e.stopPropagation()},focus:e.setFocus}},e._l(e.parameterOptions,(function(t){return s("el-option",{key:t.value,attrs:{value:t.value,label:t.name}},[s("div",{staticClass:"option-headline"},[e._v(e._s(t.name))]),t.description?s("div",{staticClass:"option-description",domProps:{innerHTML:e._s(t.description)}}):e._e()])})),1):"multiOptions"===e.parameter.type?s("el-select",{ref:"inputField",attrs:{size:"small",filterable:"",multiple:"",value:e.displayValue,loading:e.remoteParameterOptionsLoading,disabled:e.isReadOnly||e.remoteParameterOptionsLoading,title:e.displayTitle},on:{change:e.valueChanged,keydown:function(e){e.stopPropagation()},focus:e.setFocus}},e._l(e.parameterOptions,(function(t){return s("el-option",{key:t.value,attrs:{value:t.value,label:t.name}},[s("div",{staticClass:"option-headline"},[e._v(e._s(t.name))]),t.description?s("div",{staticClass:"option-description",domProps:{innerHTML:e._s(t.description)}}):e._e()])})),1):"color"===e.parameter.type?s("div",{ref:"inputField",staticClass:"color-input"},[s("el-color-picker",{staticClass:"color-picker",attrs:{value:e.displayValue,disabled:e.isReadOnly,size:"small",title:e.displayTitle,"show-alpha":e.getArgument("showAlpha")},on:{change:e.valueChanged,focus:e.setFocus}}),s("el-input",{attrs:{size:"small",type:"text",value:e.tempValue,disabled:e.isReadOnly,title:e.displayTitle},on:{change:e.valueChanged,keydown:function(e){e.stopPropagation()},focus:e.setFocus},model:{value:e.tempValue,callback:function(t){e.tempValue=t},expression:"tempValue"}})],1):"boolean"===e.parameter.type?s("div",[s("el-switch",{ref:"inputField",attrs:{value:e.displayValue,"active-color":"#13ce66",disabled:e.isValueExpression||e.isReadOnly},on:{change:e.valueChanged}}),s("div",{staticClass:"expression-info clickable",on:{click:function(t){e.expressionEditDialogVisible=!0}}},[e._v("Edit Expression")])],1):e._e()],1),e.displayOptionsComputed?s("div",{staticClass:"parameter-options"},[s("el-dropdown",{attrs:{trigger:"click",size:"mini"},on:{command:e.optionSelected}},[s("span",{staticClass:"el-dropdown-link"},[s("font-awesome-icon",{staticClass:"reset-icon clickable",attrs:{icon:"cogs",title:"Parameter Options"}})],1),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[!0===e.parameter.noDataExpression||e.isValueExpression?e._e():s("el-dropdown-item",{attrs:{command:"addExpression"}},[e._v("Add Expression")]),!0!==e.parameter.noDataExpression&&e.isValueExpression?s("el-dropdown-item",{attrs:{command:"removeExpression"}},[e._v("Remove Expression")]):e._e(),s("el-dropdown-item",{attrs:{command:"resetValue",disabled:e.isDefault,divided:""}},[e._v("Reset Value")])],1)],1)],1):e._e(),e.getIssues.length?s("div",{staticClass:"parameter-issues"},[s("el-tooltip",{attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s("Issues:<br />&nbsp;&nbsp;- "+e.getIssues.join("<br />&nbsp;&nbsp;- "))},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}})],1)],1):e._e()],1)},i=[],a=s("9ec3"),n=s("e105"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.dialogVisible?s("div",[s("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":"","close-on-click-modal":!1,width:"80%",title:"Edit "+e.parameter.displayName,"before-close":e.closeDialog}},[s("div",{staticClass:"text-editor-wrapper ignore-key-press"},[s("div",{staticClass:"editor-description"},[e._v("\n\t\t\t\t"+e._s(e.parameter.displayName)+":\n\t\t\t")]),s("div",{staticClass:"text-editor",on:{keydown:function(e){e.stopPropagation()}}},[s("prism-editor",{attrs:{lineNumbers:!0,code:e.value,readonly:e.isReadOnly,language:"js"},on:{change:e.valueChanged}})],1)])])],1):e._e()},l=[],c=s("789a"),d=s.n(c),u=s("4971"),p=s("aaf5"),h=Object(p["a"])(u["a"]).extend({name:"CodeEdit",props:["dialogVisible","parameter","value"],components:{PrismEditor:d.a},data(){return{}},methods:{valueChanged(e){this.$emit("valueChanged",e)},closeDialog(){return this.$emit("closeDialog"),!1}}}),m=h,f=(s("8be7"),s("2be6")),g=Object(f["a"])(m,r,l,!1,null,"30588b44",null),w=g.exports,v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.dialogVisible?s("div",{on:{keydown:function(e){e.stopPropagation()}}},[s("el-dialog",{attrs:{visible:e.dialogVisible,"custom-class":"expression-dialog","append-to-body":"",width:"80%",title:"Edit Expression","before-close":e.closeDialog}},[s("el-row",[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"header-side-menu"},[s("div",{staticClass:"headline"},[e._v("\n\t\t\t\t\t\tEdit Expression\n\t\t\t\t\t")]),s("div",{staticClass:"sub-headline"},[e._v("\n\t\t\t\t\t\tVariable Selector\n\t\t\t\t\t")])]),s("div",{staticClass:"variable-selector"},[s("variable-selector",{attrs:{path:e.path},on:{itemSelected:e.itemSelected}})],1)]),s("el-col",{staticClass:"right-side",attrs:{span:16}},[s("div",{staticClass:"expression-editor-wrapper"},[s("div",{staticClass:"editor-description"},[e._v("\n\t\t\t\t\t\tExpression\n\t\t\t\t\t")]),s("div",{staticClass:"expression-editor"},[s("expression-input",{ref:"inputFieldExpression",attrs:{parameter:e.parameter,rows:"8",value:e.value,path:e.path},on:{change:e.valueChanged,keydown:function(t){return t.stopPropagation(),e.noOp(t)}}})],1)]),s("div",{staticClass:"expression-result-wrapper"},[s("div",{staticClass:"editor-description"},[e._v("\n\t\t\t\t\t\tResult\n\t\t\t\t\t")]),s("expression-input",{ref:"expressionResult",attrs:{parameter:e.parameter,resolvedValue:"true",rows:"8",value:e.displayValue,path:e.path}})],1)])],1)],1)],1):e._e()},y=[],b=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{ref:"expression-editor",staticClass:"ignore-key-press",style:e.editorStyle,on:{keydown:function(e){e.stopPropagation()}}})])},k=[],x=s("9869"),C=(s("b8f1"),s("d5a1")),$=s.n(C),N=s("5d01"),E=s.n(N),T=s("d2e2"),D=Object(p["a"])(u["a"],T["a"]).extend({name:"ExpressionInput",props:["rows","value","parameter","path","resolvedValue"],data(){return{editor:null}},computed:{editorStyle(){let e=1;return this.rows&&(e=parseInt(this.rows,10)),{height:Math.max(26*e+10,40)+"px"}},workflow(){return this.getWorkflow()}},watch:{value(){this.resolvedValue&&this.initValue()}},mounted(){const e=this,t=$.a.import("blots/inline");class s extends t{static create(e){const t=super.create(e);return t.setAttribute("data-value",e),t.setAttribute("class","variable"),t}static formats(t){let s=t.innerHTML.trim();e.resolvedValue&&(s=t.getAttribute("data-value"));const o=e.getPlaceholderClasses(s);return t.getAttribute("class")!==o&&t.setAttribute("class",o),!0}}s.blotName="variable",s.className="variable",s.tagName="span",$.a.register({"formats/variable":s}),E.a.DEFAULTS={expression:{trigger:/\B[\w\s]/,find:/\{\{[^\s,;:!?}]+\}\}/i,format:"variable"}},this.editor=new $.a(this.$refs["expression-editor"],{readOnly:!!this.resolvedValue||this.isReadOnly,modules:{autoformat:{},keyboard:{bindings:{"list autofill":{prefix:/^$/}}}}}),this.editor.root.addEventListener("blur",e=>{this.$emit("blur",e)}),this.initValue(),this.resolvedValue||(this.setFocus(),this.editor.on("text-change",()=>this.update()))},methods:{customizeVariable(e){const t={classes:[],message:e};let s;try{s=this.resolveExpression("="+e),void 0!==s?t.classes.push("valid"):t.classes.push("invalid")}catch(o){t.classes.push("invalid")}return t},resolveParameterString(e){let t;try{t=this.resolveExpression("="+e)}catch(s){return`[invalid (${s.message})]`}return void 0===t?"[not found]":t},getPlaceholderClasses(e){const t=this.customizeVariable(e);return"variable "+t.classes.join(" ")},getValue(){if(!this.editor)return"";const e=this.editor.getContents();if(!e||!e.ops)return"";let t="";return e.ops.forEach(e=>{e.insert&&(t+=e.insert)}),"="+t.replace(/\s+$/g,"")},setFocus(){this.editor.focus()},itemSelected(e){this.editor.focus();const t=this.editor.getSelection();let s=null;if(t&&(s=t.index),s)this.editor.insertText(s,`{{${e.variable}}}`,"variable",!0),this.update();else{let t=this.getValue();"="===t||"=0"===t?t=`{{${e.variable}}}\n`:t+=` {{${e.variable}}}\n`,this.$emit("change",t,!0),this.resolvedValue||x["default"].nextTick(()=>{this.initValue()})}},initValue(){if(!this.value)return;let e=this.value;"="===e.charAt(0)&&(e=e.slice(1));const t=[];e.replace(/\{\{(.*?)\}\}/gi,"*%%#_@^$1*%%#_@").split("*%%#_@").forEach(e=>{if(e)if("^"===e.charAt(0)){let s=`{{${e.slice(1)}}}`;this.resolvedValue&&(s=[null,void 0].includes(s)?"":s,s=this.resolveParameterString(s.toString())),s=[null,void 0].includes(s)?"":s,t.push({attributes:{variable:`{{${e.slice(1)}}}`},insert:s.toString()})}else t.push({insert:e});else;}),this.editor.setContents(t)},update(){this.$emit("input",this.getValue()),this.$emit("change",this.getValue())}}}),_=D,O=(s("46d0"),Object(f["a"])(_,b,k,!1,null,null,null)),S=O.exports,I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"variable-selector-wrapper",on:{keydown:function(e){e.stopPropagation()}}},[s("div",{staticClass:"input-wrapper"},[s("el-input",{ref:"inputField",attrs:{placeholder:"Variable filter...",size:"small",type:"text"},model:{value:e.variableFilter,callback:function(t){e.variableFilter=t},expression:"variableFilter"}})],1),s("div",{staticClass:"result-wrapper"},e._l(e.currentResults,(function(t){return s("variable-selector-item",{key:t.key,attrs:{item:t,extendAll:e.extendAll},on:{itemSelected:e.forwardItemSelected}})})),1)])},A=[],P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"item"},[e.item.options?s("div",{staticClass:"options"},[e.item.options.length?s("div",{staticClass:"headline clickable",on:{click:function(t){e.extended=!e.extended}}},[!0!==e.extendAll?s("div",{staticClass:"options-toggle"},[e.extended?s("font-awesome-icon",{attrs:{icon:"angle-down"}}):s("font-awesome-icon",{attrs:{icon:"angle-right"}})],1):e._e(),s("div",{staticClass:"option-title",attrs:{title:e.item.key}},[e._v("\n\t\t\t\t"+e._s(e.item.name)+"\n\n\t\t\t\t"),!0===e.allowParentSelect?s("el-dropdown",{attrs:{trigger:"click"},on:{click:function(e){e.stopPropagation()},command:function(t){return e.optionSelected(t,e.item)}}},[s("span",{staticClass:"el-dropdown-link clickable",on:{click:function(e){e.stopPropagation()}}},[s("font-awesome-icon",{attrs:{icon:"dot-circle",title:"Select Item"}})],1),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.itemAddOperations,(function(t){return s("el-dropdown-item",{key:t.command,attrs:{command:t.command}},[e._v(e._s(t.displayName))])})),1)],1):e._e()],1)]):e._e(),!e.item.options||!0!==e.extended&&!0!==e.extendAll?e._e():s("div",e._l(e.item.options,(function(t){return s("variable-selector-item",{key:t.key,staticClass:"sub-level",attrs:{item:t,extendAll:e.extendAll,allowParentSelect:t.allowParentSelect},on:{itemSelected:e.forwardItemSelected}})})),1)]):s("div",{staticClass:"value clickable",on:{click:function(t){return e.selectItem(e.item)}}},[s("div",{staticClass:"item-title",attrs:{title:e.item.key}},[e._v("\n\t\t\t"+e._s(e.item.name)+":\n\t\t\t"),s("font-awesome-icon",{attrs:{icon:"dot-circle",title:"Select Item"}})],1),s("div",{staticClass:"item-value"},[e._v(e._s(void 0!==e.item.value?e.item.value:"--- EMPTY ---"))])])])},V=[],W=x["default"].extend({name:"VariableSelectorItem",props:["allowParentSelect","extendAll","item"],computed:{itemAddOperations(){const e=[{command:"raw",displayName:"Raw value"}];return"array"===this.item.dataType?(e.push({command:"arrayLength",displayName:"Length"}),e.push({command:"arrayValues",displayName:"Values"})):"object"===this.item.dataType&&(e.push({command:"objectKeys",displayName:"Keys"}),e.push({command:"objectValues",displayName:"Values"})),e}},data(){return{extended:!1}},methods:{optionSelected(e,t){let s=t.key;"arrayValues"===e?s=t.key+".join(', ')":"arrayLength"===e?s=t.key+".length":"objectKeys"===e?s=`Object.keys(${t.key}).join(', ')`:"objectValues"===e&&(s=`Object.values(${t.key}).join(', ')`),this.$emit("itemSelected",{variable:s})},selectItem(e){this.$emit("itemSelected",{variable:e.key})},forwardItemSelected(e){this.$emit("itemSelected",e)}}}),M=W,L=(s("6e4f"),Object(f["a"])(M,P,V,!1,null,"42795557",null)),R=L.exports,j=Object(p["a"])(T["a"]).extend({name:"VariableSelector",components:{VariableSelectorItem:R},props:["path"],data(){return{variableFilter:"",selectorOpenInputIndex:null}},computed:{extendAll(){return!!this.variableFilter},currentResults(){return this.getFilterResults(this.variableFilter.toLowerCase(),0)},workflow(){return this.getWorkflow()}},methods:{forwardItemSelected(e){this.$emit("itemSelected",e)},sortOptions(e){return null===e?null:e.sort((e,t)=>{const s=e.hasOwnProperty("options"),o=t.hasOwnProperty("options");return o&&!s?1:!o&&s||e.name<t.name?-1:e.name>t.name?1:0})},removeEmptyEntries(e){if(Array.isArray(e)){const t=[];let s;return e.forEach(e=>{s=this.removeEmptyEntries(e),null!==s&&t.push(s)}),t}if(e&&e.options){const t=this.removeEmptyEntries(e.options);return Array.isArray(t)&&t.length?(e.options=this.sortOptions(t),e):Array.isArray(t)&&0===t.length?(delete e.options,e):null}return e},getPathNormalized(e){if(void 0===e)return"";const t=e.split("."),s=[];let o;for(const i of t){const e=i.match(/\[.*?\]/g);if(null===e)s.push(i);else for(o of("["!==i.charAt(0)&&s.push(i.substr(0,i.indexOf("["))),e))o=o.slice(1,-1),['"',"'"].includes(o.charAt(0))?(o=o.slice(1,-1),s.push(o)):s.push(`[${o}]`)}return s.join("|")},jsonDataToFilterOption(e,t,s,o,i,a,n){let r=`${t}["${s}"]`;void 0!==i&&(r+=`[${i}]`);const l=[];if(null===e)return l.push({name:s,key:r,value:"[null]"}),l;if(Array.isArray(e)){let c=s,d=t;void 0!==i&&(d+=`["${s}"]`,c=i.toString());const u=[];for(let t=0;t<e.length;t++)u.push.apply(u,this.jsonDataToFilterOption(e[t],d,c,o,t,`[Item: ${t}]`,n));l.push({name:a||s,options:u,key:r,allowParentSelect:!0,dataType:"array"})}else if("object"===typeof e){const t=[];for(const s of Object.keys(e))t.push.apply(t,this.jsonDataToFilterOption(e[s],r,s,o,void 0,void 0,n));t.length&&l.push({name:a||s,options:this.sortOptions(t),key:r,allowParentSelect:!0,dataType:"object"})}else{if(void 0!==o&&-1===s.toLowerCase().indexOf(o))return l;this.getPathNormalized(n)!==this.getPathNormalized(r)&&l.push({name:s,key:r,value:e})}return l},getNodeOutputData(e,t,s,o=0,i=0,a="main",n=0,r=!1){if(!e.hasOwnProperty(t))return null;if(e[t].length<=i)return null;if(!e[t][i].hasOwnProperty("data")||null===e[t][i].data||void 0===e[t][i].data)return null;if(!e[t][i].data.hasOwnProperty(a))return null;if(e[t][i].data[a].length<=n)return null;if(null===e[t][i].data[a][n]||e[t][i].data[a][n].length<=o)return null;const l=e[t][i].data[a][n][o],c=[];if(l.hasOwnProperty("json")){const e=!0===r?"$json":`$node["${t}"].json`,o=[];for(const t of Object.keys(l.json))o.push.apply(o,this.jsonDataToFilterOption(l.json[t],e,t,s));o.length&&c.push({name:"JSON",options:this.sortOptions(o)})}if(l.hasOwnProperty("binary")){const e=!0===r?"$binary":`$node["${t}"].binary`,o=[];let i=[];for(const t of Object.keys(l.binary)){i=[];for(const o in l.binary[t])"data"!==o&&(s&&-1===o.toLowerCase().indexOf(s)||i.push({name:o,key:`${e}.${t}.${o}`,value:l.binary[t][o]}));i.length&&o.push({name:t,key:`${e}.${t}`,options:this.sortOptions(i),allowParentSelect:!0})}o.length&&c.push({name:"Binary",key:e,options:this.sortOptions(o),allowParentSelect:!0})}return c},getNodeContext(e,t,s,o,i){const a=0,r=0,l="main",c=0,d=[],u=this.connectionInputData(s,l,c,a);if(null===u)return d;const p=new n["WorkflowDataProxy"](e,t,c,r,o,u,{},"manual"),h=p.getDataProxy(),m=h.$node[o].context;for(const n of Object.keys(m))void 0!==i&&-1===n.toLowerCase().indexOf(i)||d.push({name:n,key:`$node["${o}"].context["${n}"]`,value:m[n]});return d},getNodeParameters(e,t,s,o){const i=this.workflow.getNode(e);if(null===i)return null;const a=[];for(const n in i.parameters)n!==s&&(void 0!==o&&-1===n.toLowerCase().indexOf(o)||a.push.apply(a,this.jsonDataToFilterOption(i.parameters[n],t,n,o,void 0,void 0,s)));return a},getFilterResults(e,t){const s="main",o=this.$store.getters.activeNode;if(null===o)return[];const i=this.$store.getters.getWorkflowExecution;let a=this.workflow.getParentNodes(o.name,s,1),n=this.$store.getters.getWorkflowRunData;null===n&&(n={});let r=[];const l=[];let c,d;if(null!==i){const t=i.data;c=this.getNodeContext(this.workflow,t,a,o.name,e),c.length&&l.push({name:"Context",options:this.sortOptions(c)})}if(a.length){const s=this.workflow.getNodeConnectionOutputIndex(o.name,a[0],"main");d=this.getNodeOutputData(n,a[0],e,t,0,"main",s,!0),d&&(JSON.stringify(d).length<102400?l.push({name:"Input Data",options:this.sortOptions(d)}):l.push({name:"Input Data",options:[{name:"[Data to large]"}]}))}const u="$parameter";let p=this.path;p.startsWith("parameters.")&&(p=u+p.substring(10)),l.push({name:"Parameters",options:this.sortOptions(this.getNodeParameters(o.name,u,p,e))}),r.push({name:"Current Node",options:this.sortOptions(l)});const h=[];let m;const f=this.workflow.getParentNodes(o.name,s);for(const g of Object.keys(this.workflow.nodes))if(g!==o.name){if(m=[{name:"Parameters",options:this.sortOptions(this.getNodeParameters(g,`$node["${g}"].parameter`,void 0,e))}],null!==i){const t=i.data;a=this.workflow.getParentNodes(g,s,1),c=this.getNodeContext(this.workflow,t,a,g,e),c.length&&(m=[{name:"Context",options:this.sortOptions(c)}])}f.includes(g)&&(d=this.getNodeOutputData(n,g,e,t),d&&m.push({name:"Output Data",options:this.sortOptions(d)})),h.push({name:g,options:this.sortOptions(m)})}return r.push({name:"Nodes",options:this.sortOptions(h)}),r=this.removeEmptyEntries(r),null===r?[]:r}}}),B=j,F=(s("12ec"),Object(f["a"])(B,I,A,!1,null,"1c81625c",null)),U=F.exports,z=s("debe"),H=Object(p["a"])(z["a"],u["a"]).extend({name:"ExpressionEdit",props:["dialogVisible","parameter","path","value"],components:{ExpressionInput:S,VariableSelector:U},data(){return{displayValue:"",latestValue:""}},methods:{valueChanged(e,t=!1){this.latestValue=e,!0===t?(this.updateDisplayValue(),this.$emit("valueChanged",this.latestValue)):this.callDebounced("updateDisplayValue",500)},updateDisplayValue(){this.displayValue=this.latestValue},closeDialog(){return this.$emit("valueChanged",this.latestValue),this.$emit("closeDialog"),!1},itemSelected(e){this.$refs.inputFieldExpression.itemSelected(e),this.$externalHooks().run("expressionEdit.itemSelected",{parameter:this.parameter,value:this.value,selectedItem:e})}},watch:{dialogVisible(e){this.displayValue=this.value,this.latestValue=this.value;const t=this.$refs.expressionResult&&this.$refs.expressionResult.getValue()||void 0;this.$externalHooks().run("expressionEdit.dialogVisibleChanged",{dialogVisible:e,parameter:this.parameter,value:this.value,resolvedExpressionValue:t})}}}),q=H,J=(s("0ef5"),Object(f["a"])(q,v,y,!1,null,"44528b3e",null)),K=J.exports,G=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.dialogVisible?s("div",[s("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":"",width:"80%",title:"Edit "+e.parameter.displayName,"before-close":e.closeDialog}},[s("div",{staticClass:"text-editor-wrapper ignore-key-press"},[s("div",{staticClass:"editor-description"},[e._v("\n\t\t\t\t"+e._s(e.parameter.displayName)+":\n\t\t\t")]),s("div",{staticClass:"text-editor",on:{keydown:[function(e){e.stopPropagation()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}]}},[s("el-input",{ref:"inputField",attrs:{type:"textarea",value:e.value,placeholder:e.parameter.placeholder,rows:"15"},on:{change:e.valueChanged,keydown:function(t){return t.stopPropagation(),e.noOp(t)}},model:{value:e.tempValue,callback:function(t){e.tempValue=t},expression:"tempValue"}})],1)])])],1):e._e()},Y=[],X=x["default"].extend({name:"TextEdit",props:["dialogVisible","parameter","value"],data(){return{tempValue:""}},methods:{valueChanged(e){this.$emit("valueChanged",e)},closeDialog(){return this.$emit("closeDialog"),!1}},mounted(){this.tempValue=this.value},watch:{dialogVisible(){!0===this.dialogVisible&&x["default"].nextTick(()=>{this.$refs.inputField.focus()})},value(){this.tempValue=this.value}}}),Z=X,Q=(s("6188"),Object(f["a"])(Z,G,Y,!1,null,"e1a93d38",null)),ee=Q.exports,te=s("6fae"),se=s("77f0"),oe=Object(p["a"])(u["a"],te["a"],se["a"],T["a"]).extend({name:"ParameterInput",components:{CodeEdit:w,ExpressionEdit:K,PrismEditor:d.a,TextEdit:ee},props:["displayOptions","parameter","path","value","isCredential"],data(){return{codeEditDialogVisible:!1,nodeName:"",expressionAddOperation:"set",expressionEditDialogVisible:!1,remoteParameterOptions:[],remoteParameterOptionsLoading:!1,remoteParameterOptionsLoadingIssues:null,textEditDialogVisible:!1,tempValue:"",dateTimePickerOptions:{shortcuts:[{text:"Today",onClick(e){e.$emit("pick",new Date)}},{text:"Yesterday",onClick(e){const t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"A week ago",onClick(e){const t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]}}},watch:{dependentParametersValues(){this.loadRemoteParameterOptions()},value(){"color"===this.parameter.type&&!0===this.getArgument("showAlpha")||(this.tempValue=this.displayValue)}},computed:{dependentParametersValues(){const e=this.getArgument("loadOptionsDependsOn");if(void 0===e)return null;const t=this.$store.getters.activeNode.parameters,s=this.resolveParameter(t),o=[];for(const i of e)o.push(Object(a["get"])(s,i));return o.join("|")},node(){return this.$store.getters.activeNode},displayTitle(){let e=`Parameter: "${this.shortPath}"`;return this.getIssues.length?(e+=" has issues",!0===this.isValueExpression&&(e+=" and expression"),e+="!"):!0===this.isValueExpression&&(e+=" has expression"),e},displayValue(){if(!0===this.remoteParameterOptionsLoading)return"Loading options...";let e;if(e=!1===this.isValueExpression?this.value:this.expressionValueComputed,"color"===this.parameter.type&&!0===this.getArgument("showAlpha")&&"#"===e.charAt(0)){const t=parseInt(e.slice(1),16),s=[];s.push(t>>24&255),s.push(t>>16&255),s.push(t>>8&255),s.push((255-t&255)/255),e="rgba("+s.join()+")"}if(void 0!==e&&null!==e&&"string"===this.parameter.type){const t=this.getArgument("rows");void 0!==t&&1!==t||(e=e.toString().replace(/\n/,"|"))}return e},displayOptionsComputed(){return!0!==this.isReadOnly&&("collection"!==this.parameter.type&&!0===this.displayOptions)},expressionValueComputed(){if(null===this.node)return null;let e;try{e=this.resolveExpression(this.value)}catch(t){e=`[ERROR: ${t.message}]`}return"number"===this.parameter.type&&(e=parseInt(e,10),isNaN(e))?null:e},getStringInputType(){if(!0===this.getArgument("password"))return"password";const e=this.getArgument("rows");return void 0!==e&&e>1?"textarea":"text"},getIssues(){if(!0===this.isCredential||null===this.node)return[];const e=this.shortPath.split(".");e.pop();const t=n["NodeHelpers"].getParameterIssues(this.parameter,this.node.parameters,e.join("."));if(["options","multiOptions"].includes(this.parameter.type)&&!1===this.remoteParameterOptionsLoading&&null===this.remoteParameterOptionsLoadingIssues){const e=this.parameterOptions.map(e=>e.value),s=[];Array.isArray(this.displayValue)?s.push.apply(s,this.displayValue):s.push(this.displayValue);for(const o of s)null!==o&&e.includes(o)||(void 0===t.parameters&&(t.parameters={}),t.parameters[this.parameter.name]=[`The value "${o}" is not supported!`])}else null!==this.remoteParameterOptionsLoadingIssues&&(void 0===t.parameters&&(t.parameters={}),t.parameters[this.parameter.name]=[`There was a problem loading the parameter options from server: "${this.remoteParameterOptionsLoadingIssues}"`]);return void 0!==t&&void 0!==t.parameters&&void 0!==t.parameters[this.parameter.name]?t.parameters[this.parameter.name]:[]},isDefault(){return this.parameter.default===this.value},isEditor(){return"code"===this.getArgument("editor")},isValueExpression(){return!0!==this.parameter.noDataExpression&&("string"===typeof this.value&&"="===this.value.charAt(0))},parameterOptions(){return void 0===this.remoteMethod?this.parameter.options:this.remoteParameterOptions},parameterInputClasses(){const e=[];return this.isValueExpression&&e.push("expression"),this.getIssues.length&&e.push("has-issues"),e},parameterInputWrapperStyle(){let e=0;const t={width:"100%"};return!0===this.displayOptionsComputed&&(e+=25),this.getIssues.length&&(e+=20),0!==e&&(t.width=`calc(100% - ${e}px)`),t},remoteMethod(){return this.getArgument("loadOptionsMethod")},shortPath(){const e=this.path.split(".");return e.shift(),e.join(".")},workflow(){return this.getWorkflow()}},methods:{async loadRemoteParameterOptions(){if(null===this.node||void 0===this.remoteMethod||this.remoteParameterOptionsLoading)return;this.remoteParameterOptionsLoadingIssues=null,this.remoteParameterOptionsLoading=!0,this.remoteParameterOptions.length=0;const e=this.$store.getters.activeNode.parameters,t=this.resolveParameter(e);try{const e=await this.restApi().getNodeParameterOptions(this.node.type,this.path,this.remoteMethod,t,this.node.credentials);this.remoteParameterOptions.push.apply(this.remoteParameterOptions,e)}catch(s){this.remoteParameterOptionsLoadingIssues=s.message}this.remoteParameterOptionsLoading=!1},closeCodeEditDialog(){this.codeEditDialogVisible=!1},closeExpressionEditDialog(){this.expressionEditDialogVisible=!1},closeTextEditDialog(){this.textEditDialogVisible=!1},displayEditDialog(){this.isEditor?this.codeEditDialogVisible=!0:this.textEditDialogVisible=!0},getArgument(e){if(void 0!==this.parameter.typeOptions&&void 0!==this.parameter.typeOptions[e])return this.parameter.typeOptions[e]},expressionUpdated(e){this.valueChanged(e)},setFocus(){this.isValueExpression?this.expressionEditDialogVisible=!0:["json","string"].includes(this.parameter.type)&&this.getArgument("alwaysOpenEditWindow")?this.displayEditDialog():(null!==this.node&&(this.nodeName=this.node.name),setTimeout(()=>{this.$refs.inputField.$el&&this.$refs.inputField.$el.querySelector("textarea"===this.getStringInputType?"textarea":"input").focus()}))},rgbaToHex(e){const t=e.match(/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d+(\.\d+)?)\)$/);if(null===t)return null;const[s,o,i,a]=t.splice(1,4).map(e=>Number(e));return"#"+((1<<24)+(s<<16)+(o<<8)+i).toString(16).slice(1)+(256+Math.floor(255*(1-a))).toString(16).slice(1)},valueChanged(e){if(e instanceof Date&&(e=e.toISOString()),"color"===this.parameter.type&&!0===this.getArgument("showAlpha")&&null!==e&&"#"!==e.toString().charAt(0)){const t=this.rgbaToHex(e);null!==t&&(this.tempValue=t,e=t)}const t={node:null!==this.node?this.node.name:this.nodeName,name:this.path,value:e};this.$emit("valueChanged",t)},optionSelected(e){"resetValue"===e?this.valueChanged(this.parameter.default):"addExpression"===e?(this.valueChanged("="+this.value),this.expressionEditDialogVisible=!0):"removeExpression"===e&&this.valueChanged(this.expressionValueComputed||null)}},mounted(){if(this.tempValue=this.displayValue,null!==this.node&&(this.nodeName=this.node.name),"color"===this.parameter.type&&!0===this.getArgument("showAlpha")&&null!==this.displayValue&&"#"!==this.displayValue.toString().charAt(0)){const e=this.rgbaToHex(this.displayValue);null!==e&&(this.tempValue=e)}if(void 0!==this.remoteMethod&&null!==this.node&&(this.$watch(()=>this.node.credentials,()=>{this.loadRemoteParameterOptions()},{deep:!0,immediate:!0}),this.parameter.typeOptions&&this.parameter.typeOptions.reloadOnChange)){const e=this.parameter.typeOptions.reloadOnChange;for(let t=0;t<e.length;t++){const s=e[t];s in this.node.parameters&&this.$watch(()=>this.node&&this.node.parameters&&this.node.parameters[s]?this.node.parameters[s]:null,()=>{this.loadRemoteParameterOptions()},{deep:!0,immediate:!0})}}}}),ie=oe,ae=(s("67d2"),s("847d"),Object(f["a"])(ie,o,i,!1,null,"c200f802",null));t["a"]=ae.exports},"89f3":function(e,t,s){},"8aed":function(e,t,s){},"8be7":function(e,t,s){"use strict";s("4699")},9147:function(e,t,s){},"9c4d":function(e,t,s){},"9d30":function(e,t,s){"use strict";s("42af")},"9e8d":function(e,t,s){},a02c:function(e,t,s){"use strict";var o=s("0d1f"),i=s.n(o);s.d(t,"default",(function(){return i.a}))},a185:function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return l}));var o=s("8206"),i=s.n(o);class a extends Error{constructor(e,t={}){super(e),this.name="ResponseError";const{errorCode:s,httpStatusCode:o,stack:i}=t;s&&(this.errorCode=s),o&&(this.httpStatusCode=o),i&&(this.serverStackTrace=i)}}async function n(e){const{method:t,baseURL:s,endpoint:o,headers:n,data:r}=e,l={method:t,url:o,baseURL:s,headers:n};["PATCH","POST","PUT"].includes(t)?l.data=r:l.params=r;try{const e=await i.a.request(l);return e.data}catch(c){if("Network Error"===c.message)throw new a("API-Server can not be reached. It is probably down.");const e=c.response.data;if(void 0!==e&&void 0!==e.message){if("NodeApiError"===e.name)throw e.httpStatusCode=c.response.status,e;throw new a(e.message,{errorCode:e.code,httpStatusCode:c.response.status,stack:e.stack})}throw c}}async function r(e,t,s,o){const i=await n({method:t,baseURL:e.baseUrl,endpoint:s,headers:{sessionid:e.sessionId},data:o});return i.data}async function l(e,t,s){return await n({method:"GET",baseURL:e,endpoint:t,data:s})}},a267:function(e,t,s){},a38a:function(e,t,s){},aaea:function(e,t,s){},ab7d:function(e,t,s){"use strict";s("03b2")},ae93:function(e,t,s){"use strict";s("041d")},aef8:function(e,t,s){},b44c:function(e,t,s){},b47e:function(e,t,s){"use strict";s("89f3")},b4ca:function(e,t,s){},b715:function(e,t,s){},b8b6:function(e,t,s){},b99a:function(e,t,s){},c306:function(e,t,s){"use strict";var o=s("3aeb"),i=s.n(o);s.d(t,"default",(function(){return i.a}))},c320:function(e,t,s){"use strict";s("4637")},c823:function(e,t,s){e.exports={subcategory:"SubcategoryItem_subcategory_1qA9P",details:"SubcategoryItem_details_vkl5C",title:"SubcategoryItem_title_bhMTr",description:"SubcategoryItem_description_3eMGH",action:"SubcategoryItem_action_18PKP",arrow:"SubcategoryItem_arrow_1jPkb"}},c9f4:function(e,t,s){"use strict";s("b715")},cd42:function(e,t,s){"use strict";s("3b87")},cd49:function(e,t,s){"use strict";s.r(t);var o=s("9869"),i=(s("9f9b"),s("53fe"),s("1097"),s("9b09"),s("2617")),a=s.n(i),n=s("8767"),r=s("151b"),l=s.n(r),c=(s("5572"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("div",{attrs:{id:"header"}},[s("router-view",{attrs:{name:"header"}})],1),s("div",{attrs:{id:"sidebar"}},[s("router-view",{attrs:{name:"sidebar"}})],1),s("div",{attrs:{id:"content"}},[s("router-view")],1)])}),d=[],u={name:"App"},p=u,h=(s("5c0b"),s("2be6")),m=Object(h["a"])(p,c,d,!1,null,null,null),f=m.exports,g=s("5f2b"),w=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{class:{"main-header":!0,expanded:!e.sidebarMenuCollapsed}},[s("div",{staticClass:"top-menu"},[e.isExecutionPage?s("ExecutionDetails"):s("WorkflowDetails")],1)])])},v=[],y=s("aaf5"),b=s("9ce4"),k=s("debe"),x=s("6fae"),C=s("77f0");const $=o["default"].extend({methods:{$titleSet(e,t){let s="⚠️";"EXECUTING"===t?s="🔄":"IDLE"===t&&(s="▶️"),window.document.title=`n8n - ${s} ${e}`},$titleReset(){document.title="n8n - Workflow Automation"}}});var N=s("d2e2");const E=Object(y["a"])(k["a"],x["a"],C["a"],$,N["a"]).extend({data(){return{eventSource:null,reconnectTimeout:null,retryTimeout:null,pushMessageQueue:[]}},computed:{sessionId(){return this.$store.getters.sessionId}},methods:{pushAutomaticReconnect(){null===this.reconnectTimeout&&(this.reconnectTimeout=setTimeout(()=>{this.pushConnect()},3e3))},pushConnect(){this.pushDisconnect();const e=`${this.$store.getters.getRestUrl}/push?sessionId=${this.sessionId}`;this.eventSource=new EventSource(e),this.eventSource.addEventListener("message",this.pushMessageReceived,!1),this.eventSource.addEventListener("open",()=>{this.$store.commit("setPushConnectionActive",!0),null!==this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null)},!1),this.eventSource.addEventListener("error",()=>{this.pushDisconnect(),null!==this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.$store.commit("setPushConnectionActive",!1),this.pushAutomaticReconnect()},!1)},pushDisconnect(){null!==this.eventSource&&(this.eventSource.close(),this.eventSource=null,this.$store.commit("setPushConnectionActive",!1))},queuePushMessage(e,t){this.pushMessageQueue.push({event:e,retriesLeft:t}),null===this.retryTimeout&&(this.retryTimeout=setTimeout(this.processWaitingPushMessages,20))},processWaitingPushMessages(){null!==this.retryTimeout&&(clearTimeout(this.retryTimeout),this.retryTimeout=null);const e=this.pushMessageQueue.length;for(let t=0;t<e;t++){const e=this.pushMessageQueue.shift();if(!1===this.pushMessageReceived(e.event,!0)){e.retriesLeft-=1,e.retriesLeft>0&&this.pushMessageQueue.unshift(e);break}}0!==this.pushMessageQueue.length&&null===this.retryTimeout&&(this.retryTimeout=setTimeout(this.processWaitingPushMessages,25))},pushMessageReceived(e,t){const s=5;let o;try{o=JSON.parse(e.data)}catch(i){return!1}if("sendConsoleMessage"===o.type){const e=o.data;return console.log(e.source,e.message),!0}if(!["testWebhookReceived"].includes(o.type)&&!0!==t&&this.pushMessageQueue.length)return this.queuePushMessage(e,s),!1;if("nodeExecuteAfter"===o.type||"nodeExecuteBefore"===o.type){if(!1===this.$store.getters.isActionActive("workflowRunning"))return!1;const i=o.data;if(this.$store.getters.activeExecutionId!==i.executionId)return!0!==t&&this.queuePushMessage(e,s),!1}if("executionFinished"===o.type){const i=o.data;if(this.$store.commit("finishActiveExecution",i),!1===this.$store.getters.isActionActive("workflowRunning"))return!1;if(this.$store.getters.activeExecutionId!==i.executionId)return!0!==t&&this.queuePushMessage(e,s),!1;const a=i.data;let n;const r=this.getWorkflow();if(!0!==a.finished){let e="There was a problem executing the workflow!";if(a.data.resultData.error&&a.data.resultData.error.message){let t;a.data.resultData.error.node&&(t="string"===typeof a.data.resultData.error.node?a.data.resultData.error.node:a.data.resultData.error.node.name);const s=t?`${t}: ${a.data.resultData.error.message}`:a.data.resultData.error.message;e=`There was a problem executing the workflow:<br /><strong>"${s}"</strong>`}n=e,this.$titleSet(r.name,"ERROR"),this.$showMessage({title:"Problem executing workflow",message:e,type:"error"})}else this.$titleSet(r.name,"IDLE"),this.$showMessage({title:"Workflow got executed",message:"Workflow did get executed successfully!",type:"success"});a.data.resultData.runData=this.$store.getters.getWorkflowRunData,this.$store.commit("setExecutingNode",null),this.$store.commit("setWorkflowExecutionData",a),this.$store.commit("removeActiveAction","workflowRunning"),this.updateNodesExecutionIssues();let l=0;a.data.resultData.lastNodeExecuted&&!n&&(l=a.data.resultData.runData[a.data.resultData.lastNodeExecuted][0].data.main[0].length),this.$externalHooks().run("pushConnection.executionFinished",{itemsCount:l,nodeName:a.data.resultData.lastNodeExecuted,errorMessage:n,runDataExecutedStartData:a.data.startData,resultDataError:a.data.resultData.error})}else if("executionStarted"===o.type){const e=o.data,t={id:e.executionId,finished:!1,mode:e.mode,startedAt:e.startedAt,retryOf:e.retryOf,workflowId:e.workflowId,workflowName:e.workflowName};this.$store.commit("addActiveExecution",t)}else if("nodeExecuteAfter"===o.type){const e=o.data;this.$store.commit("addNodeExecutionData",e)}else if("nodeExecuteBefore"===o.type){const e=o.data;this.$store.commit("setExecutingNode",e.nodeName)}else if("testWebhookDeleted"===o.type){const e=o.data;e.workflowId===this.$store.getters.workflowId&&(this.$store.commit("setExecutionWaitingForWebhook",!1),this.$store.commit("removeActiveAction","workflowRunning"))}else if("testWebhookReceived"===o.type){const e=o.data;e.workflowId===this.$store.getters.workflowId&&(this.$store.commit("setExecutionWaitingForWebhook",!1),this.$store.commit("setActiveExecutionId",e.executionId)),this.processWaitingPushMessages()}return!0}}});var T=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.workflowName?s("div",{staticClass:"container"},[s("BreakpointsObserver",{staticClass:"name-container",attrs:{valueXS:15,valueSM:25,valueMD:50},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.value;return[s("WorkflowNameShort",{attrs:{name:e.workflowName,limit:o,custom:!0},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.shortenedName;return[s("InlineTextEdit",{staticClass:"name",attrs:{value:e.workflowName,previewValue:o,isEditEnabled:e.isNameEditEnabled,maxLength:e.MAX_WORKFLOW_NAME_LENGTH,placeholder:"Enter workflow name"},on:{toggle:e.onNameToggle,submit:e.onNameSubmit}})]}}],null,!0)})]}}],null,!1,2175509936)}),e.isTagsEditEnabled?s("div",{staticClass:"tags"},[s("TagsDropdown",{ref:"dropdown",staticClass:"tags-edit",attrs:{createEnabled:!0,currentTagIds:e.appliedTagIds,eventBus:e.tagsEditBus,placeholder:"Choose or create a tag"},on:{blur:e.onTagsBlur,update:e.onTagsUpdate,esc:e.onTagsEditEsc}})],1):0===e.currentWorkflowTagIds.length?s("div",{staticClass:"tags"},[s("span",{staticClass:"add-tag clickable",on:{click:e.onTagsEditEnable}},[e._v("\t\n\t\t\t+ Add tag\n\t\t")])]):s("TagsContainer",{key:e.currentWorkflowId,staticClass:"tags",attrs:{tagIds:e.currentWorkflowTagIds,clickable:!0,responsive:!0},on:{click:e.onTagsEditEnable}}),s("PushConnectionTracker",{staticClass:"actions"},[[s("span",{staticClass:"activator"},[s("span",[e._v("Active:")]),s("WorkflowActivator",{attrs:{"workflow-active":e.isWorkflowActive,"workflow-id":e.currentWorkflowId,disabled:!e.currentWorkflowId}})],1),s("SaveWorkflowButton")]],2)],1):e._e()},D=[],_=s("85ee"),O=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{attrs:{title:e.name}},[e._t("default",null,{shortenedName:e.shortenedName})],2)},S=[];const I=25,A=4;var P=o["default"].extend({name:"WorkflowNameShort",props:["name","limit"],computed:{shortenedName(){const e=this.$props.name,t=this.$props.limit||I;if(e.length<=t)return e;const s=e.slice(0,t-A),o=e.slice(e.length-A,e.length);return`${s}...${o}`}}}),V=P,W=Object(h["a"])(V,O,S,!1,null,null,null),M=W.exports,L=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("IntersectionObserver",{staticClass:"tags-container",attrs:{threshold:1,enabled:e.responsive},on:{observed:e.onObserved}},[[s("span",{staticClass:"tags"},e._l(e.tags,(function(t){return s("span",{key:t.id,class:{clickable:!t.hidden},on:{click:function(s){return e.onClick(s,t)}}},[t.isCount?s("el-tag",{staticClass:"count-container",attrs:{title:t.title,type:"info",size:"small"}},[e._v("\n\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t")]):s("IntersectionObserved",{class:{hidden:t.hidden},attrs:{"data-id":t.id,enabled:e.responsive}},[s("el-tag",{class:{hoverable:e.hoverable},attrs:{title:t.name,type:"info",size:"small"}},[e._v("\n\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t")])],1)],1)})),0)]],2)},R=[],j=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"root"},[e._t("default")],2)},B=[],F=o["default"].extend({name:"IntersectionObserver",props:["threshold","enabled"],data(){return{observer:null}},mounted(){if(!this.$props.enabled)return;const e={root:this.$refs.root,rootMargin:"0px",threshold:this.$props.threshold},t=new IntersectionObserver(e=>{e.forEach(({target:e,isIntersecting:t})=>{this.$emit("observed",{el:e,isIntersecting:t})})},e);this.$data.observer=t,this.$on("observe",e=>{t.observe(e)}),this.$on("unobserve",e=>{t.unobserve(e)})},beforeDestroy(){this.$props.enabled&&this.$data.observer.disconnect()}}),U=F,z=Object(h["a"])(U,j,B,!1,null,null,null),H=z.exports,q=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{ref:"observed"},[e._t("default")],2)},J=[];function K(e,t,s){this.$children.forEach(o=>{const i=o.$options.name;i===e?o.$emit.apply(o,[t].concat(s)):K.apply(o,[e,t].concat([s]))})}var G=o["default"].extend({methods:{$dispatch(e,t,s){let o=this.$parent||this.$root,i=o.$options.name;while(o&&(!i||i!==e))o=o.$parent,o&&(i=o.$options.name);o&&o.$emit.apply(o,[t].concat(s))},$broadcast(e,t,s){K.call(this,e,t,s)}}}),Y=Object(y["a"])(G).extend({name:"IntersectionObserved",props:["enabled"],mounted(){this.$props.enabled&&this.$nextTick(()=>{this.$dispatch("IntersectionObserver","observe",this.$refs.observed)})},beforeDestroy(){this.$props.enabled&&this.$dispatch("IntersectionObserver","unobserve",this.$refs.observed)}}),X=Y,Z=Object(h["a"])(X,q,J,!1,null,null,null),Q=Z.exports;const ee=20;var te=o["default"].extend({components:{IntersectionObserver:H,IntersectionObserved:Q},name:"TagsContainer",props:["tagIds","limit","clickable","responsive","hoverable"],data(){return{visibility:{}}},computed:{tags(){const e=this.$props.tagIds.map(e=>this.$store.getters["tags/getTagById"](e)).filter(Boolean),t=this.$props.limit||ee;let s=t?e.slice(0,t):e;s=s.map(e=>({...e,hidden:this.$props.responsive&&!this.$data.visibility[e.id]}));let o=s.length;if(this.$props.responsive&&(o=Object.values(this.visibility).reduce((e,t)=>t?e+1:e,0)),o<e.length){const t=e.slice(o),i=t.reduce((e,t)=>e?`${e}, ${t.name}`:t.name,""),a={id:"count",name:"+"+t.length,title:i,isCount:!0};s.splice(o,0,a)}return s}},methods:{onObserved({el:e,isIntersecting:t}){e.dataset.id&&o["default"].set(this.$data.visibility,e.dataset.id,t)},onClick(e,t){this.clickable&&e.stopPropagation(),t.hidden||this.$emit("click",t.id)}}}),se=te,oe=(s("fa1e"),Object(h["a"])(se,L,R,!1,null,"759c30a8",null)),ie=oe.exports,ae=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[e.pushConnectionActive?e._t("default"):s("div",{staticClass:"push-connection-lost primary-color"},[s("el-tooltip",{attrs:{placement:"bottom-end",effect:"light"}},[s("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n\t\t\t\tCannot connect to server."),s("br"),e._v("\n\t\t\t\tIt is either down or you have a connection issue. "),s("br"),e._v("\n\t\t\t\tIt should reconnect automatically once the issue is resolved.\n\t\t\t")]),s("span",[s("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}}),e._v("  Connection lost\n\t\t\t")],1)])],1)],2)},ne=[],re=o["default"].extend({name:"PushConnectionTracker",computed:{...Object(b["b"])(["pushConnectionActive"])}}),le=re,ce=Object(h["a"])(le,ae,ne,!1,null,null,null),de=ce.exports,ue=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"workflow-activator"},[s("el-switch",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-spinner":"el-icon-loading",value:e.workflowActive,title:e.workflowActive?"Deactivate Workflow":"Activate Workflow",disabled:e.disabled||e.loading,"active-color":e.getActiveColor,"inactive-color":"#8899AA"},on:{change:e.activeChanged}}),e.couldNotBeStarted?s("div",{staticClass:"could-not-be-started"},[s("el-tooltip",{attrs:{placement:"top"}},[s("div",{attrs:{slot:"content"},on:{click:e.displayActivationError},slot:"content"},[e._v("The workflow is set to be active but could not be started."),s("br"),e._v("Click to display error message.")]),s("font-awesome-icon",{attrs:{icon:"exclamation-triangle"},on:{click:e.displayActivationError}})],1)],1):e._e()],1)},pe=[],he=s("4971"),me=s("7b04"),fe=Object(y["a"])(k["a"],he["a"],me["a"],C["a"],N["a"]).extend({name:"WorkflowActivator",props:["disabled","workflowActive","workflowId"],data(){return{loading:!1}},computed:{nodesIssuesExist(){return this.$store.getters.nodesIssuesExist},isWorkflowActive(){const e=this.$store.getters.getActiveWorkflows;return e.includes(this.workflowId)},couldNotBeStarted(){return!0===this.workflowActive&&this.isWorkflowActive!==this.workflowActive},getActiveColor(){return!0===this.couldNotBeStarted?"#ff4949":"#13ce66"}},methods:{async activeChanged(e){if(void 0===this.workflowId)return void this.$showMessage({title:"Problem activating workflow",message:"The workflow did not get saved yet so can not be set active!",type:"error"});if(!0===this.nodesIssuesExist)return void this.$showMessage({title:"Problem activating workflow",message:"It is only possible to activate a workflow when all issues on all nodes got resolved!",type:"error"});let t={};const s=this.$store.getters.workflowId;if(!0===e&&this.workflowId===s){const e=await this.confirmMessage("When you activate the workflow all currently unsaved changes of the workflow will be saved.","Activate and save?","warning","Yes, activate and save!");if(!1===e)return;t=await this.getWorkflowDataToSave()}t.active=e,this.loading=!0;try{await this.restApi().updateWorkflow(this.workflowId,t)}catch(a){const t=!0===e?"activated":"deactivated";return this.$showError(a,"Problem",`There was a problem and the workflow could not be ${t}:`),void(this.loading=!1)}const o=this.$store.getters.workflowId;let i="workflow.activeChange";o===this.workflowId&&(this.$store.commit("setActive",e),i="workflow.activeChangeCurrent"),!0===e?this.$store.commit("setWorkflowActive",this.workflowId):this.$store.commit("setWorkflowInactive",this.workflowId),this.$externalHooks().run(i,{workflowId:this.workflowId,active:e}),this.$emit("workflowActiveChanged",{id:this.workflowId,active:e}),this.loading=!1},async displayActivationError(){let e;try{const t=await this.restApi().getActivationError(this.workflowId);e=void 0===t?"Sorry there was a problem. No error got found to display.":`The following error occurred on workflow activation:<br /><i>${t.error.message}</i>`}catch(t){e="Sorry there was a problem requesting the error"}this.$showMessage({title:"Problem activating workflow",message:e,type:"warning",duration:0})}}}),ge=fe,we=(s("5539"),Object(h["a"])(ge,ue,pe,!1,null,"667c2a6f",null)),ve=we.exports,ye=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-button",{class:{saved:e.isSaved},attrs:{disabled:e.isWorkflowSaving,size:"small"},on:{click:e.save}},[e.isWorkflowSaving?s("font-awesome-icon",{attrs:{icon:"spinner",spin:""}}):e.isDirty||e.isNewWorkflow?s("span",[e._v("\n\t\tSave\n\t")]):s("span",[e._v("Saved")])],1)},be=[],ke=Object(y["a"])(N["a"]).extend({name:"SaveWorkflowButton",computed:{...Object(b["b"])({isDirty:"getStateIsDirty"}),isWorkflowSaving(){return this.$store.getters.isActionActive("workflowSaving")},isNewWorkflow(){return!this.$route.params.name},isSaved(){return!this.isWorkflowSaving&&!this.isDirty&&!this.isNewWorkflow}},methods:{save(){this.saveCurrentWorkflow()}}}),xe=ke,Ce=(s("2929"),Object(h["a"])(xe,ye,be,!1,null,"49936b5d",null)),$e=Ce.exports,Ne=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],class:{"tags-container":!0,focused:e.focused},on:{keydown:function(e){e.stopPropagation()}}},[s("el-select",{ref:"select",attrs:{popperAppendToBody:!1,value:e.appliedTags,loading:e.isLoading,placeholder:e.placeholder,"filter-method":e.filterOptions,filterable:"",multiple:"","loading-text":"...","popper-class":"tags-dropdown"},on:{change:e.onTagsUpdated,"visible-change":e.onVisibleChange,"remove-tag":e.onRemoveTag}},[0===e.options.length&&e.filter&&e.createEnabled?s("el-option",{key:e.CREATE_KEY,ref:"create",staticClass:"ops",attrs:{value:e.CREATE_KEY}},[s("font-awesome-icon",{attrs:{icon:"plus-circle"}}),s("span",[e._v('Create tag "'+e._s(e.filter)+'"')])],1):0===e.options.length?s("el-option",{attrs:{value:"message",disabled:""}},[e.createEnabled?s("span",[e._v("Type to create a tag")]):e.allTags.length>0?s("span",[e._v("No matching tags exist")]):s("span",[e._v("No tags exist")])]):e._e(),e._l(e.options,(function(e,t){return s("el-option",{key:e.id+"_"+t,ref:"tag",refInFor:!0,staticClass:"tag",attrs:{value:e.id,label:e.name}})})),s("el-option",{key:e.MANAGE_KEY,staticClass:"ops manage-tags",attrs:{value:e.MANAGE_KEY}},[s("font-awesome-icon",{attrs:{icon:"cog"}}),s("span",[e._v("Manage tags")])],1)],2)],1)},Ee=[];const Te="__manage",De="__create";var _e=Object(y["a"])(C["a"]).extend({name:"TagsDropdown",props:["placeholder","currentTagIds","createEnabled","eventBus"],data(){return{filter:"",MANAGE_KEY:Te,CREATE_KEY:De,focused:!1,preventUpdate:!1}},mounted(){const e=this.$refs.select;if(e){const t=e.$refs.input;t&&(t.setAttribute("maxlength",""+_["o"]),t.addEventListener("keydown",e=>{const t=e;"Escape"===t.key?this.$emit("esc"):"Enter"===t.key&&0===this.filter.length&&(this.$data.preventUpdate=!0,this.$emit("blur"),this.$refs.select&&"function"===typeof this.$refs.select.blur&&this.$refs.select.blur())}))}this.$props.eventBus&&this.$props.eventBus.$on("focus",()=>{this.focusOnInput(),this.focusOnTopOption()}),this.$store.dispatch("tags/fetchAll")},computed:{...Object(b["b"])("tags",["allTags","isLoading","hasTags"]),options(){return this.allTags.filter(e=>e&&e.name.toLowerCase().includes(this.$data.filter.toLowerCase()))},appliedTags(){return this.$props.currentTagIds.filter(e=>this.$store.getters["tags/getTagById"](e))}},methods:{filterOptions(e=""){this.$data.filter=e.trim(),this.$nextTick(()=>this.focusOnTopOption())},async onCreate(){const e=this.$data.filter;try{const t=await this.$store.dispatch("tags/create",e);this.$emit("update",[...this.$props.currentTagIds,t.id]),this.$nextTick(()=>this.focusOnTag(t.id)),this.$data.filter=""}catch(t){this.$showError(t,"New tag was not created",`A problem occurred when trying to create the "${e}" tag`)}},onTagsUpdated(e){const t=e.find(e=>e===Te||e===De);t===Te?(this.$data.filter="",this.$store.dispatch("ui/openTagsManagerModal")):t===De?this.onCreate():setTimeout(()=>{this.$data.preventUpdate||this.$emit("update",e),this.$data.preventUpdate=!1},0)},focusOnTopOption(){const e=this.$refs.tag,t=this.$refs.create;t&&t.hoverItem?t.hoverItem():e&&e[0]&&e[0].hoverItem&&(e[0].hoverItem(),e[0]&&e[0].$el&&e[0].$el.scrollIntoView&&e[0].$el.scrollIntoView())},focusOnTag(e){const t=this.$refs.tag||[];if(t&&t.length){const s=t.find(t=>t.value===e);s&&s.$el&&s.$el.scrollIntoView&&s.hoverItem&&(s.hoverItem(),s.$el.scrollIntoView())}},focusOnInput(){const e=this.$refs.select,t=e&&e.$refs.input;t&&t.focus&&(t.focus(),this.focused=!0)},onVisibleChange(e){e?this.focused=!0:(this.$data.filter="",this.focused=!1)},onRemoveTag(){this.$nextTick(()=>{this.focusOnInput()})},onClickOutside(e){"click"===e.type&&this.$emit("blur")}},watch:{allTags(){this.currentTagIds.length!==this.appliedTags.length&&this.$emit("update",this.appliedTags)}}}),Oe=_e,Se=(s("2cd0"),s("478f"),Object(h["a"])(Oe,Ne,Ee,!1,null,"4e54de10",null)),Ie=Se.exports,Ae=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"inline-edit",on:{keydown:function(e){e.stopPropagation()}}},[e.isEditEnabled?s("span",[s("ExpandableInputEdit",{attrs:{placeholder:e.placeholder,value:e.newValue,maxlength:e.maxLength,autofocus:!0,eventBus:e.inputBus},on:{input:e.onInput,esc:e.onEscape,blur:e.onBlur,enter:e.submit}})],1):s("span",{staticClass:"preview",on:{click:e.onClick}},[s("ExpandableInputPreview",{attrs:{value:e.previewValue||e.value}})],1)])},Pe=[],Ve=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ExpandableInputBase",{attrs:{value:e.value,placeholder:e.placeholder}},[s("input",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],ref:"input",staticClass:"el-input__inner",attrs:{placeholder:e.placeholder,maxlength:e.maxlength,size:"4"},domProps:{value:e.value},on:{input:e.onInput,keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onEnter(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.onEscape(t)}]}})])},We=[],Me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{"el-input":!0,"static-size":e.staticSize},attrs:{"data-value":e.hiddenValue}},[e._t("default")],2)},Le=[],Re=o["default"].extend({name:"ExpandableInputBase",props:["value","placeholder","staticSize"],computed:{hiddenValue(){let e=this.value.replace(/\s/g,".");return e||(e=this.$props.placeholder),""+e}}}),je=Re,Be=(s("0759"),Object(h["a"])(je,Me,Le,!1,null,"583fb0b4",null)),Fe=Be.exports,Ue=o["default"].extend({components:{ExpandableInputBase:Fe},name:"ExpandableInputEdit",props:["value","placeholder","maxlength","autofocus","eventBus"],mounted(){this.$props.autofocus&&this.$refs.input&&this.focus(),this.$props.eventBus&&this.$props.eventBus.$on("focus",()=>{this.focus()})},methods:{focus(){this.$refs.input&&this.$refs.input.focus()},onInput(){this.$emit("input",this.$refs.input.value)},onEnter(){this.$emit("enter",this.$refs.input.value)},onClickOutside(e){"click"===e.type&&this.$emit("blur",this.$refs.input.value)},onEscape(){this.$emit("esc")}}}),ze=Ue,He=(s("10ec"),Object(h["a"])(ze,Ve,We,!1,null,"1b96d492",null)),qe=He.exports,Je=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ExpandableInputBase",{attrs:{value:e.value,staticSize:!0}},[[s("input",{class:{"el-input__inner":!0,clickable:!0},attrs:{disabled:!0,size:"4"},domProps:{value:e.value}})]],2)},Ke=[],Ge=o["default"].extend({components:{ExpandableInputBase:Fe},name:"ExpandableInputPreview",props:["value"]}),Ye=Ge,Xe=(s("d79a"),Object(h["a"])(Ye,Je,Ke,!1,null,"1089bad1",null)),Ze=Xe.exports,Qe=o["default"].extend({name:"InlineTextEdit",components:{ExpandableInputEdit:qe,ExpandableInputPreview:Ze},props:["isEditEnabled","value","placeholder","maxLength","previewValue"],data(){return{newValue:"",escPressed:!1,disabled:!1,inputBus:new o["default"]}},methods:{onInput(e){this.disabled||(this.newValue=e)},onClick(){this.disabled||(this.$data.newValue=this.$props.value,this.$emit("toggle"))},onBlur(){this.disabled||(this.$data.escPressed||this.submit(),this.$data.escPressed=!1)},submit(){if(this.disabled)return;const e=e=>{this.$data.disabled=!1,e||this.$data.inputBus.$emit("focus")};this.$data.disabled=!0,this.$emit("submit",this.newValue,e)},onEscape(){this.disabled||(this.$data.escPressed=!0,this.$emit("toggle"))}}}),et=Qe,tt=(s("85f9"),Object(h["a"])(et,Ae,Pe,!1,null,"b84f776e",null)),st=tt.exports,ot=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[e._t("default",null,{bp:e.bp,value:e.value})],2)},it=[],at=Object(y["a"])(he["a"]).extend({name:"BreakpointsObserver",props:["valueXS","valueXL","valueLG","valueMD","valueSM","valueDefault"],data(){return{width:window.innerWidth}},created(){window.addEventListener("resize",this.onResize)},beforeDestroy(){window.removeEventListener("resize",this.onResize)},methods:{onResize(){this.callDebounced("onResizeEnd",50)},onResizeEnd(){this.$data.width=window.innerWidth}},computed:{bp(){return this.$data.width<_["d"]?"XS":this.$data.width>=_["e"]?"XL":this.$data.width>=_["b"]?"LG":this.$data.width>=_["c"]?"MD":"SM"},value(){return void 0!==this.$props.valueXS&&this.$data.width<_["d"]?this.$props.valueXS:void 0!==this.$props.valueXL&&this.$data.width>=_["e"]?this.$props.valueXL:void 0!==this.$props.valueLG&&this.$data.width>=_["b"]?this.$props.valueLG:void 0!==this.$props.valueMD&&this.$data.width>=_["c"]?this.$props.valueMD:void 0!==this.$props.valueSM?this.$props.valueSM:this.$props.valueDefault}}}),nt=at,rt=Object(h["a"])(nt,ot,it,!1,null,null,null),lt=rt.exports;const ct=(e,t)=>{if(e.length!==t.length)return!0;const s=new Set(e);return t.reduce((e,t)=>e||!s.has(t),!1)};var dt=Object(y["a"])(N["a"]).extend({name:"WorkflowDetails",components:{TagsContainer:ie,PushConnectionTracker:de,WorkflowNameShort:M,WorkflowActivator:ve,SaveWorkflowButton:$e,TagsDropdown:Ie,InlineTextEdit:st,BreakpointsObserver:lt},data(){return{isTagsEditEnabled:!1,isNameEditEnabled:!1,appliedTagIds:[],tagsEditBus:new o["default"],MAX_WORKFLOW_NAME_LENGTH:_["p"],tagsSaving:!1}},computed:{...Object(b["b"])({isWorkflowActive:"isActive",workflowName:"workflowName",isDirty:"getStateIsDirty",currentWorkflowTagIds:"workflowTags"}),isWorkflowSaving(){return this.$store.getters.isActionActive("workflowSaving")},currentWorkflowId(){return this.$route.params.name}},methods:{onTagsEditEnable(){this.$data.appliedTagIds=this.currentWorkflowTagIds,this.$data.isTagsEditEnabled=!0,setTimeout(()=>{this.$data.isNameEditEnabled=!1,this.$data.tagsEditBus.$emit("focus")},0)},async onTagsUpdate(e){this.$data.appliedTagIds=e},async onTagsBlur(){const e=this.currentWorkflowTagIds,t=this.$data.appliedTagIds;if(!ct(e,t))return void(this.$data.isTagsEditEnabled=!1);if(this.$data.tagsSaving)return;this.$data.tagsSaving=!0;const s=await this.saveCurrentWorkflow({tags:t});this.$data.tagsSaving=!1,s&&(this.$data.isTagsEditEnabled=!1)},onTagsEditEsc(){this.$data.isTagsEditEnabled=!1},onNameToggle(){this.$data.isNameEditEnabled=!this.$data.isNameEditEnabled,this.$data.isNameEditEnabled&&(this.$data.isTagsEditEnabled&&this.onTagsBlur(),this.$data.isTagsEditEnabled=!1)},async onNameSubmit(e,t){const s=e.trim();if(!s)return this.$showMessage({title:"Name missing",message:"Please enter a name, or press 'esc' to go back to the old one.",type:"error"}),void t(!1);if(s===this.workflowName)return this.$data.isNameEditEnabled=!1,void t(!0);const o=await this.saveCurrentWorkflow({name:e});o&&(this.$data.isNameEditEnabled=!1),t(o)}},watch:{currentWorkflowId(){this.$data.isTagsEditEnabled=!1,this.$data.isNameEditEnabled=!1}}}),ut=dt,pt=(s("51d6"),Object(h["a"])(ut,T,D,!1,null,"2ad7062e",null)),ht=pt.exports,mt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("span",{staticClass:"title"},[e._v("\n\t\tExecution Id:\n\t\t"),s("span",[s("strong",[e._v(e._s(e.executionId))]),e._v(" \n\t\t\t"),e.executionFinished?s("font-awesome-icon",{staticClass:"execution-icon success",attrs:{icon:"check",title:"Execution was successful"}}):s("font-awesome-icon",{staticClass:"execution-icon error",attrs:{icon:"times",title:"Execution failed"}})],1),e._v("\n\t\tof\n\t\t"),s("span",{staticClass:"primary-color clickable",attrs:{title:"Open Workflow"}},[s("WorkflowNameShort",{attrs:{name:e.workflowName},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.shortenedName;return[s("span",{on:{click:function(t){return e.openWorkflow(e.workflowExecution.workflowId)}}},[e._v('\n\t\t\t\t\t\t"'+e._s(o)+'"\n\t\t\t\t\t')])]}}])})],1),e._v("\n\t\tworkflow\n\t")]),s("ReadOnly",{staticClass:"read-only"})],1)},ft=[],gt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-tooltip",{staticClass:"primary-color",attrs:{placement:"bottom-end",effect:"light"}},[s("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n\t\tYou're viewing the log of a previous execution. You cannot"),s("br"),e._v("\n\t\tmake changes since this execution already occured. Make changes"),s("br"),e._v("\n\t\tto this workflow by clicking on its name on the left.\n\t")]),s("span",[s("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}}),e._v("\n\t\tRead only\n\t")],1)])},wt=[],vt={},yt=Object(h["a"])(vt,gt,wt,!1,null,null,null),bt=yt.exports,kt=Object(y["a"])($).extend({name:"ExecutionDetails",components:{WorkflowNameShort:M,ReadOnly:bt},computed:{executionId(){return this.$route.params.id},executionFinished(){const e=this.$store.getters.getWorkflowExecution;return!!e&&e.finished},workflowExecution(){return this.$store.getters.getWorkflowExecution},workflowName(){return this.$store.getters.workflowName}},methods:{async openWorkflow(e){this.$titleSet(this.workflowName,"IDLE"),this.$router.push({name:"NodeViewExisting",params:{name:e}})}}}),xt=kt,Ct=(s("351e"),Object(h["a"])(xt,mt,ft,!1,null,"13e8c850",null)),$t=Ct.exports,Nt=Object(y["a"])(E).extend({name:"MainHeader",components:{WorkflowDetails:ht,ExecutionDetails:$t},computed:{...Object(b["b"])("ui",["sidebarMenuCollapsed"]),isExecutionPage(){return["ExecutionById"].includes(this.$route.name)}},async mounted(){this.pushConnect()},beforeDestroy(){this.pushDisconnect()}}),Et=Nt,Tt=(s("33ac"),Object(h["a"])(Et,w,v,!1,null,null,null)),Dt=Tt.exports,_t=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"side-menu"}},[s("about",{attrs:{dialogVisible:e.aboutDialogVisible},on:{closeDialog:e.closeAboutDialog}}),s("executions-list",{attrs:{dialogVisible:e.executionsListDialogVisible},on:{closeDialog:e.closeExecutionsListOpenDialog}}),s("credentials-list",{attrs:{dialogVisible:e.credentialOpenDialogVisible},on:{closeDialog:e.closeCredentialOpenDialog}}),s("credentials-edit",{attrs:{dialogVisible:e.credentialNewDialogVisible},on:{closeDialog:e.closeCredentialNewDialog}}),s("workflow-settings",{attrs:{dialogVisible:e.workflowSettingsDialogVisible},on:{closeDialog:e.closeWorkflowSettingsDialog}}),s("input",{ref:"importFile",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:function(t){return e.handleFileImport()}}}),s("div",{staticClass:"side-menu-wrapper",class:{expanded:!e.isCollapsed}},[s("div",{staticClass:"clickable",attrs:{id:"collapse-change-button"},on:{click:e.toggleCollapse}},[s("font-awesome-icon",{staticClass:"icon",attrs:{icon:"angle-right"}})],1),s("el-menu",{attrs:{"default-active":"workflow",collapse:e.isCollapsed},on:{select:e.handleSelect}},[s("el-menu-item",{staticClass:"logo-item",attrs:{index:"logo"}},[s("a",{staticClass:"logo",attrs:{href:"https://n8n.io",target:"_blank"}},[s("img",{staticClass:"icon",attrs:{src:e.basePath+"n8n-icon-small.png",alt:"n8n.io"}}),s("span",{staticClass:"logo-text",attrs:{slot:"title"},slot:"title"},[e._v("n8n.io")])])]),s("MenuItemsIterator",{attrs:{items:e.sidebarMenuTopItems,root:!0}}),s("el-submenu",{attrs:{index:"workflow",title:"Workflow"}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"network-wired"}}),e._v(" \n\t\t\t\t\t"),s("span",{staticClass:"item-title-root",attrs:{slot:"title"},slot:"title"},[e._v("Workflows")])],1),s("el-menu-item",{attrs:{index:"workflow-new"}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"file"}}),e._v(" \n\t\t\t\t\t\t"),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("New")])],1)],2),s("el-menu-item",{attrs:{index:"workflow-open"}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"folder-open"}}),e._v(" \n\t\t\t\t\t\t"),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("Open")])],1)],2),s("el-menu-item",{attrs:{index:"workflow-save"}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"save"}}),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("Save")])],1)],2),s("el-menu-item",{attrs:{index:"workflow-duplicate",disabled:!e.currentWorkflow}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"copy"}}),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("Duplicate")])],1)],2),s("el-menu-item",{attrs:{index:"workflow-delete",disabled:!e.currentWorkflow}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"trash"}}),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("Delete")])],1)],2),s("el-menu-item",{attrs:{index:"workflow-download"}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"file-download"}}),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("Download")])],1)],2),s("el-menu-item",{attrs:{index:"workflow-import-url"}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"cloud"}}),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("Import from URL")])],1)],2),s("el-menu-item",{attrs:{index:"workflow-import-file"}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"hdd"}}),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("Import from File")])],1)],2),s("el-menu-item",{attrs:{index:"workflow-settings",disabled:!e.currentWorkflow}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"cog"}}),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("Settings")])],1)],2)],2),s("el-submenu",{attrs:{index:"credentials",title:"Credentials"}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"key"}}),e._v(" \n\t\t\t\t\t"),s("span",{staticClass:"item-title-root",attrs:{slot:"title"},slot:"title"},[e._v("Credentials")])],1),s("el-menu-item",{attrs:{index:"credentials-new"}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"file"}}),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("New")])],1)],2),s("el-menu-item",{attrs:{index:"credentials-open"}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"folder-open"}}),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("Open")])],1)],2)],2),s("el-menu-item",{attrs:{index:"executions"}},[s("font-awesome-icon",{attrs:{icon:"tasks"}}),e._v(" \n\t\t\t\t"),s("span",{staticClass:"item-title-root",attrs:{slot:"title"},slot:"title"},[e._v("Executions")])],1),s("el-submenu",{staticClass:"help-menu",attrs:{index:"help",title:"Help"}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"question"}}),e._v(" \n\t\t\t\t\t"),s("span",{staticClass:"item-title-root",attrs:{slot:"title"},slot:"title"},[e._v("Help")])],1),s("MenuItemsIterator",{attrs:{items:e.helpMenuItems}}),s("el-menu-item",{attrs:{index:"help-about"}},[s("template",{slot:"title"},[s("font-awesome-icon",{staticClass:"about-icon",attrs:{icon:"info"}}),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("About n8n")])],1)],2)],2),s("MenuItemsIterator",{attrs:{items:e.sidebarMenuBottomItems,root:!0}})],1)],1)],1)},Ot=[],St=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("el-dialog",{staticClass:"n8n-about",attrs:{visible:e.dialogVisible,"append-to-body":"",width:"50%",title:"About n8n","before-close":e.closeDialog}},[s("div",[s("el-row",[s("el-col",{staticClass:"info-name",attrs:{span:8}},[e._v("\n\t\t\t\t\tn8n Version:\n\t\t\t\t")]),s("el-col",{attrs:{span:16}},[e._v("\n\t\t\t\t\t"+e._s(e.versionCli)+"\n\t\t\t\t")])],1),s("el-row",[s("el-col",{staticClass:"info-name",attrs:{span:8}},[e._v("\n\t\t\t\t\tSource Code:\n\t\t\t\t")]),s("el-col",{attrs:{span:16}},[s("a",{attrs:{href:"https://github.com/n8n-io/n8n",target:"_blank"}},[e._v("https://github.com/n8n-io/n8n")])])],1),s("el-row",[s("el-col",{staticClass:"info-name",attrs:{span:8}},[e._v("\n\t\t\t\t\tLicense:\n\t\t\t\t")]),s("el-col",{attrs:{span:16}},[s("a",{attrs:{href:"https://github.com/n8n-io/n8n/blob/master/packages/cli/LICENSE.md",target:"_blank"}},[e._v("Apache 2.0 with Commons Clause")])])],1),s("div",{staticClass:"action-buttons"},[s("el-button",{attrs:{type:"success"},on:{click:e.closeDialog}},[e._v("\n\t\t\t\t\tClose\n\t\t\t\t")])],1)],1)])],1)},It=[],At=Object(y["a"])(he["a"],C["a"]).extend({name:"About",props:["dialogVisible"],computed:{versionCli(){return this.$store.getters.versionCli}},methods:{closeDialog(){return this.$emit("closeDialog"),!1}}}),Pt=At,Vt=(s("9d30"),Object(h["a"])(Pt,St,It,!1,null,"8c0e0dc0",null)),Wt=Vt.exports,Mt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.dialogVisible?s("div",{on:{keydown:function(e){e.stopPropagation()}}},[s("el-dialog",{staticClass:"credentials-edit-wrapper",attrs:{visible:e.dialogVisible,"append-to-body":"",width:"75%",title:e.title,nodeType:e.nodeType,"before-close":e.closeDialog}},[s("div",{staticClass:"title-container",attrs:{slot:"title",name:"title"},slot:"title"},[s("div",{staticClass:"title-left"},[e._v(e._s(e.title))]),s("div",{staticClass:"title-right"},[e.credentialType&&e.documentationUrl?s("div",{staticClass:"docs-container"},[s("svg",{staticClass:"help-logo",attrs:{target:"_blank",width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[s("title",[e._v("Node Documentation")]),s("g",{attrs:{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[s("g",{attrs:{transform:"translate(-1127.000000, -836.000000)","fill-rule":"nonzero"}},[s("g",{attrs:{transform:"translate(1117.000000, 825.000000)"}},[s("g",{attrs:{transform:"translate(10.000000, 11.000000)"}},[s("g",{attrs:{transform:"translate(2.250000, 2.250000)",fill:"#FF6150"}},[s("path",{attrs:{d:"M6,11.25 L7.5,11.25 L7.5,9.75 L6,9.75 L6,11.25 M6.75,2.25 C5.09314575,2.25 3.75,3.59314575 3.75,5.25 L5.25,5.25 C5.25,4.42157288 5.92157288,3.75 6.75,3.75 C7.57842712,3.75 8.25,4.42157288 8.25,5.25 C8.25,6.75 6,6.5625 6,9 L7.5,9 C7.5,7.3125 9.75,7.125 9.75,5.25 C9.75,3.59314575 8.40685425,2.25 6.75,2.25 M1.5,0 L12,0 C12.8284271,0 13.5,0.671572875 13.5,1.5 L13.5,12 C13.5,12.8284271 12.8284271,13.5 12,13.5 L1.5,13.5 C0.671572875,13.5 0,12.8284271 0,12 L0,1.5 C0,0.671572875 0.671572875,0 1.5,0 Z"}})]),s("rect",{attrs:{x:"0",y:"0",width:"18",height:"18"}})])])])])]),s("span",{staticClass:"doc-link-text"},[e._v("Need help? "),s("a",{staticClass:"doc-hyperlink",attrs:{href:e.documentationUrl,target:"_blank"}},[e._v("Open credential docs")])])]):e._e()])]),s("div",{staticClass:"credential-type-item"},[e.setCredentialType?e._e():s("el-row",[s("el-col",{attrs:{span:6}},[e._v("\n\t\t\t\t\tCredential type:\n\t\t\t\t")]),s("el-col",{attrs:{span:18}},[s("el-select",{ref:"credentialsDropdown",attrs:{filterable:"",placeholder:"Select Type",size:"small"},model:{value:e.credentialType,callback:function(t){e.credentialType=t},expression:"credentialType"}},e._l(e.credentialTypes,(function(e){return s("el-option",{key:e.name,attrs:{label:e.displayName,value:e.name}})})),1)],1)],1)],1),e.credentialType?s("credentials-input",{attrs:{credentialTypeData:e.getCredentialTypeData(e.credentialType),credentialData:e.credentialData,nodesInit:e.nodesInit},on:{credentialsCreated:e.credentialsCreated,credentialsUpdated:e.credentialsUpdated}}):e._e()],1)],1):e._e()},Lt=[],Rt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"credentials-input-wrapper",on:{keydown:function(e){e.stopPropagation()}}},[s("el-row",[s("el-col",{staticClass:"headline-regular",attrs:{span:6}},[e._v("\n\t\t\tCredentials Name:\n\t\t\t"),s("el-tooltip",{staticClass:"credentials-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.helpTexts.credentialsName)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),s("el-col",{attrs:{span:18}},[s("el-input",{attrs:{size:"small",type:"text"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1),s("br"),e.credentialProperties.length?s("div",{staticClass:"headline"},[e._v("\n\t\tCredential Data:\n\t\t"),s("el-tooltip",{staticClass:"credentials-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.helpTexts.credentialsData)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1):e._e(),e._l(e.credentialProperties,(function(t){return s("div",{key:t.name},[s("el-row",{staticClass:"parameter-wrapper"},[s("el-col",{staticClass:"parameter-name",attrs:{span:6}},[e._v("\n\t\t\t\t"+e._s(t.displayName)+":\n\t\t\t\t"),t.description?s("el-tooltip",{staticClass:"parameter-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(t.description)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1):e._e()],1),s("el-col",{attrs:{span:18}},[s("parameter-input",{attrs:{parameter:t,value:e.propertyValue[t.name],path:t.name,isCredential:!0,displayOptions:!0},on:{valueChanged:e.valueChanged}})],1)],1)],1)})),e.isOAuthType?s("el-row",{staticClass:"oauth-information"},[s("el-col",{staticClass:"headline",attrs:{span:6}},[e._v("\n\t\t\tOAuth\n\t\t")]),s("el-col",{attrs:{span:18}},[!1===e.requiredPropertiesFilled?s("span",[s("el-button",{attrs:{title:"Connect OAuth Credentials",circle:"",disabled:!0}},[s("font-awesome-icon",{attrs:{icon:"redo"}})],1),e._v("\n\t\t\t\tEnter all required properties\n\t\t\t")],1):!0===e.isOAuthConnected?s("span",[s("el-button",{attrs:{title:"Reconnect OAuth Credentials",circle:""},on:{click:function(t){return t.stopPropagation(),e.oAuthCredentialAuthorize()}}},[s("font-awesome-icon",{attrs:{icon:"redo"}})],1),e._v("\n\t\t\t\tConnected\n\t\t\t")],1):s("span",[e.isGoogleOAuthType?s("span",[s("img",{staticClass:"google-icon clickable",attrs:{src:e.basePath+"google-signin.png",alt:"Sign in with Google"},on:{click:function(t){return t.stopPropagation(),e.oAuthCredentialAuthorize()}}})]):s("span",[s("el-button",{attrs:{title:"Connect OAuth Credentials",circle:""},on:{click:function(t){return t.stopPropagation(),e.oAuthCredentialAuthorize()}}},[s("font-awesome-icon",{attrs:{icon:"sign-in-alt"}})],1),e._v("\n\t\t\t\t\tNot connected\n\t\t\t\t")],1)]),e.credentialProperties.length?s("div",[s("div",{staticClass:"clickable oauth-callback-headline",class:{expanded:!e.isMinimized},attrs:{title:e.isMinimized?"Click to display Webhook URLs":"Click to hide Webhook URLs"},on:{click:function(t){e.isMinimized=!e.isMinimized}}},[s("font-awesome-icon",{staticClass:"minimize-button minimize-icon",attrs:{icon:"angle-up"}}),e._v("\n\t\t\t\t\tOAuth Callback URL\n\t\t\t\t")],1),e.isMinimized?e._e():s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"Click to copy Callback URL",placement:"right"}},[s("div",{staticClass:"callback-url left-ellipsis clickable",on:{click:e.copyCallbackUrl}},[e._v("\n\t\t\t\t\t\t"+e._s(e.oAuthCallbackUrl)+"\n\t\t\t\t\t")])])],1):e._e()])],1):e._e(),s("el-row",{staticClass:"nodes-access-wrapper"},[s("el-col",{staticClass:"headline",attrs:{span:6}},[e._v("\n\t\t\tNodes with access:\n\t\t\t"),s("el-tooltip",{staticClass:"credentials-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.helpTexts.nodesWithAccess)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),s("el-col",{attrs:{span:18}},[s("el-transfer",{attrs:{titles:["No Access","Access "],data:e.allNodesRequestingAccess},model:{value:e.nodesAccess,callback:function(t){e.nodesAccess=t},expression:"nodesAccess"}}),0===e.nodesAccess.length?s("div",{staticClass:"no-nodes-access"},[s("strong",[e._v("\n\t\t\t\t\tImportant\n\t\t\t\t")]),s("br"),e._v("\n\t\t\t\tAdd at least one node which has access to the credentials!\n\t\t\t")]):e._e()],1)],1),s("div",{staticClass:"action-buttons"},[e.credentialDataDynamic?s("el-button",{attrs:{type:"success"},on:{click:function(t){return e.updateCredentials(!0)}}},[e._v("\n\t\t\tSave\n\t\t")]):s("el-button",{attrs:{type:"success"},on:{click:function(t){return e.createCredentials(!0)}}},[e._v("\n\t\t\tCreate\n\t\t")])],1)],2)},jt=[],Bt=s("9ec3");const Ft=o["default"].extend({data(){return{copyPasteElementsGotCreated:!1}},mounted(){if(!0===this.copyPasteElementsGotCreated)return;this.copyPasteElementsGotCreated=!0;const e=document.createElement("style");e.type="text/css",e.innerHTML="\n\t\t\t.hidden-copy-paste {\n\t\t\tposition: absolute;\n\t\t\tbottom: 0;\n\t\t\tleft: 0;\n\t\t\twidth: 10px;\n\t\t\theight: 10px;\n\t\t\tdisplay: block;\n\t\t\tfont-size: 1px;\n\t\t\tz-index: -1;\n\t\t\tcolor: transparent;\n\t\t\tbackground: transparent;\n\t\t\toverflow: hidden;\n\t\t\tborder: none;\n\t\t\tpadding: 0;\n\t\t\tresize: none;\n\t\t\toutline: none;\n\t\t\t-webkit-user-select: text;\n\t\t\tuser-select: text;\n\t\t}\n\t\t",document.getElementsByTagName("head")[0].appendChild(e);const t=-1!==navigator.appVersion.search("Safari")&&-1===navigator.appVersion.search("Chrome")&&-1===navigator.appVersion.search("CrMo")&&-1===navigator.appVersion.search("CriOS"),s=-1!==navigator.userAgent.toLowerCase().indexOf("msie")||-1!==navigator.userAgent.toLowerCase().indexOf("trident"),o=document.createElement("input");o.setAttribute("type","text"),o.setAttribute("id","hidden-input-copy-paste"),o.setAttribute("class","hidden-copy-paste"),document.body.append(o);let i=null;s&&(i=document.createElement("div"),i.setAttribute("id","hidden-ie-clipboard-copy-paste"),i.setAttribute("class","hidden-copy-paste"),i.setAttribute("contenteditable","true"),document.body.append(i),document.addEventListener("beforepaste",()=>{o.is(":focus")&&this.focusIeClipboardDiv(i)},!0));let a="";const n=e=>{};o.addEventListener("input",e=>{const s=o.value;a+=s,n(a),t?(o.focus(),setTimeout(()=>{this.focusHiddenArea(o)},0)):this.focusHiddenArea(o)}),["paste"].forEach(e=>{document.addEventListener(e,Object(Bt["debounce"])(t=>{const s=t.path||t.composedPath&&t.composedPath();for(let e=0;e<s.length;e++)if(s[e].className&&"string"===typeof s[e].className&&(s[e].className.includes("el-message-box")||s[e].className.includes("ignore-key-press")))return;null!==i?this.ieClipboardEvent(e,i):(this.standardClipboardEvent(e,t),(!document.activeElement||document.activeElement&&-1===["textarea","text","email","password"].indexOf(document.activeElement.type))&&(this.focusHiddenArea(o),t.preventDefault()))},1e3,{leading:!0}))})},methods:{receivedCopyPasteData(e,t){},standardClipboardEvent(e,t){const s=t.clipboardData;if(null!==s&&"paste"===e){const e=s.getData("text/plain");this.receivedCopyPasteData(e,t)}},ieClipboardEvent(e,t){const s=window.clipboardData;if("paste"===e){const e=s.getData("Text");t.empty(),this.receivedCopyPasteData(e)}},focusIeClipboardDiv(e){e.focus();const t=document.createRange();t.selectNodeContents(e.get(0));const s=window.getSelection();null!==s&&(s.removeAllRanges(),s.addRange(t))},focusHiddenArea(e){e.value=" ",e.focus(),e.select()},copyToClipboard(e){const t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);const s=document.getSelection();if(null===s)return;const o=s.rangeCount>0&&s.getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),o&&(s.removeAllRanges(),s.addRange(o))}}});var Ut=s("e105"),zt=s("89e8"),Ht=Object(y["a"])(Ft,k["a"],x["a"],me["a"],C["a"]).extend({name:"CredentialsInput",props:["credentialTypeData","credentialData","nodesInit"],components:{ParameterInput:zt["a"]},data(){return{basePath:this.$store.getters.getBaseUrl,isMinimized:!0,helpTexts:{credentialsData:"The credentials to set.",credentialsName:"A recognizable label for the credentials. Descriptive names work <br />best here, so you can easily select it from a list later.",nodesWithAccess:"Nodes with access to these credentials."},credentialDataTemp:null,nodesAccess:[],name:"",propertyValue:{}}},computed:{allNodesRequestingAccess(){const e=[],t=this.$store.getters.allNodeTypes;let s,o;for(s of t)if(s.credentials)for(o of s.credentials)if(o.name===this.credentialTypeData.name&&!e.includes(o.name)){e.push(s.name);break}return e.map(e=>({key:e,label:this.$store.getters.nodeType(e).displayName}))},credentialProperties(){return this.credentialTypeData.properties.filter(e=>!!this.displayCredentialParameter(e)&&(!this.credentialTypeData.__overwrittenProperties||!this.credentialTypeData.__overwrittenProperties.includes(e.name)))},credentialDataDynamic(){return this.credentialData?this.credentialData:this.credentialDataTemp},isGoogleOAuthType(){if("googleOAuth2Api"===this.credentialTypeData.name)return!0;const e=this.parentTypes(this.credentialTypeData.name);return e.includes("googleOAuth2Api")},isOAuthType(){if(["oAuth1Api","oAuth2Api"].includes(this.credentialTypeData.name))return!0;const e=this.parentTypes(this.credentialTypeData.name);return e.includes("oAuth1Api")||e.includes("oAuth2Api")},isOAuthConnected(){return!1!==this.isOAuthType&&(null!==this.credentialDataDynamic&&!!this.credentialDataDynamic.data.oauthTokenData)},oAuthCallbackUrl(){const e=this.parentTypes(this.credentialTypeData.name),t="oAuth2Api"===this.credentialTypeData.name||e.includes("oAuth2Api")?"oauth2":"oauth1";return this.$store.getters.oauthCallbackUrls[t]},requiredPropertiesFilled(){for(const e of this.credentialProperties)if(!0===e.required&&!this.propertyValue[e.name])return!1;return!0}},methods:{copyCallbackUrl(){this.copyToClipboard(this.oAuthCallbackUrl),this.$showMessage({title:"Copied",message:"Callback URL was successfully copied!",type:"success"})},parentTypes(e){const t=this.$store.getters.credentialType(e);if(void 0===t||void 0===t.extends)return[];const s=[];for(const o of t.extends)s.push(o),s.push.apply(s,this.parentTypes(o));return s},valueChanged(e){const t=e.name.split(".").pop(),s=JSON.parse(JSON.stringify(this.propertyValue));s[t]=e.value,o["default"].set(this,"propertyValue",s)},displayCredentialParameter(e){return"hidden"!==e.type&&(void 0===e.displayOptions||this.displayParameter(this.propertyValue,e,""))},async createCredentials(e){const t=this.nodesAccess.map(e=>({nodeType:e})),s={name:this.name,type:this.credentialTypeData.name,nodesAccess:t,data:Ut["NodeHelpers"].getNodeParameters(this.credentialTypeData.properties,this.propertyValue,!1,!1)};let o;try{o=await this.restApi().createNewCredentials(s)}catch(i){return this.$showError(i,"Problem Creating Credentials","There was a problem creating the credentials:"),null}return this.$store.commit("addCredentials",o),this.$emit("credentialsCreated",{data:o,options:{closeDialog:e}}),this.$externalHooks().run("credentials.create",{credentialTypeData:this.credentialTypeData}),o},async oAuthCredentialAuthorize(){let e,t=this.credentialDataDynamic,s=!1;if(t){if(t=await this.updateCredentials(!1),null===t)return}else{if(t=await this.createCredentials(!1),s=!0,null===t)return;o["default"].set(this,"credentialDataTemp",t)}const i=this.parentTypes(this.credentialTypeData.name);try{"oAuth2Api"===this.credentialTypeData.name||i.includes("oAuth2Api")?e=await this.restApi().oAuth2CredentialAuthorize(t):("oAuth1Api"===this.credentialTypeData.name||i.includes("oAuth1Api"))&&(e=await this.restApi().oAuth1CredentialAuthorize(t))}catch(l){return void this.$showError(l,"OAuth Authorization Error","Error generating authorization URL:")}const a="scrollbars=no,resizable=yes,status=no,titlebar=noe,location=no,toolbar=no,menubar=no,width=500,height=700",n=window.open(e,"OAuth2 Authorization",a),r=e=>{"success"===e.data&&(null===this.credentialData?(o["default"].set(this,"credentialDataTemp",t),o["default"].set(this.credentialDataTemp.data,"oauthTokenData",{})):o["default"].set(this.credentialData.data,"oauthTokenData",{}),this.$store.commit("updateCredentials",this.credentialDataDynamic),n&&n.close(),!0===s&&this.$emit("credentialsCreated",{data:t,options:{closeDialog:!1}}),this.$showMessage({title:"Connected",message:"Connected successfully!",type:"success"}),window.removeEventListener("message",r,!1))};window.addEventListener("message",r,!1)},async updateCredentials(e){const t=[],s=[];let o;for(o of this.credentialDataDynamic.nodesAccess)this.nodesAccess.includes(o.nodeType)&&(t.push(o),s.push(o.nodeType));for(const r of this.nodesAccess)s.includes(r)||t.push({nodeType:r});const i={name:this.name,type:this.credentialTypeData.name,nodesAccess:t,data:Ut["NodeHelpers"].getNodeParameters(this.credentialTypeData.properties,this.propertyValue,!1,!1)};let a;try{a=await this.restApi().updateCredentials(this.credentialDataDynamic.id,i)}catch(n){return this.$showError(n,"Problem Updating Credentials","There was a problem updating the credentials:"),null}return this.$store.commit("updateCredentials",a),this.updateNodesCredentialsIssues(),this.$emit("credentialsUpdated",{data:a,options:{closeDialog:e}}),a},init(){if(this.credentialData){this.name=this.credentialData.name,this.propertyValue=this.credentialData.data;const e=this.credentialData.nodesAccess.map(e=>e.nodeType);o["default"].set(this,"nodesAccess",e)}else{this.name="",this.propertyValue={};const e=[];e.push.apply(e,this.nodesInit),o["default"].set(this,"nodesAccess",e)}for(const e of this.credentialTypeData.properties)this.propertyValue.hasOwnProperty(e.name)||(this.propertyValue[e.name]=e.default)}},watch:{credentialData(){this.init()},credentialTypeData(){this.init()}},mounted(){this.init()}}),qt=Ht,Jt=(s("f427"),Object(h["a"])(qt,Rt,jt,!1,null,null,null)),Kt=Jt.exports,Gt=Object(y["a"])(me["a"],C["a"],k["a"]).extend({name:"CredentialsEdit",props:["dialogVisible","editCredentials","setCredentialType","nodesInit"],components:{CredentialsInput:Kt},data(){return{credentialData:null,credentialType:null}},computed:{credentialTypes(){const e=this.$store.getters.allCredentialTypes;return null===e?[]:e},title(){if(this.editCredentials){const e=this.$store.getters.credentialType(this.editCredentials.type);return`Edit Credentials: "${e.displayName}"`}if(this.credentialType){const e=this.$store.getters.credentialType(this.credentialType);return`Create New Credentials: "${e.displayName}"`}return"Create New Credentials"},documentationUrl(){let e="";e=this.editCredentials?this.editCredentials.type:this.credentialType;const t=this.$store.getters.credentialType(e);if(void 0!==t.documentationUrl)return t.documentationUrl.startsWith("http")?t.documentationUrl:"https://docs.n8n.io/credentials/"+t.documentationUrl+"/?utm_source=n8n_app&utm_medium=left_nav_menu&utm_campaign=create_new_credentials_modal"},node(){return this.$store.getters.activeNode},nodeType(){this.node;return this.node?this.$store.getters.nodeType(this.node.type):null}},watch:{async dialogVisible(e,t){if(e){if(this.editCredentials){const e=this.$store.getters.credentialType(this.editCredentials.type);if(null===e)return this.$showMessage({title:"Credential type not known",message:`Credentials of type "${this.editCredentials.type}" are not known.`,type:"error",duration:0}),void this.closeDialog();if(void 0===this.editCredentials.id)return this.$showMessage({title:"Credential ID missing",message:"The ID of the credentials which should be edited is missing!",type:"error"}),void this.closeDialog();let t;try{t=await this.restApi().getCredentials(this.editCredentials.id,!0)}catch(s){return this.$showError(s,"Problem loading credentials","There was a problem loading the credentials:"),void this.closeDialog()}if(void 0===t)return this.$showMessage({title:"Credentials not found",message:"Could not find the credentials with the id: "+this.editCredentials.id,type:"error",duration:0}),void this.closeDialog();if(void 0===t)return void this.$showMessage({title:"Problem loading credentials",message:"No credentials could be loaded!",type:"error"});this.credentialData=t}else{if(o["default"].nextTick(()=>{this.$refs.credentialsDropdown.focus()}),this.credentialType||this.setCredentialType){const e=this.$store.getters.credentialType(this.credentialType||this.setCredentialType);if(null===e)return this.$showMessage({title:"Credential type not known",message:`Credentials of type "${this.credentialType||this.setCredentialType}" are not known.`,type:"error",duration:0}),void this.closeDialog()}this.credentialData=null}(this.setCredentialType||this.credentialData&&this.credentialData.type)&&(this.credentialType=this.setCredentialType||this.credentialData&&this.credentialData.type)}else this.credentialType=null},async credentialType(e,t){this.$externalHooks().run("credentialsEdit.credentialTypeChanged",{newValue:e,oldValue:t,editCredentials:!!this.editCredentials,credentialType:this.credentialType,setCredentialType:this.setCredentialType})}},methods:{getCredentialProperties(e){const t=this.$store.getters.credentialType(e);if(null===t)throw new Error("Could not find credentials of type: "+e);if(void 0===t.extends)return t.properties;const s=[];for(const o of t.extends){const e=this.getCredentialProperties(o);Ut["NodeHelpers"].mergeNodeProperties(s,e)}return Ut["NodeHelpers"].mergeNodeProperties(s,t.properties),s},getCredentialTypeData(e){let t=this.$store.getters.credentialType(e);return null===t||void 0===t.extends||(t=JSON.parse(JSON.stringify(t)),t.properties=this.getCredentialProperties(t.name)),t},credentialsCreated(e){this.$emit("credentialsCreated",e),this.$showMessage({title:"Credentials created",message:`"${e.data.name}" credentials were successfully created!`,type:"success"}),!0===e.options.closeDialog&&this.closeDialog()},credentialsUpdated(e){this.$emit("credentialsUpdated",e),this.$showMessage({title:"Credentials updated",message:`"${e.data.name}" credentials were successfully updated!`,type:"success"}),!0===e.options.closeDialog&&this.closeDialog()},closeDialog(){this.$emit("closeDialog")}}}),Yt=Gt,Xt=(s("52f2"),Object(h["a"])(Yt,Mt,Lt,!1,null,null,null)),Zt=Xt.exports,Qt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.dialogVisible?s("div",[s("credentials-edit",{attrs:{dialogVisible:e.credentialEditDialogVisible,setCredentialType:e.editCredentials&&e.editCredentials.type,editCredentials:e.editCredentials},on:{closeDialog:e.closeCredentialEditDialog,credentialsUpdated:e.reloadCredentialList,credentialsCreated:e.reloadCredentialList}}),s("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":"",width:"80%",title:"Credentials","before-close":e.closeDialog}},[s("div",{staticClass:"text-very-light"},[e._v("\n\t\t\tYour saved credentials:\n\t\t")]),s("el-button",{staticClass:"new-credentials-button",attrs:{title:"Create New Credentials"},on:{click:function(t){return e.createCredential()}}},[s("font-awesome-icon",{attrs:{icon:"plus"}}),s("div",{staticClass:"next-icon-text"},[e._v("\n\t\t\t\tAdd New\n\t\t\t")])],1),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isDataLoading,expression:"isDataLoading"}],attrs:{data:e.credentials,"default-sort":{prop:"name",order:"ascending"},stripe:"","max-height":"450"},on:{"row-click":e.editCredential}},[s("el-table-column",{attrs:{property:"name",label:"Name","class-name":"clickable",sortable:""}}),s("el-table-column",{attrs:{property:"type",label:"Type","class-name":"clickable",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s(e.credentialTypeDisplayNames[t.row.type])+"\n\t\t\t\t")]}}],null,!1,3674899926)}),s("el-table-column",{attrs:{property:"createdAt",label:"Created","class-name":"clickable",sortable:""}}),s("el-table-column",{attrs:{property:"updatedAt",label:"Updated","class-name":"clickable",sortable:""}}),s("el-table-column",{attrs:{label:"Operations",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{title:"Edit Credentials",icon:"el-icon-edit",circle:""},on:{click:function(s){return s.stopPropagation(),e.editCredential(t.row)}}}),s("el-button",{attrs:{title:"Delete Credentials",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(s){return s.stopPropagation(),e.deleteCredential(t.row)}}})]}}],null,!1,2350281508)})],1)],1)],1):e._e()},es=[],ts=Object(y["a"])(k["a"],he["a"],x["a"],me["a"],C["a"]).extend({name:"CredentialsList",props:["dialogVisible"],components:{CredentialsEdit:Zt},data(){return{credentialEditDialogVisible:!1,credentialTypeDisplayNames:{},credentials:[],displayAddCredentials:!1,editCredentials:null,isDataLoading:!1}},watch:{dialogVisible(e){e&&(this.loadCredentials(),this.loadCredentialTypes()),this.$externalHooks().run("credentialsList.dialogVisibleChanged",{dialogVisible:e})}},methods:{closeCredentialEditDialog(){this.credentialEditDialogVisible=!1},closeDialog(){return this.$emit("closeDialog"),!1},createCredential(){this.editCredentials=null,this.credentialEditDialogVisible=!0},editCredential(e){const t={id:e.id,name:e.name,type:e.type};this.editCredentials=t,this.credentialEditDialogVisible=!0},reloadCredentialList(){this.loadCredentials()},loadCredentialTypes(){if(0===Object.keys(this.credentialTypeDisplayNames).length&&null!==this.$store.getters.allCredentialTypes)for(const e of this.$store.getters.allCredentialTypes)this.credentialTypeDisplayNames[e.name]=e.displayName},loadCredentials(){this.isDataLoading=!0;try{this.credentials=JSON.parse(JSON.stringify(this.$store.getters.allCredentials))}catch(e){return this.$showError(e,"Problem loading credentials","There was a problem loading the credentials:"),void(this.isDataLoading=!1)}this.credentials.forEach(e=>{e.createdAt=this.convertToDisplayDate(e.createdAt),e.updatedAt=this.convertToDisplayDate(e.updatedAt)}),this.isDataLoading=!1},async deleteCredential(e){const t=await this.confirmMessage(`Are you sure you want to delete "${e.name}" credentials?`,"Delete Credentials?","warning","Yes, delete!");if(!1!==t){try{await this.restApi().deleteCredentials(e.id)}catch(s){return void this.$showError(s,"Problem deleting credentials","There was a problem deleting the credentials:")}this.$store.commit("removeCredentials",e),this.updateNodesCredentialsIssues(),this.$showMessage({title:"Credentials deleted",message:`The credential "${e.name}" got deleted!`,type:"success"}),this.loadCredentials()}}}}),ss=ts,os=(s("19d7"),Object(h["a"])(ss,Qt,es,!1,null,null,null)),is=os.exports,as=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":"",width:"80%",title:"Workflow Executions ("+e.combinedExecutions.length+"/"+e.combinedExecutionsCount+")","before-close":e.closeDialog}},[s("div",{staticClass:"filters"},[s("el-row",[s("el-col",{staticClass:"filter-headline",attrs:{span:4}},[e._v("\n\t\t\t\t\tFilters:\n\t\t\t\t")]),s("el-col",{attrs:{span:6}},[s("el-select",{attrs:{placeholder:"Select Workflow",size:"small",filterable:""},on:{change:e.handleFilterChanged},model:{value:e.filter.workflowId,callback:function(t){e.$set(e.filter,"workflowId",t)},expression:"filter.workflowId"}},e._l(e.workflows,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),s("el-col",{attrs:{span:2}},[e._v(" \n\t\t\t\t")]),s("el-col",{attrs:{span:4}},[s("el-select",{attrs:{placeholder:"Select Status",size:"small",filterable:""},on:{change:e.handleFilterChanged},model:{value:e.filter.status,callback:function(t){e.$set(e.filter,"status",t)},expression:"filter.status"}},e._l(e.statuses,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),s("el-col",{attrs:{span:4}},[e._v(" \n\t\t\t\t")]),s("el-col",{staticClass:"autorefresh",attrs:{span:4}},[s("el-checkbox",{on:{change:e.handleAutoRefreshToggle},model:{value:e.autoRefresh,callback:function(t){e.autoRefresh=t},expression:"autoRefresh"}},[e._v("Auto refresh")])],1)],1)],1),s("div",{staticClass:"selection-options"},[!0===e.checkAll||!0===e.isIndeterminate?s("span",[e._v("\n\t\t\t\tSelected: "+e._s(e.numSelected)+"/"+e._s(e.finishedExecutionsCount)+"\n\t\t\t\t"),s("el-button",{attrs:{type:"danger",title:"Delete Selected",icon:"el-icon-delete",size:"mini",circle:""},on:{click:e.handleDeleteSelected}})],1):e._e()]),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isDataLoading,expression:"isDataLoading"}],attrs:{data:e.combinedExecutions,stripe:"","row-class-name":e.getRowClass}},[s("el-table-column",{attrs:{label:"",width:"30"},scopedSlots:e._u([{key:"header",fn:function(t){return[s("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("Check all")])]}},{key:"default",fn:function(t){return[void 0!==t.row.stoppedAt&&t.row.id?s("el-checkbox",{attrs:{value:e.selectedItems[t.row.id.toString()]||e.checkAll},on:{change:function(s){return e.handleCheckboxChanged(t.row.id)}}},[e._v("Check all")]):e._e()]}}])}),s("el-table-column",{attrs:{property:"startedAt",label:"Started At / ID",width:"205"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s(e.convertToDisplayDate(t.row.startedAt))),s("br"),t.row.id?s("small",[e._v("ID: "+e._s(t.row.id))]):e._e()]}}])}),s("el-table-column",{attrs:{property:"workflowName",label:"Name"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{staticClass:"workflow-name"},[e._v("\n\t\t\t\t\t\t"+e._s(t.row.workflowName||"[UNSAVED WORKFLOW]")+"\n\t\t\t\t\t")]),void 0===t.row.stoppedAt?s("span",[e._v("\n\t\t\t\t\t\t(running)\n\t\t\t\t\t")]):e._e(),void 0!==t.row.retryOf?s("span",[s("br"),s("small",[e._v('Retry of "'+e._s(t.row.retryOf)+'"')])]):void 0!==t.row.retrySuccessId?s("span",[s("br"),s("small",[e._v('Success retry "'+e._s(t.row.retrySuccessId)+'"')])]):e._e()]}}])}),s("el-table-column",{attrs:{label:"Status",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tooltip",{attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.statusTooltipText(t.row))},slot:"content"}),void 0===t.row.stoppedAt?s("span",{staticClass:"status-badge running"},[e._v("\n\t\t\t\t\t\t\tRunning\n\t\t\t\t\t\t")]):t.row.finished?s("span",{staticClass:"status-badge success"},[e._v("\n\t\t\t\t\t\t\tSuccess\n\t\t\t\t\t\t")]):null!==t.row.stoppedAt?s("span",{staticClass:"status-badge error"},[e._v("\n\t\t\t\t\t\t\tError\n\t\t\t\t\t\t")]):s("span",{staticClass:"status-badge warning"},[e._v("\n\t\t\t\t\t\t\tUnknown\n\t\t\t\t\t\t")])]),s("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleRetryClick}},[s("span",{staticClass:"el-dropdown-link"},[void 0===t.row.stoppedAt||t.row.finished||void 0!==t.row.retryOf||void 0!==t.row.retrySuccessId?e._e():s("el-button",{staticClass:"retry-button",class:{warning:null===t.row.stoppedAt},attrs:{circle:"",type:"text",size:"small",title:"Retry execution"}},[s("font-awesome-icon",{attrs:{icon:"redo"}})],1)],1),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:{command:"currentlySaved",row:t.row}}},[e._v("Retry with currently saved workflow")]),s("el-dropdown-item",{attrs:{command:{command:"original",row:t.row}}},[e._v("Retry with original workflow")])],1)],1)]}}])}),s("el-table-column",{attrs:{property:"mode",label:"Mode",width:"100",align:"center"}}),s("el-table-column",{attrs:{label:"Running Time",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[void 0===t.row.stoppedAt?s("span",[s("font-awesome-icon",{attrs:{icon:"spinner",spin:""}}),s("execution-time",{attrs:{"start-time":t.row.startedAt}})],1):null===t.row.stoppedAt?s("span",[e._v("\n\t\t\t\t\t\t--\n\t\t\t\t\t")]):s("span",[e._v("\n\t\t\t\t\t\t"+e._s(e.displayTimer(new Date(t.row.stoppedAt).getTime()-new Date(t.row.startedAt).getTime(),!0))+"\n\t\t\t\t\t")])]}}])}),s("el-table-column",{attrs:{label:"",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[void 0===t.row.stoppedAt?s("span",[s("el-button",{attrs:{circle:"",title:"Stop Execution",loading:e.stoppingExecutions.includes(t.row.id),size:"mini"},on:{click:function(s){return s.stopPropagation(),e.stopExecution(t.row.id)}}},[s("font-awesome-icon",{attrs:{icon:"stop"}})],1)],1):t.row.id?s("span",[s("el-button",{attrs:{circle:"",title:"Open Past Execution",size:"mini"},on:{click:function(s){return s.stopPropagation(),e.displayExecution(t.row)}}},[s("font-awesome-icon",{attrs:{icon:"folder-open"}})],1)],1):e._e()]}}])})],1),e.finishedExecutionsCount>e.finishedExecutions.length?s("div",{staticClass:"load-more"},[s("el-button",{attrs:{title:"Load More",size:"small",disabled:e.isDataLoading},on:{click:function(t){return e.loadMore()}}},[s("font-awesome-icon",{attrs:{icon:"sync"}}),e._v(" Load More\n\t\t\t")],1)],1):e._e()],1)],1)},ns=[],rs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[e._v("\n\t"+e._s(e.time)+"\n")])},ls=[],cs=Object(y["a"])(he["a"]).extend({name:"ExecutionTime",props:["startTime"],computed:{time(){if(!this.startTime)return"...";const e=this.nowTime-new Date(this.startTime).getTime();return this.displayTimer(e)}},data(){return{nowTime:-1,intervalTimer:null}},mounted(){this.setNow(),this.intervalTimer=setInterval(()=>{this.setNow()},1e3)},destroyed(){null!==this.intervalTimer&&clearInterval(this.intervalTimer)},methods:{setNow(){this.nowTime=(new Date).getTime()}}}),ds=cs,us=(s("26fe"),Object(h["a"])(ds,rs,ls,!1,null,null,null)),ps=us.exports,hs=Object(y["a"])(k["a"],he["a"],me["a"],C["a"]).extend({name:"ExecutionsList",props:["dialogVisible"],components:{ExecutionTime:ps,WorkflowActivator:ve},data(){return{finishedExecutions:[],finishedExecutionsCount:0,checkAll:!1,autoRefresh:!0,autoRefreshInterval:void 0,filter:{status:"ALL",workflowId:"ALL"},isDataLoading:!1,requestItemsPerRequest:10,selectedItems:{},stoppingExecutions:[],workflows:[],statuses:[{id:"ALL",name:"Any Status"},{id:"error",name:"Error"},{id:"running",name:"Running"},{id:"success",name:"Success"}]}},computed:{activeExecutions(){return this.$store.getters.getActiveExecutions},combinedExecutions(){const e=[];return["ALL","running"].includes(this.filter.status)&&e.push.apply(e,this.activeExecutions),["ALL","error","success"].includes(this.filter.status)&&e.push.apply(e,this.finishedExecutions),e},combinedExecutionsCount(){return this.activeExecutions.length+this.finishedExecutionsCount},numSelected(){return!0===this.checkAll?this.finishedExecutionsCount:Object.keys(this.selectedItems).length},isIndeterminate(){return!0!==this.checkAll&&this.numSelected>0},workflowFilterCurrent(){const e={};return"ALL"!==this.filter.workflowId&&(e.workflowId=this.filter.workflowId),e},workflowFilterPast(){const e={};return"ALL"!==this.filter.workflowId&&(e.workflowId=this.filter.workflowId),["error","success"].includes(this.filter.status)&&(e.finished="success"===this.filter.status),e}},watch:{dialogVisible(e,t){e&&this.openDialog()}},methods:{closeDialog(){return this.$emit("closeDialog"),this.autoRefreshInterval&&(clearInterval(this.autoRefreshInterval),this.autoRefreshInterval=void 0),!1},displayExecution(e){this.$router.push({name:"ExecutionById",params:{id:e.id}}),this.closeDialog()},handleAutoRefreshToggle(){this.autoRefreshInterval&&(clearInterval(this.autoRefreshInterval),this.autoRefreshInterval=void 0),this.autoRefresh&&(this.autoRefreshInterval=setInterval(this.loadAutoRefresh,4e3))},handleCheckAllChange(){!1===this.checkAll&&o["default"].set(this,"selectedItems",{})},handleCheckboxChanged(e){this.selectedItems[e]?o["default"].delete(this.selectedItems,e):o["default"].set(this.selectedItems,e,!0)},async handleDeleteSelected(){const e=await this.confirmMessage(`Are you sure that you want to delete the ${this.numSelected} selected executions?`,"Delete Executions?","warning","Yes, delete!");if(!1===e)return;this.isDataLoading=!0;const t={};!0===this.checkAll?t.deleteBefore=this.finishedExecutions[0].startedAt:t.ids=Object.keys(this.selectedItems),t.filters=this.workflowFilterPast;try{await this.restApi().deleteExecutions(t)}catch(s){return this.isDataLoading=!1,void this.$showError(s,"Problem deleting executions","There was a problem deleting the executions:")}this.isDataLoading=!1,this.$showMessage({title:"Execution deleted",message:"The executions got deleted!",type:"success"}),o["default"].set(this,"selectedItems",{}),this.checkAll=!1,this.refreshData()},handleFilterChanged(){this.refreshData()},handleRetryClick(e){let t=!1;"currentlySaved"===e.command&&(t=!0),this.retryExecution(e.row,t)},getRowClass(e){const t=[];return void 0===e.row.stoppedAt&&t.push("currently-running"),t.join(" ")},getWorkflowName(e){const t=this.workflows.find(t=>t.id===e);if(void 0!==t)return t.name},async loadActiveExecutions(){const e=await this.restApi().getCurrentExecutions(this.workflowFilterCurrent);for(const t of e)void 0!==t.workflowId&&void 0===t.workflowName&&(t.workflowName=this.getWorkflowName(t.workflowId));this.$store.commit("setActiveExecutions",e)},async loadAutoRefresh(){const e=this.workflowFilterPast,t=this.restApi().getPastExecutions(e,30),s=this.restApi().getCurrentExecutions({}),o=await Promise.all([t,s]);for(const r of o[1])void 0!==r.workflowId&&void 0===r.workflowName&&(r.workflowName=this.getWorkflowName(r.workflowId));this.$store.commit("setActiveExecutions",o[1]);const i=this.finishedExecutions.map(e=>parseInt(e.id,10));let a=0;const n=[];for(let r=o[0].results.length-1;r>=0;r--){const e=o[0].results[r],t=parseInt(e.id,10);if(0!==a&&!1===isNaN(t)&&t-a>1){const e=Object(Bt["range"])(a+1,t);n.push(...e)}a=parseInt(e.id,10)||0;const s=i.indexOf(t);if(-1!==s){!1===this.finishedExecutions[s].finished&&!0===e.finished&&(this.finishedExecutions[s]=e);continue}let l;for(l=this.finishedExecutions.length-1;l>=0;l--)if(t<parseInt(this.finishedExecutions[l].id,10)){this.finishedExecutions.splice(l+1,0,e);break}-1===l&&this.finishedExecutions.unshift(e)}this.finishedExecutions=this.finishedExecutions.filter(e=>!n.includes(parseInt(e.id,10))&&a>=parseInt(e.id,10)),this.finishedExecutionsCount=o[0].count},async loadFinishedExecutions(){if("running"===this.filter.status)return this.finishedExecutions=[],void(this.finishedExecutionsCount=0);const e=await this.restApi().getPastExecutions(this.workflowFilterPast,this.requestItemsPerRequest);this.finishedExecutions=e.results,this.finishedExecutionsCount=e.count},async loadMore(){if("running"===this.filter.status)return;this.isDataLoading=!0;const e=this.workflowFilterPast;let t,s;if(0!==this.finishedExecutions.length){const e=this.finishedExecutions.slice(-1)[0];t=e.id}try{s=await this.restApi().getPastExecutions(e,this.requestItemsPerRequest,t)}catch(o){return this.isDataLoading=!1,void this.$showError(o,"Problem loading workflows","There was a problem loading the workflows:")}this.finishedExecutions.push.apply(this.finishedExecutions,s.results),this.finishedExecutionsCount=s.count,this.isDataLoading=!1},async loadWorkflows(){try{const e=await this.restApi().getWorkflows();e.sort((e,t)=>e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0),e.unshift({id:"ALL",name:"All Workflows"}),o["default"].set(this,"workflows",e)}catch(e){this.$showError(e,"Problem loading workflows","There was a problem loading the workflows:")}},async openDialog(){o["default"].set(this,"selectedItems",{}),this.filter.workflowId="ALL",this.checkAll=!1,await this.loadWorkflows(),await this.refreshData(),this.handleAutoRefreshToggle(),this.$externalHooks().run("executionsList.openDialog")},async retryExecution(e,t){this.isDataLoading=!0;try{const s=await this.restApi().retryExecution(e.id,t);!0===s?this.$showMessage({title:"Retry successful",message:"The retry was successful!",type:"success"}):this.$showMessage({title:"Retry unsuccessful",message:"The retry was not successful!",type:"error"}),this.isDataLoading=!1}catch(s){this.$showError(s,"Problem with retry","There was a problem with the retry:"),this.isDataLoading=!1}},async refreshData(){this.isDataLoading=!0;try{const e=this.loadActiveExecutions(),t=this.loadFinishedExecutions();await Promise.all([e,t])}catch(e){this.$showError(e,"Problem loading","There was a problem loading the data:")}this.isDataLoading=!1},statusTooltipText(e){return void 0===e.stoppedAt?"The worklow is currently executing.":!0===e.finished&&void 0!==e.retryOf?`The workflow execution was a retry of "${e.retryOf}" and it was successful.`:!0===e.finished?"The worklow execution was successful.":void 0!==e.retryOf?`The workflow execution was a retry of "${e.retryOf}" and failed.<br />New retries have to be started from the original execution.`:void 0!==e.retrySuccessId?`The workflow execution failed but the retry "${e.retrySuccessId}" was successful.`:null===e.stoppedAt?"The workflow execution is probably still running but it may have crashed and n8n cannot safely tell. ":"The workflow execution failed."},async stopExecution(e){try{this.stoppingExecutions.push(e);await this.restApi().stopCurrentExecution(e);const t=this.stoppingExecutions.indexOf(e);this.stoppingExecutions.splice(t,1),this.$showMessage({title:"Execution stopped",message:`The execution with the id "${e}" got stopped!`,type:"success"}),this.refreshData()}catch(t){this.$showError(t,"Problem stopping execution","There was a problem stopping the execuction:")}}}}),ms=hs,fs=(s("18a9"),s("53f5"),Object(h["a"])(ms,as,ns,!1,null,"4c3a53f2",null)),gs=fs.exports,ws=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("el-dialog",{staticClass:"workflow-settings",attrs:{visible:e.dialogVisible,"append-to-body":"",width:"65%",title:"Workflow Settings","before-close":e.closeDialog}},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}]},[s("el-row",[s("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v("\n\t\t\t\t\tError Workflow:\n\t\t\t\t\t"),s("el-tooltip",{staticClass:"setting-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.helpTexts.errorWorkflow)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),s("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[s("el-select",{attrs:{placeholder:"Select Workflow",size:"small",filterable:""},model:{value:e.workflowSettings.errorWorkflow,callback:function(t){e.$set(e.workflowSettings,"errorWorkflow",t)},expression:"workflowSettings.errorWorkflow"}},e._l(e.workflows,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),s("el-row",[s("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v("\n\t\t\t\t\tTimezone:\n\t\t\t\t\t"),s("el-tooltip",{staticClass:"setting-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.helpTexts.timezone)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),s("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[s("el-select",{attrs:{placeholder:"Select Timezone",size:"small",filterable:""},model:{value:e.workflowSettings.timezone,callback:function(t){e.$set(e.workflowSettings,"timezone",t)},expression:"workflowSettings.timezone"}},e._l(e.timezones,(function(e){return s("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1)],1),s("el-row",[s("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v("\n\t\t\t\t\tSave Data Error Execution:\n\t\t\t\t\t"),s("el-tooltip",{staticClass:"setting-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.helpTexts.saveDataErrorExecution)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),s("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[s("el-select",{attrs:{placeholder:"Select Option",size:"small",filterable:""},model:{value:e.workflowSettings.saveDataErrorExecution,callback:function(t){e.$set(e.workflowSettings,"saveDataErrorExecution",t)},expression:"workflowSettings.saveDataErrorExecution"}},e._l(e.saveDataErrorExecutionOptions,(function(e){return s("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1)],1),s("el-row",[s("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v("\n\t\t\t\t\tSave Data Success Execution:\n\t\t\t\t\t"),s("el-tooltip",{staticClass:"setting-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.helpTexts.saveDataSuccessExecution)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),s("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[s("el-select",{attrs:{placeholder:"Select Option",size:"small",filterable:""},model:{value:e.workflowSettings.saveDataSuccessExecution,callback:function(t){e.$set(e.workflowSettings,"saveDataSuccessExecution",t)},expression:"workflowSettings.saveDataSuccessExecution"}},e._l(e.saveDataSuccessExecutionOptions,(function(e){return s("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1)],1),s("el-row",[s("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v("\n\t\t\t\t\tSave Manual Executions:\n\t\t\t\t\t"),s("el-tooltip",{staticClass:"setting-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.helpTexts.saveManualExecutions)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),s("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[s("el-select",{attrs:{placeholder:"Select Option",size:"small",filterable:""},model:{value:e.workflowSettings.saveManualExecutions,callback:function(t){e.$set(e.workflowSettings,"saveManualExecutions",t)},expression:"workflowSettings.saveManualExecutions"}},e._l(e.saveManualOptions,(function(e){return s("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1)],1),s("el-row",[s("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v("\n\t\t\t\t\tSave Execution Progress:\n\t\t\t\t\t"),s("el-tooltip",{staticClass:"setting-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.helpTexts.saveExecutionProgress)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),s("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[s("el-select",{attrs:{placeholder:"Select Option",size:"small",filterable:""},model:{value:e.workflowSettings.saveExecutionProgress,callback:function(t){e.$set(e.workflowSettings,"saveExecutionProgress",t)},expression:"workflowSettings.saveExecutionProgress"}},e._l(e.saveExecutionProgressOptions,(function(e){return s("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1)],1),s("el-row",[s("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v("\n\t\t\t\t\tTimeout Workflow:\n\t\t\t\t\t"),s("el-tooltip",{staticClass:"setting-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.helpTexts.executionTimeoutToggle)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),s("el-col",{attrs:{span:14}},[s("div",[s("el-switch",{ref:"inputField",attrs:{value:e.workflowSettings.executionTimeout>-1,"active-color":"#13ce66"},on:{change:e.toggleTimeout}}),s("div",{staticClass:"expression-info clickable",on:{click:function(t){e.expressionEditDialogVisible=!0}}},[e._v("Edit Expression")])],1)])],1),e.workflowSettings.executionTimeout>-1?s("div",[s("el-row",[s("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v("\n\t\t\t\t\t\tTimeout After:\n\t\t\t\t\t\t"),s("el-tooltip",{staticClass:"setting-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.helpTexts.executionTimeout)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),s("el-col",{attrs:{span:4}},[s("el-input-number",{staticClass:"el-input_inner",attrs:{size:"small",min:0,placeholder:"hours",type:"number"},model:{value:e.timeoutHMS.hours,callback:function(t){e.$set(e.timeoutHMS,"hours",t)},expression:"timeoutHMS.hours"}}),s("br"),s("div",{staticClass:"timeout-setting-name"},[e._v("hours")])],1),s("el-col",{attrs:{span:4}},[s("el-input-number",{staticClass:"el-input_inner",attrs:{size:"small",min:0,placeholder:"minutes",type:"number"},model:{value:e.timeoutHMS.minutes,callback:function(t){e.$set(e.timeoutHMS,"minutes",t)},expression:"timeoutHMS.minutes"}}),s("br"),s("div",{staticClass:"timeout-setting-name"},[e._v("minutes")])],1),s("el-col",{attrs:{span:4}},[s("el-input-number",{staticClass:"el-input_inner",attrs:{size:"small",min:0,placeholder:"seconds",type:"number"},model:{value:e.timeoutHMS.seconds,callback:function(t){e.$set(e.timeoutHMS,"seconds",t)},expression:"timeoutHMS.seconds"}}),s("br"),s("div",{staticClass:"timeout-setting-name"},[e._v("seconds")])],1)],1)],1):e._e(),s("div",{staticClass:"action-buttons"},[s("el-button",{attrs:{type:"success"},on:{click:e.saveSettings}},[e._v("\n\t\t\t\t\tSave\n\t\t\t\t")])],1)],1)])],1)},vs=[],ys=Object(y["a"])(k["a"],he["a"],me["a"],C["a"]).extend({name:"WorkflowSettings",props:["dialogVisible"],data(){return{isLoading:!0,helpTexts:{errorWorkflow:'The workflow to run in case the current one fails.<br />To function correctly that workflow has to contain an "Error Trigger" node!',timezone:'The timezone in which the workflow should run. Gets for example used by "Cron" node.',saveDataErrorExecution:"If data data of executions should be saved in case they failed.",saveDataSuccessExecution:"If data data of executions should be saved in case they succeed.",saveExecutionProgress:"If data should be saved after each node, allowing you to resume in case of errors from where it stopped. May increase latency.",saveManualExecutions:"If data data of executions should be saved when started manually from the editor.",executionTimeoutToggle:"Cancel workflow execution after defined time",executionTimeout:"After what time the workflow should timeout."},defaultValues:{timezone:"America/New_York",saveDataErrorExecution:"all",saveDataSuccessExecution:"all",saveExecutionProgress:!1,saveManualExecutions:!1},saveDataErrorExecutionOptions:[],saveDataSuccessExecutionOptions:[],saveExecutionProgressOptions:[],saveManualOptions:[],timezones:[],workflowSettings:{},workflows:[],executionTimeout:this.$store.getters.executionTimeout,maxExecutionTimeout:this.$store.getters.maxExecutionTimeout,timeoutHMS:{hours:0,minutes:0,seconds:0}}},watch:{dialogVisible(e,t){e&&this.openDialog(),this.$externalHooks().run("workflowSettings.dialogVisibleChanged",{dialogVisible:e})}},methods:{closeDialog(){return this.$emit("closeDialog"),!1},async loadSaveDataErrorExecutionOptions(){this.saveDataErrorExecutionOptions.length=0,this.saveDataErrorExecutionOptions.push.apply(this.saveDataErrorExecutionOptions,[{key:"DEFAULT",value:"Default - "+("all"===this.defaultValues.saveDataErrorExecution?"Save":"Do not save")},{key:"all",value:"Save"},{key:"none",value:"Do not save"}])},async loadSaveDataSuccessExecutionOptions(){this.saveDataSuccessExecutionOptions.length=0,this.saveDataSuccessExecutionOptions.push.apply(this.saveDataSuccessExecutionOptions,[{key:"DEFAULT",value:"Default - "+("all"===this.defaultValues.saveDataSuccessExecution?"Save":"Do not save")},{key:"all",value:"Save"},{key:"none",value:"Do not save"}])},async loadSaveExecutionProgressOptions(){this.saveExecutionProgressOptions.length=0,this.saveExecutionProgressOptions.push.apply(this.saveExecutionProgressOptions,[{key:"DEFAULT",value:"Default - "+(!0===this.defaultValues.saveExecutionProgress?"Yes":"No")},{key:!0,value:"Yes"},{key:!1,value:"No"}])},async loadSaveManualOptions(){this.saveManualOptions.length=0,this.saveManualOptions.push({key:"DEFAULT",value:"Default - "+(!0===this.defaultValues.saveManualExecutions?"Yes":"No")}),this.saveManualOptions.push({key:!0,value:"Yes"}),this.saveManualOptions.push({key:!1,value:"No"})},async loadTimezones(){if(0!==this.timezones.length)return;const e=await this.restApi().getTimezones();let t=e[this.defaultValues.timezone];void 0===t&&(t="Default Timezone not valid!"),this.timezones.push({key:"DEFAULT",value:"Default - "+t});for(const s of Object.keys(e))this.timezones.push({key:s,value:e[s]})},async loadWorkflows(){const e=await this.restApi().getWorkflows();e.sort((e,t)=>e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0),e.unshift({id:void 0,name:"- No Workflow -"}),o["default"].set(this,"workflows",e)},async openDialog(){this.$route.params.name;if(void 0===this.$route.params.name)return this.$showMessage({title:"No workflow active",message:"No workflow active to display settings of.",type:"error",duration:0}),void this.closeDialog();this.defaultValues.saveDataErrorExecution=this.$store.getters.saveDataErrorExecution,this.defaultValues.saveDataSuccessExecution=this.$store.getters.saveDataSuccessExecution,this.defaultValues.saveManualExecutions=this.$store.getters.saveManualExecutions,this.defaultValues.timezone=this.$store.getters.timezone,this.isLoading=!0;const e=[];e.push(this.loadWorkflows()),e.push(this.loadSaveDataErrorExecutionOptions()),e.push(this.loadSaveDataSuccessExecutionOptions()),e.push(this.loadSaveExecutionProgressOptions()),e.push(this.loadSaveManualOptions()),e.push(this.loadTimezones());try{await Promise.all(e)}catch(s){this.$showError(s,"Problem loading settings","The following error occurred loading the data:")}const t=JSON.parse(JSON.stringify(this.$store.getters.workflowSettings));void 0===t.timezone&&(t.timezone="DEFAULT"),void 0===t.saveDataErrorExecution&&(t.saveDataErrorExecution="DEFAULT"),void 0===t.saveDataSuccessExecution&&(t.saveDataSuccessExecution="DEFAULT"),void 0===t.saveExecutionProgress&&(t.saveExecutionProgress="DEFAULT"),void 0===t.saveManualExecutions&&(t.saveManualExecutions="DEFAULT"),void 0===t.executionTimeout&&(t.executionTimeout=this.$store.getters.executionTimeout),void 0===t.maxExecutionTimeout&&(t.maxExecutionTimeout=this.$store.getters.maxExecutionTimeout),o["default"].set(this,"workflowSettings",t),this.timeoutHMS=this.convertToHMS(t.executionTimeout),this.isLoading=!1},async saveSettings(){const e={settings:this.workflowSettings},{hours:t,minutes:s,seconds:o}=this.timeoutHMS;if(e.settings.executionTimeout=-1!==e.settings.executionTimeout?3600*t+60*s+o:-1,0===e.settings.executionTimeout)return void this.$showError(new Error("timeout is activated but set to 0"),"Problem saving settings","There was a problem saving the settings:");if(e.settings.executionTimeout>this.workflowSettings.maxExecutionTimeout){const{hours:e,minutes:t,seconds:s}=this.convertToHMS(this.workflowSettings.maxExecutionTimeout);return void this.$showError(new Error(`Maximum Timeout is: ${e} hours, ${t} minutes, ${s} seconds`),"Problem saving settings","Set timeout is exceeding the maximum timeout!")}delete e.settings.maxExecutionTimeout,this.isLoading=!0;try{await this.restApi().updateWorkflow(this.$route.params.name,e)}catch(n){return this.$showError(n,"Problem saving settings","There was a problem saving the settings:"),void(this.isLoading=!1)}const i={};for(const r of Object.keys(this.workflowSettings))"DEFAULT"!==this.workflowSettings[r]&&(i[r]=this.workflowSettings[r]);const a=JSON.parse(JSON.stringify(this.$store.getters.workflowSettings));this.$store.commit("setWorkflowSettings",i),this.isLoading=!1,this.$showMessage({title:"Settings saved",message:"The workflow settings got saved!",type:"success"}),this.closeDialog(),this.$externalHooks().run("workflowSettings.saveSettings",{oldSettings:a})},toggleTimeout(){this.workflowSettings.executionTimeout=-1===this.workflowSettings.executionTimeout?0:-1},convertToHMS(e){if(e>0){let t;const s=Math.floor(e/3600);t=e%3600;const o=Math.floor(t/60),i=t%60;return{hours:s,minutes:o,seconds:i}}return{hours:0,minutes:0,seconds:0}}}}),bs=ys,ks=(s("f039"),Object(h["a"])(bs,ws,vs,!1,null,"b8385816",null)),xs=ks.exports;const Cs=Object(y["a"])(k["a"],me["a"],N["a"],$).extend({methods:{async runWorkflowApi(e){if(!1===this.$store.getters.pushConnectionActive)throw new Error("No active connection to server. It is maybe down.");let t;this.$store.commit("addActiveAction","workflowRunning");try{t=await this.restApi().runWorkflow(e)}catch(s){throw this.$store.commit("removeActiveAction","workflowRunning"),s}return void 0!==t.executionId&&this.$store.commit("setActiveExecutionId",t.executionId),!0===t.waitingForWebhook&&this.$store.commit("setExecutionWaitingForWebhook",!0),t},async runWorkflow(e,t){if(!0===this.$store.getters.isActionActive("workflowRunning"))return;const s=this.getWorkflow();this.$titleSet(s.name,"EXECUTING");try{const o=this.$store.getters.nodesIssuesExist;if(!0===o){const t=this.checkReadyForExecution(s);if(null!==t){const o=[];let i;for(const e of Object.keys(t)){i=Ut["NodeHelpers"].nodeIssuesToString(t[e]);for(const t of i)o.push(`${e}: ${t}`)}return this.$showMessage({title:"Workflow can not be executed",message:"The workflow has issues. Please fix them first:<br />&nbsp;&nbsp;- "+o.join("<br />&nbsp;&nbsp;- "),type:"error",duration:0}),this.$titleSet(s.name,"ERROR"),void this.$externalHooks().run("workflowRun.runError",{errorMessages:o,nodeName:e})}}const i=s.getParentNodes(e,"main",1),a=this.$store.getters.getWorkflowRunData;let n;const r=[];if(null!==a&&0!==Object.keys(a).length){n={};for(const e of i){const t=s.getParentNodes(e,"main");t.push(e);for(const e of t){if(void 0===a[e]||0===a[e].length){r.push(e);break}n[e]=a[e].slice(0,1)}}0===Object.keys(n).length&&(n=void 0)}0===r.length&&r.push(e);const l=await this.getWorkflowDataToSave(),c={workflowData:l,runData:n,startNodes:r};e&&(c.destinationNode=e);const d={id:"__IN_PROGRESS__",finished:!1,mode:"manual",startedAt:new Date,stoppedAt:void 0,workflowId:s.id,data:{resultData:{runData:n||{},startNodes:r,workflowData:l}},workflowData:{id:this.$store.getters.workflowId,name:l.name,active:l.active,createdAt:0,updatedAt:0,...l}};this.$store.commit("setWorkflowExecutionData",d);const u=await this.runWorkflowApi(c);return this.$externalHooks().run("workflowRun.runWorkflow",{nodeName:e,source:t}),u}catch(o){return this.$titleSet(s.name,"ERROR"),void this.$showError(o,"Problem running workflow","There was a problem running the workflow:")}}}});var $s=s("7ada"),Ns=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",e._l(e.items,(function(t){return s("el-menu-item",{key:t.id,attrs:{index:t.id},on:{click:function(s){return e.onClick(t)}}},[s("font-awesome-icon",{attrs:{icon:t.properties.icon}}),s("span",{class:{"item-title-root":e.root,"item-title":!e.root},attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.properties.title))])],1)})),1)},Es=[],Ts=o["default"].extend({name:"MenuItemsIterator",props:["items","root"],methods:{onClick(e){if(e&&"link"===e.type&&e.properties){const t=e.properties.href;if(!t)return;e.properties.newWindow?window.open(t):window.location.assign(e.properties.href)}}}}),Ds=Ts,_s=Object(h["a"])(Ds,Ns,Es,!1,null,null,null),Os=_s.exports;const Ss=[{id:"docs",type:"link",properties:{href:"https://docs.n8n.io",title:"Documentation",icon:"book",newWindow:!0}},{id:"forum",type:"link",properties:{href:"https://community.n8n.io",title:"Forum",icon:"users",newWindow:!0}},{id:"examples",type:"link",properties:{href:"https://n8n.io/workflows",title:"Workflows",icon:"network-wired",newWindow:!0}}];var Is=Object(y["a"])(he["a"],me["a"],C["a"],$,N["a"],Cs).extend({name:"MainHeader",components:{About:Wt,CredentialsEdit:Zt,CredentialsList:is,ExecutionsList:gs,WorkflowSettings:xs,MenuItemsIterator:Os},data(){return{aboutDialogVisible:!1,basePath:this.$store.getters.getBaseUrl,credentialNewDialogVisible:!1,credentialOpenDialogVisible:!1,executionsListDialogVisible:!1,stopExecutionInProgress:!1,workflowSettingsDialogVisible:!1,helpMenuItems:Ss}},computed:{...Object(b["b"])("ui",{isCollapsed:"sidebarMenuCollapsed"}),exeuctionId(){return this.$route.params.id},executionFinished(){if(!this.isExecutionPage)return!1;const e=this.$store.getters.getWorkflowExecution;return null!==e&&!0===e.finished},executionWaitingForWebhook(){return this.$store.getters.executionWaitingForWebhook},isExecutionPage(){return!!["ExecutionById"].includes(this.$route.name)},isWorkflowActive(){return this.$store.getters.isActive},currentWorkflow(){return this.$route.params.name},workflowExecution(){return this.$store.getters.getWorkflowExecution},workflowName(){return this.$store.getters.workflowName},workflowRunning(){return this.$store.getters.isActionActive("workflowRunning")},sidebarMenuTopItems(){return this.$store.getters.sidebarMenuItems.filter(e=>"top"===e.position)},sidebarMenuBottomItems(){return this.$store.getters.sidebarMenuItems.filter(e=>"bottom"===e.position)}},methods:{toggleCollapse(){this.$store.commit("ui/toggleSidebarMenuCollapse")},clearExecutionData(){this.$store.commit("setWorkflowExecutionData",null),this.updateNodesExecutionIssues()},closeAboutDialog(){this.aboutDialogVisible=!1},closeWorkflowSettingsDialog(){this.workflowSettingsDialogVisible=!1},closeExecutionsListOpenDialog(){this.executionsListDialogVisible=!1},closeCredentialOpenDialog(){this.credentialOpenDialogVisible=!1},closeCredentialNewDialog(){this.credentialNewDialogVisible=!1},openTagManager(){this.$store.dispatch("ui/openTagsManagerModal")},async stopExecution(){const e=this.$store.getters.activeExecutionId;if(null!==e){try{this.stopExecutionInProgress=!0;await this.restApi().stopCurrentExecution(e);this.$showMessage({title:"Execution stopped",message:`The execution with the id "${e}" got stopped!`,type:"success"})}catch(t){this.$showError(t,"Problem stopping execution","There was a problem stopping the execuction:")}this.stopExecutionInProgress=!1}},async openWorkflow(e){this.$router.push({name:"NodeViewExisting",params:{name:e}}),this.$store.commit("ui/closeTopModal")},async handleFileImport(){const e=new FileReader;e.onload=e=>{const t=e.target.result;let s;try{s=JSON.parse(t)}catch(o){return void this.$showMessage({title:"Could not import file",message:"The file does not contain valid JSON data.",type:"error"})}this.$root.$emit("importWorkflowData",{data:s})};const t=this.$refs.importFile;null!==t&&null!==t.files&&0!==t.files.length&&e.readAsText(t.files[0])},async handleSelect(e,t){if("workflow-open"===e)this.$store.dispatch("ui/openWorklfowOpenModal");else if("workflow-import-file"===e)this.$refs.importFile.click();else if("workflow-import-url"===e)try{const e=await this.$prompt("Workflow URL:","Import Workflow from URL:",{confirmButtonText:"Import",cancelButtonText:"Cancel",inputErrorMessage:"Invalid URL",inputPattern:/^http[s]?:\/\/.*\.json$/i});this.$root.$emit("importWorkflowUrl",{url:e.value})}catch(s){}else if("workflow-delete"===e){const e=await this.confirmMessage(`Are you sure that you want to delete the workflow "${this.workflowName}"?`,"Delete Workflow?","warning","Yes, delete!");if(!1===e)return;let t;try{t=await this.restApi().deleteWorkflow(this.currentWorkflow)}catch(o){return void this.$showError(o,"Problem deleting the workflow","There was a problem deleting the workflow:")}this.$titleReset(),this.$showMessage({title:"Workflow got deleted",message:`The workflow "${this.workflowName}" got deleted!`,type:"success"}),this.$router.push({name:"NodeViewNew"})}else if("workflow-download"===e){const e=await this.getWorkflowDataToSave(),{tags:t,...s}=e,o=new Blob([JSON.stringify(s,null,2)],{type:"application/json;charset=utf-8"});let i=this.$store.getters.workflowName||"unsaved_workflow";i=i.replace(/[^a-z0-9]/gi,"_"),Object($s["saveAs"])(o,i+".json")}else if("workflow-save"===e)this.saveCurrentWorkflow();else if("workflow-duplicate"===e)this.$store.dispatch("ui/openDuplicateModal");else if("help-about"===e)this.aboutDialogVisible=!0;else if("workflow-settings"===e)this.workflowSettingsDialogVisible=!0;else if("workflow-new"===e){const e=this.$store.getters.getStateIsDirty;if(e){const e=await this.confirmMessage("When you switch workflows your current workflow changes will be lost.","Save your Changes?","warning","Yes, switch workflows and forget changes");!0===e&&(this.$store.commit("setStateDirty",!1),"NodeViewNew"===this.$router.currentRoute.name?this.$root.$emit("newWorkflow"):this.$router.push({name:"NodeViewNew"}),this.$showMessage({title:"Workflow created",message:"A new workflow got created!",type:"success"}))}else"NodeViewNew"!==this.$router.currentRoute.name&&this.$router.push({name:"NodeViewNew"}),this.$showMessage({title:"Workflow created",message:"A new workflow got created!",type:"success"});this.$titleReset()}else"credentials-open"===e?this.credentialOpenDialogVisible=!0:"credentials-new"===e?this.credentialNewDialogVisible=!0:"execution-open-workflow"===e?null!==this.workflowExecution&&this.openWorkflow(this.workflowExecution.workflowId):"executions"===e&&(this.executionsListDialogVisible=!0)}}}),As=Is,Ps=(s("1b39"),Object(h["a"])(As,_t,Ot,!1,null,null,null)),Vs=Ps.exports,Ws=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"node-view-root"},[s("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.touchTap,expression:"touchTap",arg:"tap"}],staticClass:"node-view-wrapper",class:e.workflowClasses,on:{touchstart:e.mouseDown,touchend:e.mouseUp,touchmove:e.mouseMoveNodeWorkflow,mousedown:e.mouseDown,mouseup:e.mouseUp,wheel:e.wheelScroll}},[s("div",{staticClass:"node-view-background",style:e.backgroundStyle,attrs:{id:"node-view-background"}}),s("div",{staticClass:"node-view",style:e.workflowStyle,attrs:{id:"node-view"}},e._l(e.nodes,(function(t){return s("node",{key:e.getNodeIndex(t.name),attrs:{id:"node-"+e.getNodeIndex(t.name),name:t.name,isReadOnly:e.isReadOnly,instance:e.instance},on:{duplicateNode:e.duplicateNode,deselectAllNodes:e.deselectAllNodes,deselectNode:e.nodeDeselectedByName,nodeSelected:e.nodeSelectedByName,removeNode:e.removeNode,runWorkflow:e.runWorkflow}})})),1)]),s("DataDisplay",{on:{valueChanged:e.valueChanged}}),e.createNodeActive||e.isReadOnly?e._e():s("div",{staticClass:"node-creator-button",attrs:{title:"Add Node"},on:{click:e.openNodeCreator}},[s("el-button",{attrs:{icon:"el-icon-plus",circle:""}})],1),s("node-creator",{attrs:{active:e.createNodeActive},on:{nodeTypeSelected:e.nodeTypeSelected,closeNodeCreator:e.closeNodeCreator}}),s("div",{class:{"zoom-menu":!0,expanded:!e.sidebarMenuCollapsed}},[s("button",{staticClass:"button-white",attrs:{title:"Zoom to Fit"},on:{click:e.zoomToFit}},[s("font-awesome-icon",{attrs:{icon:"expand"}})],1),s("button",{staticClass:"button-white",attrs:{title:"Zoom In"},on:{click:function(t){return e.zoomIn()}}},[s("font-awesome-icon",{attrs:{icon:"search-plus"}})],1),s("button",{staticClass:"button-white",attrs:{title:"Zoom Out"},on:{click:function(t){return e.zoomOut()}}},[s("font-awesome-icon",{attrs:{icon:"search-minus"}})],1),1!==e.nodeViewScale?s("button",{staticClass:"button-white",attrs:{title:"Reset Zoom"},on:{click:function(t){return e.resetZoom()}}},[s("font-awesome-icon",{attrs:{icon:"undo",title:"Reset Zoom"}})],1):e._e()]),e.isReadOnly?e._e():s("div",{staticClass:"workflow-execute-wrapper"},[s("el-button",{staticClass:"workflow-run-button",class:{running:e.workflowRunning},attrs:{type:"text",disabled:e.workflowRunning,title:"Executes the Workflow from the Start or Webhook Node."},on:{click:function(t){return t.stopPropagation(),e.runWorkflow()}}},[s("div",{staticClass:"run-icon"},[e.workflowRunning?s("font-awesome-icon",{attrs:{icon:"spinner",spin:""}}):s("font-awesome-icon",{attrs:{icon:"play-circle"}})],1),e._v("\n\n\t\t\t"+e._s(e.runButtonText)+"\n\t\t")]),!0!==e.workflowRunning||e.executionWaitingForWebhook?e._e():s("el-button",{staticClass:"stop-execution",attrs:{circle:"",type:"text",title:e.stopExecutionInProgress?"Stopping current execution":"Stop current execution"},on:{click:function(t){return t.stopPropagation(),e.stopExecution()}}},[s("font-awesome-icon",{class:{"fa-spin":e.stopExecutionInProgress},attrs:{icon:"stop"}})],1),!0===e.workflowRunning&&!0===e.executionWaitingForWebhook?s("el-button",{staticClass:"stop-execution",attrs:{circle:"",type:"text",title:"Stop waiting for Webhook call"},on:{click:function(t){return t.stopPropagation(),e.stopWaitingForWebhook()}}},[s("font-awesome-icon",{class:{"fa-spin":e.stopExecutionInProgress},attrs:{icon:"stop"}})],1):e._e(),e.isReadOnly||!e.workflowExecution||e.workflowRunning?e._e():s("el-button",{staticClass:"clear-execution",attrs:{circle:"",type:"text",title:"Deletes the current Execution Data."},on:{click:function(t){return t.stopPropagation(),e.clearExecutionData()}}},[s("font-awesome-icon",{staticClass:"clear-execution-icon",attrs:{icon:"trash"}})],1)],1),s("Modals")],1)},Ms=[],Ls=s("0369");const Rs=o["default"].extend({data(){return{isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isMacOs:/(ipad|iphone|ipod|mac)/i.test(navigator.platform)}},computed:{controlKeyCode(){return this.isMacOs?"Meta":"Control"}},methods:{isCtrlKeyPressed(e){return!0===this.isTouchDevice||(this.isMacOs?e.metaKey:e.ctrlKey)}}}),js=o["default"].extend({methods:{getNodeIndex(e){let t=this.$store.getters.getNodeIndex(e);return-1===t&&(this.$store.commit("addToNodeIndex",e),t=this.$store.getters.getNodeIndex(e)),t.toString()}}}),Bs=Object(y["a"])(Rs,js).extend({data(){return{selectActive:!1,selectBox:document.createElement("span")}},mounted(){this.createSelectBox()},methods:{createSelectBox(){this.selectBox.id="select-box",this.selectBox.style.margin="0px auto",this.selectBox.style.border="2px dotted #FF0000",this.selectBox.style.position="absolute",this.selectBox.style.zIndex="100",this.selectBox.style.visibility="hidden",this.selectBox.addEventListener("mouseup",this.mouseUpMouseSelect);const e=this.$el.querySelector("#node-view");e.appendChild(this.selectBox)},isCtrlKeyPressed(e){return!0===this.isTouchDevice||(this.isMacOs?e.metaKey:e.ctrlKey)},getMousePositionWithinNodeView(e){const t=this.nodeViewScale,s=this.$store.getters.getNodeViewOffsetPosition;return{x:(e.pageX-s[0])/t,y:(e.pageY-s[1])/t}},showSelectBox(e){this.selectBox=Object.assign(this.selectBox,this.getMousePositionWithinNodeView(e)),this.selectBox.style.left=this.selectBox.x+"px",this.selectBox.style.top=this.selectBox.y+"px",this.selectBox.style.visibility="visible",this.selectActive=!0},updateSelectBox(e){const t=this.getSelectionBox(e);this.selectBox.style.left=t.x+"px",this.selectBox.style.top=t.y+"px",this.selectBox.style.width=t.width+"px",this.selectBox.style.height=t.height+"px"},hideSelectBox(){this.selectBox.style.visibility="hidden",this.selectBox.x=0,this.selectBox.y=0,this.selectBox.style.left="0px",this.selectBox.style.top="0px",this.selectBox.style.width="0px",this.selectBox.style.height="0px",this.selectActive=!1},getSelectionBox(e){const{x:t,y:s}=this.getMousePositionWithinNodeView(e);return{x:Math.min(t,this.selectBox.x),y:Math.min(s,this.selectBox.y),width:Math.abs(t-this.selectBox.x),height:Math.abs(s-this.selectBox.y)}},getNodesInSelection(e){const t=[],s=this.getSelectionBox(e);return this.$store.getters.allNodes.forEach(e=>{e.position[0]<s.x||e.position[0]>s.x+s.width||e.position[1]<s.y||e.position[1]>s.y+s.height||t.push(e)}),t},mouseDownMouseSelect(e){!0!==this.isCtrlKeyPressed(e)&&(this.$store.getters.isActionActive("dragActive")||(this.showSelectBox(e),this.$el.addEventListener("mousemove",this.mouseMoveSelect)))},mouseUpMouseSelect(e){if(!1===this.selectActive)return void(!0===this.isTouchDevice&&e.target&&e.target.id.includes("node-view")&&this.deselectAllNodes());this.$el.removeEventListener("mousemove",this.mouseMoveSelect),this.deselectAllNodes();const t=this.getNodesInSelection(e);t.forEach(e=>{this.nodeSelected(e)}),this.hideSelectBox()},mouseMoveSelect(e){0!==e.buttons?this.updateSelectBox(e):this.mouseUpMouseSelect(e)},nodeDeselected(e){this.$store.commit("removeNodeFromSelection",e);const t="node-"+this.getNodeIndex(e.name);this.instance.removeFromDragSelection(t)},nodeSelected(e){this.$store.commit("addSelectedNode",e);const t="node-"+this.getNodeIndex(e.name);this.instance.addToDragSelection(t)},deselectAllNodes(){this.instance.clearDragSelection(),this.$store.commit("resetSelectedNodes"),this.$store.commit("setLastSelectedNode",null),this.$store.commit("setLastSelectedNodeOutputIndex",null),this.$store.commit("setActiveNode",null)}}});var Fs=s("ff11"),Us=s.n(Fs);const zs=Object(y["a"])(Rs,js).extend({data(){return{moveLastPosition:[0,0]}},methods:{getMousePosition(e){const t=void 0!==e.pageX?e.pageX:e.touches&&e.touches[0]&&e.touches[0].pageX?e.touches[0].pageX:0,s=void 0!==e.pageY?e.pageY:e.touches&&e.touches[0]&&e.touches[0].pageY?e.touches[0].pageY:0;return{x:t,y:s}},moveWorkflow(e){const t=this.$store.getters.getNodeViewOffsetPosition,s=this.getMousePosition(e),o=t[0]+(s.x-this.moveLastPosition[0]),i=t[1]+(s.y-this.moveLastPosition[1]);this.$store.commit("setNodeViewOffsetPosition",{newOffset:[o,i]}),this.moveLastPosition[0]=s.x,this.moveLastPosition[1]=s.y},mouseDownMoveWorkflow(e){if(!1===this.isCtrlKeyPressed(e))return;if(this.$store.getters.isActionActive("dragActive"))return;this.$store.commit("setNodeViewMoveInProgress",!0);const t=this.getMousePosition(e);this.moveLastPosition[0]=t.x,this.moveLastPosition[1]=t.y,this.$el.addEventListener("mousemove",this.mouseMoveNodeWorkflow)},mouseUpMoveWorkflow(e){!1!==this.$store.getters.isNodeViewMoveInProgress&&(this.$el.removeEventListener("mousemove",this.mouseMoveNodeWorkflow),this.$store.commit("setNodeViewMoveInProgress",!1))},mouseMoveNodeWorkflow(e){e.target&&!e.target.id.includes("node-view")||this.$store.getters.isActionActive("dragActive")||(0!==e.buttons?this.moveWorkflow(e):this.mouseUp(e))},wheelMoveWorkflow(e){const t=Us()(e),s=this.$store.getters.getNodeViewOffsetPosition,o=s[0]-(e.shiftKey?t.pixelY:t.pixelX),i=s[1]-(e.shiftKey?t.pixelX:t.pixelY);this.$store.commit("setNodeViewOffsetPosition",{newOffset:[o,i]})}}});var Hs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"el-fade-in"},on:{"after-enter":function(t){e.showDocumentHelp=!0}}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.node,expression:"node"}],staticClass:"data-display-wrapper close-on-click",on:{click:e.close}},[s("div",{staticClass:"data-display"},[s("NodeSettings",{on:{valueChanged:e.valueChanged}}),s("RunData"),s("div",{staticClass:"close-button clickable close-on-click",attrs:{title:"Close"}},[s("i",{staticClass:"el-icon-close close-on-click"})]),s("transition",{attrs:{name:"fade"}},[e.showDocumentHelp&&e.nodeType?s("div",{staticClass:"doc-help-wrapper"},[e.showDocumentHelp&&e.nodeType?s("svg",{attrs:{id:"help-logo",href:e.documentationUrl,target:"_blank",width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[s("title",[e._v("Node Documentation")]),s("g",{attrs:{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[s("g",{attrs:{transform:"translate(-1127.000000, -836.000000)","fill-rule":"nonzero"}},[s("g",{attrs:{transform:"translate(1117.000000, 825.000000)"}},[s("g",{attrs:{transform:"translate(10.000000, 11.000000)"}},[s("g",{attrs:{transform:"translate(2.250000, 2.250000)",fill:"#FF6150"}},[s("path",{attrs:{d:"M6,11.25 L7.5,11.25 L7.5,9.75 L6,9.75 L6,11.25 M6.75,2.25 C5.09314575,2.25 3.75,3.59314575 3.75,5.25 L5.25,5.25 C5.25,4.42157288 5.92157288,3.75 6.75,3.75 C7.57842712,3.75 8.25,4.42157288 8.25,5.25 C8.25,6.75 6,6.5625 6,9 L7.5,9 C7.5,7.3125 9.75,7.125 9.75,5.25 C9.75,3.59314575 8.40685425,2.25 6.75,2.25 M1.5,0 L12,0 C12.8284271,0 13.5,0.671572875 13.5,1.5 L13.5,12 C13.5,12.8284271 12.8284271,13.5 12,13.5 L1.5,13.5 C0.671572875,13.5 0,12.8284271 0,12 L0,1.5 C0,0.671572875 0.671572875,0 1.5,0 Z"}})]),s("rect",{attrs:{x:"0",y:"0",width:"18",height:"18"}})])])])])]):e._e(),e.showDocumentHelp&&e.nodeType?s("div",{staticClass:"text"},[e._v("\n\t\t\t\t\t\t\tNeed help? "),e.showDocumentHelp&&e.nodeType?s("a",{attrs:{id:"doc-hyperlink",href:e.documentationUrl,target:"_blank"},on:{click:e.onDocumentationUrlClick}},[e._v("Open "+e._s(e.nodeType.displayName)+" documentation")]):e._e()]):e._e()]):e._e()])],1)])])},qs=[],Js=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"node-settings",on:{keydown:function(e){e.stopPropagation()}}},[s("div",{staticClass:"header-side-menu"},[e.node?s("span",[s("display-with-change",{attrs:{"key-name":"name"},on:{valueChanged:e.valueChanged}}),e.nodeType?s("a",{staticClass:"node-info",attrs:{href:"http://n8n.io/nodes/"+e.nodeType.name,target:"_blank"}},[s("el-tooltip",{staticClass:"clickable",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s("<strong>Node Description:</strong><br />"+e.nodeTypeDescription+"<br /><br /><strong>Click the '?' icon to open this node on n8n.io </strong>")},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1):e._e()],1):s("span",[e._v("No node active")])]),e.node&&!e.nodeValid?s("div",{staticClass:"node-is-not-valid"},[e._v('\n\t\tThe node is not valid as its type "'+e._s(e.node.type)+'" is unknown.\n\t')]):e._e(),e.node&&e.nodeValid?s("div",{staticClass:"node-parameters-wrapper"},[s("el-tabs",{attrs:{stretch:""}},[s("el-tab-pane",{attrs:{label:"Parameters"}},[s("node-credentials",{attrs:{node:e.node},on:{credentialSelected:e.credentialSelected}}),s("node-webhooks",{attrs:{node:e.node,nodeType:e.nodeType}}),s("parameter-input-list",{attrs:{parameters:e.parametersNoneSetting,hideDelete:!0,nodeValues:e.nodeValues,path:"parameters"},on:{valueChanged:e.valueChanged}}),0===e.parametersNoneSetting.length?s("div",[e._v("\n\t\t\t\t\tThis node does not have any parameters.\n\t\t\t\t")]):e._e()],1),s("el-tab-pane",{attrs:{label:"Settings"}},[s("parameter-input-list",{attrs:{parameters:e.nodeSettings,hideDelete:!0,nodeValues:e.nodeValues,path:""},on:{valueChanged:e.valueChanged}}),s("parameter-input-list",{attrs:{parameters:e.parametersSetting,nodeValues:e.nodeValues,path:"parameters"},on:{valueChanged:e.valueChanged}})],1)],1)],1):e._e()])},Ks=[],Gs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"static-text-wrapper"},[s("span",{directives:[{name:"show",rawName:"v-show",value:!e.editActive,expression:"!editActive"}],attrs:{title:"Click to change"}},[s("span",{staticClass:"static-text",on:{mousedown:e.startEdit}},[e._v(e._s(e.currentValue))])]),s("span",{directives:[{name:"show",rawName:"v-show",value:e.editActive,expression:"editActive"}]},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newValue,expression:"newValue"}],ref:"inputField",staticClass:"edit-field",attrs:{type:"text"},domProps:{value:e.newValue},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),t.preventDefault(),e.setValue(t))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"escape",void 0,t.key,void 0)?null:(t.stopPropagation(),t.preventDefault(),e.cancelEdit(t))},function(t){return t.stopPropagation(),e.noOp(t)}],blur:e.cancelEdit,input:function(t){t.target.composing||(e.newValue=t.target.value)}}}),s("font-awesome-icon",{staticClass:"icons clickable",attrs:{icon:"times",title:"Cancel Edit"},on:{mousedown:e.cancelEdit}}),s("font-awesome-icon",{staticClass:"icons clickable",attrs:{icon:"check",title:"Set Value"},on:{mousedown:e.setValue}})],1)])},Ys=[],Xs=Object(y["a"])(he["a"]).extend({name:"DisplayWithChange",props:{keyName:String},computed:{node(){return this.$store.getters.activeNode},currentValue(){this.keyName.split(".");const e=(e,t)=>t.split(".").reduce((e,t)=>e&&e[t],e);return e(this.node,this.keyName)}},watch:{currentValue(e){this.editActive=!1}},data:()=>({editActive:!1,newValue:""}),methods:{noOp(){},startEdit(){!0!==this.isReadOnly&&(this.editActive=!0,this.newValue=this.currentValue,setTimeout(()=>{this.$refs.inputField.focus()}))},cancelEdit(){this.editActive=!1},setValue(){const e={value:this.newValue,name:this.keyName};this.$emit("valueChanged",e),this.editActive=!1}}}),Zs=Xs,Qs=(s("e1e8"),Object(h["a"])(Zs,Gs,Ys,!1,null,null,null)),eo=Qs.exports,to=s("4a0c"),so=s("3c38"),oo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.credentialTypesNodeDescriptionDisplayed.length?s("div",{staticClass:"node-credentials"},[s("credentials-edit",{attrs:{dialogVisible:e.credentialNewDialogVisible,editCredentials:e.editCredentials,setCredentialType:e.addType,nodesInit:e.nodesInit,node:e.node},on:{closeDialog:e.closeCredentialNewDialog,credentialsCreated:e.credentialsCreated,credentialsUpdated:e.credentialsUpdated}}),s("div",{staticClass:"headline"},[e._v("\n\t\tCredentials\n\t")]),e._l(e.credentialTypesNodeDescriptionDisplayed,(function(t){return s("div",{key:t.name,staticClass:"credential-data"},[e.displayCredentials(t)?s("el-row",[s("el-col",{staticClass:"parameter-name",attrs:{span:10}},[e._v("\n\t\t\t\t"+e._s(e.credentialTypeNames[t.name])+":\n\t\t\t")]),s("el-col",{staticClass:"parameter-value",class:e.getIssues(t.name).length?"has-issues":"",attrs:{span:12}},[s("div",{staticClass:"credential-issues"},[s("el-tooltip",{attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s("Issues:<br />&nbsp;&nbsp;- "+e.getIssues(t.name).join("<br />&nbsp;&nbsp;- "))},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}})],1)],1),s("div",{style:e.credentialInputWrapperStyle(t.name)},[s("el-select",{attrs:{disabled:e.isReadOnly,placeholder:"Select Credential",size:"small"},on:{change:function(s){return e.credentialSelected(t.name)}},model:{value:e.credentials[t.name],callback:function(s){e.$set(e.credentials,t.name,s)},expression:"credentials[credentialTypeDescription.name]"}},e._l(e.credentialOptions[t.name],(function(e,t){return s("el-option",{key:e.name+"_"+t,attrs:{label:e.name,value:e.name}})})),1)],1)]),s("el-col",{staticClass:"parameter-value",attrs:{span:2}},[e.credentials[t.name]?s("font-awesome-icon",{staticClass:"update-credentials clickable",attrs:{icon:"pen",title:"Update Credentials"},on:{click:function(s){return e.updateCredentials(t.name)}}}):e._e()],1)],1):e._e()],1)}))],2):e._e()},io=[],ao=Object(y["a"])(he["a"],x["a"],me["a"],C["a"]).extend({name:"NodeCredentials",props:["node"],components:{CredentialsEdit:Zt,ParameterInput:zt["a"]},computed:{credentialTypesNode(){return this.credentialTypesNodeDescription.map(e=>e.name)},credentialTypesNodeDescriptionDisplayed(){return this.credentialTypesNodeDescription.filter(e=>this.displayCredentials(e))},credentialTypesNodeDescription(){const e=this.node,t=this.$store.getters.nodeType(e.type);return t&&t.credentials?t.credentials:[]},credentialTypeNames(){const e={};let t;for(const s of this.credentialTypesNode)t=this.$store.getters.credentialType(s),e[s]=null!==t?t.displayName:s;return e}},data(){return{addType:void 0,credentialNewDialogVisible:!1,credentialOptions:{},credentials:{},editCredentials:null,newCredentialText:"- Create New -",nodesInit:void 0}},watch:{node(){this.init()}},methods:{closeCredentialNewDialog(){this.credentialNewDialogVisible=!1},async credentialsCreated(e){await this.credentialsUpdated(e)},credentialsUpdated(e){this.credentialTypesNode.includes(e.data.type)&&(this.init(),o["default"].set(this.credentials,e.data.type,e.data.name),this.credentialSelected(e.data.type),!0===e.options.closeDialog&&this.closeCredentialNewDialog())},credentialInputWrapperStyle(e){let t=0;const s={width:"100%"};return this.getIssues(e).length&&(t+=20),0!==t&&(s.width=`calc(100% - ${t}px)`),s},credentialSelected(e){const t=this.credentials[e];t===this.newCredentialText&&(this.addType=e,this.editCredentials=null,this.nodesInit=[this.node.type],this.credentialNewDialogVisible=!0,this.credentials[e]=void 0);const s=this.node,o={name:s.name,properties:{credentials:JSON.parse(JSON.stringify(this.credentials))}};this.$emit("credentialSelected",o)},displayCredentials(e){return void 0===e.displayOptions||this.displayParameter(this.node.parameters,e,"")},getIssues(e){const t=this.node;return void 0===t.issues||void 0===t.issues.credentials?[]:t.issues.credentials.hasOwnProperty(e)?t.issues.credentials[e]:[]},updateCredentials(e){this.credentials[e];const t=this.credentials[e],s=this.credentialOptions[e].find(e=>e.name===t);if(void 0===s)return void this.$showMessage({title:"Credentials not found",message:`The credentials named "${t}" of type "${e}" could not be found!`,type:"error"});const o={id:s.id,name:t,type:e};this.editCredentials=o,this.addType=e,this.credentialNewDialogVisible=!0},init(){const e=this.node,t={name:this.newCredentialText};let s=[];for(const i of this.credentialTypesNode)s=this.$store.getters.credentialsByType(i),s.push(t),o["default"].set(this.credentialOptions,i,s);e.credentials?o["default"].set(this,"credentials",JSON.parse(JSON.stringify(e.credentials))):o["default"].set(this,"credentials",{})}},mounted(){this.init()}}),no=ao,ro=(s("f408"),Object(h["a"])(no,oo,io,!1,null,null,null)),lo=ro.exports,co=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.webhooksNode.length?s("div",{staticClass:"webhoooks"},[s("div",{staticClass:"clickable headline",class:{expanded:!e.isMinimized},attrs:{title:e.isMinimized?"Click to display Webhook URLs":"Click to hide Webhook URLs"},on:{click:function(t){e.isMinimized=!e.isMinimized}}},[s("font-awesome-icon",{staticClass:"minimize-button minimize-icon",attrs:{icon:"angle-up"}}),e._v("\n\t\tWebhook URLs\n\t")],1),s("el-collapse-transition",[e.isMinimized?e._e():s("div",{staticClass:"node-webhooks"},[s("div",{staticClass:"url-selection"},[s("el-row",[s("el-col",{staticClass:"mode-selection-headline",attrs:{span:10}},[e._v("\n\t\t\t\t\t\tDisplay URL for:\n\t\t\t\t\t")]),s("el-col",{attrs:{span:14}},[s("el-radio-group",{attrs:{size:"mini"},model:{value:e.showUrlFor,callback:function(t){e.showUrlFor=t},expression:"showUrlFor"}},[s("el-radio-button",{attrs:{label:"Production"}}),s("el-radio-button",{attrs:{label:"Test"}})],1)],1)],1)],1),e._l(e.webhooksNode,(function(t,o){return s("el-tooltip",{key:o,staticClass:"item",attrs:{effect:"light",content:"Click to copy Webhook URL",placement:"left"}},[s("div",{staticClass:"webhook-wrapper"},[s("div",{staticClass:"http-field"},[s("div",{staticClass:"http-method"},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(e.getValue(t,"httpMethod"))),s("br")])]),s("div",{staticClass:"url-field"},[s("div",{staticClass:"webhook-url left-ellipsis clickable",on:{click:function(s){return e.copyWebhookUrl(t)}}},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(e.getWebhookUrl(t,"path"))),s("br")])])])])}))],2)])],1):e._e()},uo=[],po=Object(y["a"])(Ft,C["a"],N["a"]).extend({name:"NodeWebhooks",props:["node","nodeType"],data(){return{isMinimized:!0,showUrlFor:"Production"}},computed:{webhooksNode(){return null===this.nodeType||void 0===this.nodeType.webhooks?[]:this.nodeType.webhooks}},methods:{copyWebhookUrl(e){const t=this.getWebhookUrl(e);this.copyToClipboard(t),this.$showMessage({title:"Copied",message:"The webhook URL was successfully copied!",type:"success"})},getValue(e,t){if(void 0===e[t])return"empty";try{return this.resolveExpression(e[t])}catch(s){return"[INVALID EXPRESSION]"}},getWebhookUrl(e){let t=this.$store.getters.getWebhookUrl;"Test"===this.showUrlFor&&(t=this.$store.getters.getWebhookTestUrl);const s=this.$store.getters.workflowId,o=this.getValue(e,"path"),i=this.getValue(e,"isFullPath")||!1;return Ut["NodeHelpers"].getNodeWebhookUrl(t,s,this.node,o,i)}},watch:{node(){this.isMinimized=!0}}}),ho=po,mo=(s("c320"),Object(h["a"])(ho,co,uo,!1,null,"5b5e8208",null)),fo=mo.exports,go=Object(y["a"])(k["a"],he["a"],x["a"]).extend({name:"NodeSettings",components:{DisplayWithChange:eo,NodeCredentials:lo,ParameterInputFull:to["a"],ParameterInputList:so["default"],NodeWebhooks:fo},computed:{nodeType(){this.node;return this.node?this.$store.getters.nodeType(this.node.type):null},nodeTypeDescription(){return this.nodeType&&this.nodeType.description?this.nodeType.description:"No description found"},headerStyle(){return this.node?{"background-color":this.node.color}:{}},node(){return this.$store.getters.activeNode},parametersSetting(){return this.parameters.filter(e=>e.isNodeSetting)},parametersNoneSetting(){return this.parameters.filter(e=>!e.isNodeSetting)},parameters(){return null===this.nodeType?[]:this.nodeType.properties},isColorDefaultValue(){return null!==this.nodeType&&this.node.color===this.nodeType.defaults.color},workflowRunning(){return this.$store.getters.isActionActive("workflowRunning")}},data(){return{nodeValid:!0,nodeColor:null,nodeValues:{color:"#ff0000",alwaysOutputData:!1,executeOnce:!1,notesInFlow:!1,continueOnFail:!1,retryOnFail:!1,maxTries:3,waitBetweenTries:1e3,notes:"",parameters:{}},nodeSettings:[{displayName:"Notes",name:"notes",type:"string",typeOptions:{rows:5},default:"",noDataExpression:!0,description:"Optional note to save with the node."},{displayName:"Display note in flow?",name:"notesInFlow",type:"boolean",default:!1,noDataExpression:!0,description:"If active, the note above will display in the flow as a subtitle."},{displayName:"Node Color",name:"color",type:"color",default:"#ff0000",noDataExpression:!0,description:"The color of the node in the flow."},{displayName:"Always Output Data",name:"alwaysOutputData",type:"boolean",default:!1,noDataExpression:!0,description:"If active, the node will return an empty item even if the <br />node returns no data during an initial execution. Be careful setting <br />this on IF-Nodes as it could cause an infinite loop."},{displayName:"Execute Once",name:"executeOnce",type:"boolean",default:!1,noDataExpression:!0,description:"If active, the node executes only once, with data<br /> from the first item it recieves. "},{displayName:"Retry On Fail",name:"retryOnFail",type:"boolean",default:!1,noDataExpression:!0,description:"If active, the node tries to execute a failed attempt <br /> multiple times until it succeeds."},{displayName:"Max. Tries",name:"maxTries",type:"number",typeOptions:{minValue:2,maxValue:5},default:3,displayOptions:{show:{retryOnFail:[!0]}},noDataExpression:!0,description:"Number of times Retry On Fail should attempt to execute the node <br />before stopping and returning the execution as failed."},{displayName:"Wait Between Tries",name:"waitBetweenTries",type:"number",typeOptions:{minValue:0,maxValue:5e3},default:1e3,displayOptions:{show:{retryOnFail:[!0]}},noDataExpression:!0,description:"How long to wait between each attempt. Value in ms."},{displayName:"Continue On Fail",name:"continueOnFail",type:"boolean",default:!1,noDataExpression:!0,description:"If active, the workflow continues even if this node's <br />execution fails. When this occurs, the node passes along input data from<br />previous nodes - so your workflow should account for unexpected output data."}]}},watch:{node(e,t){this.setNodeValues()}},methods:{noOp(){},setValue(e,t){const s=e.split(".");let i=s.pop(),a=!1;if(void 0!==i&&i.includes("[")){const e=i.match(/(.*)\[(\d+)\]$/);e&&(s.push(e[1]),i=e[2],a=!0)}if(0===s.length)null===t?o["default"].delete(this.nodeValues,i):o["default"].set(this.nodeValues,i,t);else if(null===t){let e=Object(Bt["get"])(this.nodeValues,s.join("."));o["default"].delete(e,i),!0===a&&0===e.length&&(i=s.pop(),e=Object(Bt["get"])(this.nodeValues,s.join(".")),o["default"].delete(e,i))}else"object"===typeof t?o["default"].set(Object(Bt["get"])(this.nodeValues,s.join(".")),i,JSON.parse(JSON.stringify(t))):o["default"].set(Object(Bt["get"])(this.nodeValues,s.join(".")),i,t)},credentialSelected(e){this.$store.commit("updateNodeProperties",e);const t=this.$store.getters.nodeByName(e.name);this.updateNodeCredentialIssues(t),this.$externalHooks().run("nodeSettings.credentialSelected",{updateInformation:e})},valueChanged(e){let t;t=e.hasOwnProperty("value")?e.value:Object(Bt["get"])(this.nodeValues,e.name);const s=e.node||this.node.name,i=this.$store.getters.nodeByName(s);if("name"===e.name){const o={value:t,oldValue:s,name:e.name};this.$emit("valueChanged",o),this.$store.commit("setActiveNode",t)}else if(e.name.startsWith("parameters.")){const s=this.$store.getters.nodeType(i.type);let a=Ut["NodeHelpers"].getNodeParameters(s.properties,i.parameters,!1,!1);const n=Object.assign({},a);a=JSON.parse(JSON.stringify(a));const r=e.name.split(".").slice(1).join("."),l=r.match(/(.*)\[(\d+)\]$/);if(void 0===e.value&&null!==l){const e=l[1],t=l[2],s=Object(Bt["get"])(a,e);Array.isArray(s)&&(s.splice(parseInt(t,10),1),o["default"].set(a,e,s))}else void 0===t?Object(Bt["unset"])(a,r):Object(Bt["set"])(a,r,t);a=Ut["NodeHelpers"].getNodeParameters(s.properties,a,!0,!1);for(const e of Object.keys(a))a&&null!==a[e]&&void 0!==a[e]&&this.setValue("parameters."+e,a[e]);const c={name:i.name,value:a};this.$store.commit("setNodeParameters",c),this.$externalHooks().run("nodeSettings.valueChanged",{parameterPath:r,newValue:t,parameters:this.parameters,oldNodeParameters:n}),this.updateNodeParameterIssues(i,s),this.updateNodeCredentialIssues(i)}else{o["default"].set(this.nodeValues,e.name,t);const s={name:i.name,key:e.name,value:t};this.$store.commit("setNodeValue",s)}},setNodeValues(){if(this.node)if(null!==this.nodeType){this.nodeValid=!0;const e=[];this.node.color&&(e.push("color"),o["default"].set(this.nodeValues,"color",this.node.color)),this.node.notes&&(e.push("notes"),o["default"].set(this.nodeValues,"notes",this.node.notes)),this.node.alwaysOutputData&&(e.push("alwaysOutputData"),o["default"].set(this.nodeValues,"alwaysOutputData",this.node.alwaysOutputData)),this.node.executeOnce&&(e.push("executeOnce"),o["default"].set(this.nodeValues,"executeOnce",this.node.executeOnce)),this.node.continueOnFail&&(e.push("continueOnFail"),o["default"].set(this.nodeValues,"continueOnFail",this.node.continueOnFail)),this.node.notesInFlow&&(e.push("notesInFlow"),o["default"].set(this.nodeValues,"notesInFlow",this.node.notesInFlow)),this.node.retryOnFail&&(e.push("retryOnFail"),o["default"].set(this.nodeValues,"retryOnFail",this.node.retryOnFail)),this.node.maxTries&&(e.push("maxTries"),o["default"].set(this.nodeValues,"maxTries",this.node.maxTries)),this.node.waitBetweenTries&&(e.push("waitBetweenTries"),o["default"].set(this.nodeValues,"waitBetweenTries",this.node.waitBetweenTries));for(const t of this.nodeSettings)e.includes(t.name)||o["default"].set(this.nodeValues,t.name,t.default),"color"===t.name&&(t.default=this.nodeType.defaults.color);o["default"].set(this.nodeValues,"parameters",JSON.parse(JSON.stringify(this.node.parameters)))}else this.nodeValid=!1}},mounted(){this.setNodeValues()}}),wo=go,vo=(s("e82f"),Object(h["a"])(wo,Js,Ks,!1,null,null,null)),yo=vo.exports,bo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.workflowRunning,expression:"workflowRunning"}],staticClass:"run-data-view"},[s("BinaryDataDisplay",{attrs:{windowVisible:e.binaryDataDisplayVisible,displayData:e.binaryDataDisplayData},on:{close:e.closeBinaryDataDisplay}}),e.node&&!e.isReadOnly?s("el-button",{staticClass:"execute-node-button",attrs:{disabled:e.workflowRunning,title:"Executes this "+e.node.name+" node after executing any previous nodes that have not yet returned data"},on:{click:function(t){return t.stopPropagation(),e.runWorkflow(e.node.name,"RunData.ExecuteNodeButton")}}},[s("div",{staticClass:"run-icon-button"},[e.workflowRunning?s("font-awesome-icon",{attrs:{icon:"spinner",spin:""}}):s("font-awesome-icon",{attrs:{icon:"play-circle"}})],1),e._v("\n\n\t\tExecute Node\n\t")]):e._e(),s("div",{staticClass:"header"},[s("div",{staticClass:"title-text"},[e.dataCount<e.maxDisplayItems?s("strong",[e._v("\n\t\t\t\tItems: "+e._s(e.dataCount)+"\n\t\t\t")]):s("strong",[e._v("Items:\n\t\t\t\t"),s("el-select",{on:{click:function(e){e.stopPropagation()}},model:{value:e.maxDisplayItems,callback:function(t){e.maxDisplayItems=t},expression:"maxDisplayItems"}},e._l(e.maxDisplayItemsOptions,(function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})})),1),e._v(" /\n\t\t\t\t"+e._s(e.dataCount)+"\n\t\t\t")],1),e._v("\n\t\t\t \n\t\t\t"),e.runMetadata?s("el-popover",{attrs:{placement:"right",width:"400",trigger:"hover"}},[s("strong",[e._v("Start Time:")]),e._v(" "+e._s(e.runMetadata.startTime)),s("br"),s("strong",[e._v("Execution Time:")]),e._v(" "+e._s(e.runMetadata.executionTime)+" ms\n\t\t\t\t"),s("font-awesome-icon",{staticClass:"primary-color",attrs:{slot:"reference",icon:"info-circle"},slot:"reference"})],1):e._e(),e.maxOutputIndex>0?s("span",[e._v("\n\t\t\t\t| Output:\n\t\t\t\t"),s("el-select",{on:{click:function(e){e.stopPropagation()}},model:{value:e.outputIndex,callback:function(t){e.outputIndex=t},expression:"outputIndex"}},e._l(e.maxOutputIndex+1,(function(t){return s("el-option",{key:t,attrs:{label:e.getOutputName(t-1),value:t-1}})})),1)],1):e._e(),e.maxRunIndex>0?s("span",[e._v("\n\t\t\t\t| Data of Execution:\n\t\t\t\t"),s("el-select",{on:{click:function(e){e.stopPropagation()}},model:{value:e.runIndex,callback:function(t){e.runIndex=t},expression:"runIndex"}},e._l(e.maxRunIndex+1,(function(t){return s("el-option",{key:t,attrs:{label:t+"/"+(e.maxRunIndex+1),value:t-1}})})),1)],1):e._e()],1),e.node&&null!==e.workflowRunData&&e.workflowRunData.hasOwnProperty(e.node.name)&&!e.workflowRunData[e.node.name][e.runIndex].error?s("div",{staticClass:"title-data-display-selector",on:{click:function(e){e.stopPropagation()}}},[s("el-radio-group",{attrs:{size:"mini"},model:{value:e.displayMode,callback:function(t){e.displayMode=t},expression:"displayMode"}},[s("el-radio-button",{attrs:{label:"JSON",disabled:!1===e.showData}}),s("el-radio-button",{attrs:{label:"Table"}}),0!==e.binaryData.length?s("el-radio-button",{attrs:{label:"Binary"}}):e._e()],1)],1):e._e(),"JSON"===e.displayMode&&e.state.path!==e.deselectedPlaceholder?s("div",{staticClass:"select-button"},[s("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCopyClick}},[s("span",{staticClass:"el-dropdown-link"},[s("el-button",{staticClass:"retry-button",attrs:{circle:"",type:"text",size:"small",title:"Copy"}},[s("font-awesome-icon",{attrs:{icon:"copy"}})],1)],1),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:{command:"itemPath"}}},[e._v("Copy Item Path")]),s("el-dropdown-item",{attrs:{command:{command:"parameterPath"}}},[e._v("Copy Parameter Path")]),s("el-dropdown-item",{attrs:{command:{command:"value"}}},[e._v("Copy Value")])],1)],1)],1):e._e()]),s("div",{staticClass:"data-display-content"},[e.node&&null!==e.workflowRunData&&e.workflowRunData.hasOwnProperty(e.node.name)?s("span",[e.workflowRunData[e.node.name][e.runIndex].error?s("div",{staticClass:"error-display"},[s("NodeErrorView",{attrs:{error:e.workflowRunData[e.node.name][e.runIndex].error}})],1):s("span",[!1===e.showData?s("div",{staticClass:"to-much-data"},[s("h3",[e._v("\n\t\t\t\t\t\tNode returned a large amount of data\n\t\t\t\t\t")]),s("div",{staticClass:"text"},[e._v("\n\t\t\t\t\t\tThe node contains "+e._s(parseInt(e.dataSize/1024).toLocaleString())+" KB of data."),s("br"),e._v("\n\t\t\t\t\t\tDisplaying it could cause problems!"),s("br"),s("br"),e._v("\n\t\t\t\t\t\tIf you do decide to display it, avoid the JSON view!\n\t\t\t\t\t")]),s("el-button",{attrs:{size:"small"},on:{click:function(t){e.displayMode="Table",e.showData=!0}}},[s("font-awesome-icon",{attrs:{icon:"eye"}}),e._v("\n\t\t\t\t\t\tDisplay Data Anyway\n\t\t\t\t\t")],1)],1):["JSON","Table"].includes(e.displayMode)?s("div",[0===e.jsonData.length?s("div",{staticClass:"no-data"},[e._v("\n\t\t\t\t\t\tNo text data found\n\t\t\t\t\t")]):"Table"===e.displayMode?s("div",[null!==e.tableData&&0===e.tableData.columns.length?s("div",{staticClass:"no-data"},[e._v("\n\t\t\t\t\t\t\tEntries exist but they do not contain any JSON data.\n\t\t\t\t\t\t")]):null!==e.tableData?s("table",[s("tr",e._l(e.tableData.columns,(function(t){return s("th",{key:t},[e._v(e._s(t))])})),0),e._l(e.tableData.data,(function(t,o){return s("tr",{key:o},e._l(t,(function(t,o){return s("td",{key:o},[e._v(e._s([null,void 0].includes(t)?" ":t))])})),0)}))],2):e._e()]):"JSON"===e.displayMode?s("vue-json-pretty",{staticClass:"json-data",attrs:{data:e.jsonData,deep:10,showLine:!0,showLength:!0,selectableType:"single",path:"",highlightSelectedNode:!0,selectOnClickNode:!0},on:{click:e.dataItemClicked},model:{value:e.state.path,callback:function(t){e.$set(e.state,"path",t)},expression:"state.path"}}):e._e()],1):"Binary"===e.displayMode?s("div",[0===e.binaryData.length?s("div",{staticClass:"no-data"},[e._v("\n\t\t\t\t\t\tNo binary data found\n\t\t\t\t\t")]):s("div",e._l(e.binaryData,(function(t,o){return s("div",{key:o},[s("div",{staticClass:"binary-data-row-index"},[s("div",{staticClass:"binary-data-cell-index"},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(o+1)+"\n\t\t\t\t\t\t\t\t")])]),s("div",{staticClass:"binary-data-row"},e._l(t,(function(t,i){return s("div",{key:o+"_"+i,staticClass:"binary-data-cell"},[s("div",{staticClass:"binary-data-information"},[s("div",{staticClass:"binary-data-cell-name"},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t"+e._s(i)+"\n\t\t\t\t\t\t\t\t\t\t")]),t.fileName?s("div",[s("div",{staticClass:"label"},[e._v("File Name: ")]),s("div",{staticClass:"value"},[e._v(e._s(t.fileName))])]):e._e(),t.directory?s("div",[s("div",{staticClass:"label"},[e._v("Directory: ")]),s("div",{staticClass:"value"},[e._v(e._s(t.directory))])]):e._e(),t.fileExtension?s("div",[s("div",{staticClass:"label"},[e._v("File Extension:")]),s("div",{staticClass:"value"},[e._v(e._s(t.fileExtension))])]):e._e(),t.mimeType?s("div",[s("div",{staticClass:"label"},[e._v("Mime Type: ")]),s("div",{staticClass:"value"},[e._v(e._s(t.mimeType))])]):e._e(),s("div",{staticClass:"binary-data-show-data-button-wrapper"},[s("el-button",{staticClass:"binary-data-show-data-button",attrs:{size:"mini"},on:{click:function(t){return e.displayBinaryData(o,i)}}},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t\tShow Binary Data\n\t\t\t\t\t\t\t\t\t\t\t")])],1)])])})),0)])})),0)]):e._e()])]):s("div",{staticClass:"message"},[e._m(0)])])],1)},ko=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("strong",[e._v("No data")]),s("br"),s("br"),e._v("\n\t\t\t\tData returned by this node will display here"),s("br")])}],xo=s("1346"),Co=s.n(xo),$o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.windowVisible?s("div",{staticClass:"binary-data-window"},[s("el-button",{staticClass:"binary-data-window-back",attrs:{size:"small",title:"Back to overview page",icon:"el-icon-arrow-left"},on:{click:function(t){return t.stopPropagation(),e.closeWindow(t)}}},[e._v("\n\t\tBack to list\n\t")]),s("div",{staticClass:"binary-data-window-wrapper"},[e.binaryData?e.binaryData.mimeType&&e.binaryData.mimeType.startsWith("video/")?s("video",{attrs:{controls:"",autoplay:""}},[s("source",{attrs:{src:"data:"+e.binaryData.mimeType+";base64,"+e.binaryData.data,type:e.binaryData.mimeType}}),e._v("\n\t\t\tYour browser does not support the video element. Kindly update it to latest version.\n\t\t")]):s("embed",{staticClass:"binary-data",class:e.embedClass,attrs:{src:"data:"+e.binaryData.mimeType+";base64,"+e.binaryData.data}}):s("div",[e._v("\n\t\t\tData to display did not get found\n\t\t")])])],1):e._e()},No=[],Eo=Object(y["a"])(x["a"]).extend({name:"BinaryDataDisplay",props:["displayData","windowVisible"],computed:{binaryData(){const e=this.getBinaryData(this.workflowRunData,this.displayData.node,this.displayData.runIndex,this.displayData.outputIndex);return 0===e.length||this.displayData.index>=e.length||void 0===e[this.displayData.index][this.displayData.key]?null:e[this.displayData.index][this.displayData.key]},embedClass(){return null!==this.binaryData&&void 0!==this.binaryData.mimeType&&this.binaryData.mimeType.startsWith("image")?["image"]:["other"]},workflowRunData(){const e=this.$store.getters.getWorkflowExecution;if(null===e)return null;const t=e.data;return t.resultData.runData}},methods:{closeWindow(){return this.$emit("close"),!1}}}),To=Eo,Do=(s("62ca"),Object(h["a"])(To,$o,No,!1,null,null,null)),_o=Do.exports,Oo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"error-header"},[s("div",{staticClass:"error-message"},[e._v("ERROR: "+e._s(e.error.message))]),e.error.description?s("div",{staticClass:"error-description"},[e._v(e._s(e.error.description))]):e._e()]),s("details",[s("summary",{staticClass:"error-details__summary"},[s("font-awesome-icon",{staticClass:"error-details__icon",attrs:{icon:"angle-right"}}),e._v(" Details\n\t\t")],1),s("div",{staticClass:"error-details__content"},[e.error.timestamp?s("div",[s("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[s("div",{staticClass:"clearfix box-card__title",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("Time")])]),s("div",[e._v("\n\t\t\t\t\t\t"+e._s(new Date(e.error.timestamp).toLocaleString())+"\n\t\t\t\t\t")])])],1):e._e(),e.error.httpCode?s("div",[s("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[s("div",{staticClass:"clearfix box-card__title",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("HTTP-Code")])]),s("div",[e._v("\n\t\t\t\t\t\t"+e._s(e.error.httpCode)+"\n\t\t\t\t\t")])])],1):e._e(),e.error.cause?s("div",[s("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[s("div",{staticClass:"clearfix box-card__title",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("Cause")]),s("br"),s("span",{staticClass:"box-card__subtitle"},[e._v("Data below may contain sensitive information. Proceed with caution when sharing.")])]),s("div",[e.displayCause?s("el-button",{staticClass:"copy-button",attrs:{circle:"",type:"text",title:"Copy to clipboard"},on:{click:e.copyCause}},[s("font-awesome-icon",{attrs:{icon:"copy"}})],1):e._e(),e.displayCause?s("vue-json-pretty",{staticClass:"json-data",attrs:{data:e.error.cause,deep:3,showLength:!0,selectableType:"single",path:"error"}}):s("span",[s("font-awesome-icon",{attrs:{icon:"info-circle"}}),e._v(" The error cause is too large to be displayed.\n\t\t\t\t\t\t")],1)],1)])],1):e._e(),e.error.stack?s("div",[s("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[s("div",{staticClass:"clearfix box-card__title",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("Stack")])]),s("div",[s("pre",[s("code",[e._v(e._s(e.error.stack))])])])])],1):e._e()])])])},So=[],Io=Object(y["a"])(Ft,C["a"]).extend({name:"NodeErrorView",props:["error"],components:{VueJsonPretty:Co.a},computed:{displayCause(){return JSON.stringify(this.error.cause).length<_["m"]}},methods:{copyCause(){this.copyToClipboard(JSON.stringify(this.error.cause)),this.copySuccess()},copySuccess(){this.$showMessage({title:"Copied to clipboard",message:"",type:"info"})}}}),Ao=Io,Po=(s("082b3"),Object(h["a"])(Ao,Oo,So,!1,null,null,null)),Vo=Po.exports;const Wo="_!^&*";var Mo=Object(y["a"])(Ft,k["a"],he["a"],x["a"],Cs).extend({name:"RunData",components:{BinaryDataDisplay:_o,NodeErrorView:Vo,VueJsonPretty:Co.a},data(){return{binaryDataPreviewActive:!1,dataSize:0,deselectedPlaceholder:Wo,displayMode:"Table",state:{value:"",path:Wo},runIndex:0,showData:!1,outputIndex:0,maxDisplayItems:25,binaryDataDisplayVisible:!1,binaryDataDisplayData:null,MAX_DISPLAY_DATA_SIZE:_["m"],MAX_DISPLAY_ITEMS_AUTO_ALL:_["n"]}},computed:{workflowRunning(){return this.$store.getters.isActionActive("workflowRunning")},workflowExecution(){return this.$store.getters.getWorkflowExecution},workflowRunData(){if(null===this.workflowExecution)return null;const e=this.workflowExecution.data;return e.resultData.runData},maxDisplayItemsOptions(){const e=[25,50,100,250,500,1e3].filter(e=>e<=this.dataCount);return e.includes(this.dataCount)||e.push(this.dataCount),e},node(){return this.$store.getters.activeNode},runMetadata(){if(!this.node||null===this.workflowExecution)return null;const e=this.workflowRunData;if(null===e||!e.hasOwnProperty(this.node.name))return null;if(e[this.node.name].length<=this.runIndex)return null;const t=e[this.node.name][this.runIndex];return{executionTime:t.executionTime,startTime:new Date(t.startTime).toLocaleString()}},dataCount(){if(null===this.node)return 0;const e=this.workflowRunData;if(null===e||!e.hasOwnProperty(this.node.name))return 0;if(e[this.node.name].length<=this.runIndex)return 0;if(e[this.node.name][this.runIndex].hasOwnProperty("error"))return 1;if(!e[this.node.name][this.runIndex].hasOwnProperty("data")||void 0===e[this.node.name][this.runIndex].data)return 0;const t=this.getMainInputData(e[this.node.name][this.runIndex].data,this.outputIndex);return t.length},maxOutputIndex(){if(null===this.node)return 0;const e=this.workflowRunData;return null!==e&&e.hasOwnProperty(this.node.name)?e[this.node.name].length<this.runIndex||void 0===e[this.node.name][this.runIndex].data||void 0===e[this.node.name][this.runIndex].data.main?0:e[this.node.name][this.runIndex].data.main.length-1:0},maxRunIndex(){if(null===this.node)return 0;const e=this.workflowRunData;return null!==e&&e.hasOwnProperty(this.node.name)&&e[this.node.name].length?e[this.node.name].length-1:0},jsonData(){let e=this.getNodeInputData(this.node,this.runIndex,this.outputIndex);return 0!==e.length&&Array.isArray(e)?(null!==this.maxDisplayItems&&(e=e.slice(0,this.maxDisplayItems)),this.convertToJson(e)):[]},tableData(){let e=this.getNodeInputData(this.node,this.runIndex,this.outputIndex);if(0!==e.length)return null!==this.maxDisplayItems&&(e=e.slice(0,this.maxDisplayItems)),this.convertToTable(e)},binaryData(){return null===this.node?[]:this.getBinaryData(this.workflowRunData,this.node.name,this.runIndex,this.outputIndex)}},methods:{closeBinaryDataDisplay(){this.binaryDataDisplayVisible=!1,this.binaryDataDisplayData=null},convertToJson(e){const t=[];return e.forEach(e=>{e.hasOwnProperty("json")&&t.push(e.json)}),t},convertToTable(e){const t=[],s=[];let o,i,a;return e.forEach(e=>{e.hasOwnProperty("json")&&(a=e.json,i=[],o=Object.keys(a),s.forEach(e=>{a.hasOwnProperty(e)?(i.push(a[e]),o.splice(o.indexOf(e),1)):i.push(null)}),o.forEach(e=>{s.push(e),i.push(a[e])}),t.push(i))}),t.forEach(e=>{s.length>e.length&&e.push.apply(e,new Array(s.length-e.length))}),{columns:s,data:t}},clearExecutionData(){this.$store.commit("setWorkflowExecutionData",null),this.updateNodesExecutionIssues()},dataItemClicked(e,t){this.state.value=t},displayBinaryData(e,t){this.binaryDataDisplayVisible=!0,this.binaryDataDisplayData={node:this.node.name,runIndex:this.runIndex,outputIndex:this.outputIndex,index:e,key:t}},getOutputName(e){if(null===this.node)return e+1;const t=this.$store.getters.nodeType(this.node.type);return!t.hasOwnProperty("outputNames")||t.outputNames.length<=e?e+1:t.outputNames[e]},convertPath(e){const t="*___~#^#~___*";let s=e.match(/\[(.*?)\]/g);s=null===s?[]:s.map(e=>e.slice(1,-1)).map(e=>e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e);const o=e.replace(/\[(.*?)\]/g,t),i=o.split("."),a=[];return i.forEach(e=>{let o=e.indexOf(t);while(-1!==o)0===o?(a.push(s.shift()),e=e.substr(t.length)):(a.push(e.substr(0,o)),e=e.substr(o)),o=e.indexOf(t);""!==e&&a.push(e)}),'["'+a.join('"]["')+'"]'},handleCopyClick(e){const t=this.convertPath(this.state.path);let s;if("value"===e.command)s="object"===typeof this.state.value?JSON.stringify(this.state.value,null,2):this.state.value.toString();else{let o="",i="";if("itemPath"===e.command){const e=t.split("]"),s=e[0].slice(1);i=e.slice(1).join("]"),o=`$item(${s}).$node["${this.node.name}"].json`}else"parameterPath"===e.command&&(i=t.split("]").slice(1).join("]"),o=`$node["${this.node.name}"].json`);i.startsWith("[")||i.startsWith(".")||!i||(i+="."),s=`{{ ${o+i} }}`}this.copyToClipboard(s)},refreshDataSize(){this.showData=!1;const e=this.getNodeInputData(this.node,this.runIndex,this.outputIndex),t=e.slice(0,this.maxDisplayItems||e.length).map(e=>e.json);this.dataSize=JSON.stringify(t).length,this.dataSize<this.MAX_DISPLAY_DATA_SIZE&&(this.showData=!0)}},watch:{node(e,t){this.outputIndex=0,this.maxDisplayItems=25,this.refreshDataSize(),"Binary"===this.displayMode&&(this.closeBinaryDataDisplay(),0===this.binaryData.length&&(this.displayMode="Table"))},jsonData(){this.refreshDataSize()},displayMode(e,t){this.closeBinaryDataDisplay(),this.$externalHooks().run("runData.displayModeChanged",{newValue:e,oldValue:t})},maxRunIndex(){this.runIndex=Math.min(this.runIndex,this.maxRunIndex)}},mounted(){}}),Lo=Mo,Ro=(s("4cb6"),Object(h["a"])(Lo,bo,ko,!1,null,null,null)),jo=Ro.exports,Bo=Object(y["a"])(k["a"],x["a"],N["a"]).extend({name:"DataDisplay",components:{NodeSettings:yo,RunData:jo},data(){return{basePath:this.$store.getters.getBaseUrl,showDocumentHelp:!1}},computed:{documentationUrl(){return this.nodeType?this.nodeType.documentationUrl&&this.nodeType.documentationUrl.startsWith("http")?this.nodeType.documentationUrl:"https://docs.n8n.io/nodes/"+(this.nodeType.documentationUrl||this.nodeType.name)+"?utm_source=n8n_app&utm_medium=node_settings_modal-credential_link&utm_campaign="+this.nodeType.name:""},node(){return this.$store.getters.activeNode},nodeType(){return this.node?this.$store.getters.nodeType(this.node.type):null}},watch:{node(e,t){e&&!t&&this.$externalHooks().run("dataDisplay.nodeTypeChanged",{nodeSubtitle:this.getNodeSubtitle(e,this.nodeType,this.getWorkflow())})}},methods:{valueChanged(e){this.$emit("valueChanged",e)},nodeTypeSelected(e){this.$emit("nodeTypeSelected",e)},close(e){e.target.className&&e.target.className.includes&&e.target.className.includes("close-on-click")&&(this.$externalHooks().run("dataDisplay.nodeEditingFinished"),this.showDocumentHelp=!1,this.$store.commit("setActiveNode",null))},onDocumentationUrlClick(){this.$externalHooks().run("dataDisplay.onDocumentationUrlClick",{nodeType:this.nodeType,documentationUrl:this.documentationUrl})}}}),Fo=Bo,Uo=(s("b47e"),Object(h["a"])(Fo,Hs,qs,!1,null,null,null)),zo=Uo.exports,Ho=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("ModalRoot",{attrs:{name:e.DUPLICATE_MODAL_KEY},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.modalName,o=e.active;return[s("DuplicateWorkflowDialog",{attrs:{isActive:o,modalName:t}})]}}])}),s("ModalRoot",{attrs:{name:e.TAGS_MANAGER_MODAL_KEY},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.modalName;return[s("TagsManager",{attrs:{modalName:t}})]}}])}),s("ModalRoot",{attrs:{name:e.WORKLOW_OPEN_MODAL_KEY},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.modalName;return[s("WorkflowOpen",{attrs:{modalName:t}})]}}])})],1)},qo=[],Jo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{attrs:{title:"Manage tags",name:e.modalName,eventBus:e.modalBus,size:"md"},on:{enter:e.onEnter},scopedSlots:e._u([{key:"content",fn:function(){return[s("el-row",[e.hasTags||e.isCreating?s("TagsView",{attrs:{isLoading:e.isLoading,tags:e.tags},on:{create:e.onCreate,update:e.onUpdate,delete:e.onDelete,disableCreate:e.onDisableCreate}}):s("NoTagsView",{on:{enableCreate:e.onEnableCreate}})],1)]},proxy:!0},{key:"footer",fn:function(t){var o=t.close;return[s("el-button",{attrs:{size:"small"},on:{click:o}},[e._v("Done")])]}}])})},Ko=[],Go=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.applyOperation(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancelOperation(t)}]}},[s("TagsTableHeader",{attrs:{search:e.search,disabled:e.isHeaderDisabled()},on:{searchChange:e.onSearchChange,createEnable:e.onCreateEnable}}),s("TagsTable",{ref:"tagsTable",attrs:{rows:e.rows,isLoading:e.isLoading,isSaving:e.isSaving,newName:e.newName},on:{newNameChange:e.onNewNameChange,updateEnable:e.onUpdateEnable,deleteEnable:e.onDeleteEnable,cancelOperation:e.cancelOperation,applyOperation:e.applyOperation}})],1)},Yo=[],Xo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-row",{staticClass:"tags-header"},[s("el-col",{attrs:{span:10}},[s("el-input",{attrs:{placeholder:"Search tags",value:e.search,disabled:e.disabled,clearable:"",maxlength:e.maxLength},on:{input:e.onSearchChange}},[s("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),s("el-col",{attrs:{span:14}},[s("el-button",{attrs:{disabled:e.disabled,plain:""},on:{click:e.onAddNew}},[s("font-awesome-icon",{attrs:{icon:"plus"}}),s("div",{staticClass:"next-icon-text"},[e._v("Add new")])],1)],1)],1)},Zo=[],Qo=o["default"].extend({props:{disabled:{default:!1},search:{default:""}},data(){return{maxLength:_["o"]}},methods:{onAddNew(){this.$emit("createEnable")},onSearchChange(e){this.$emit("searchChange",e)}}}),ei=Qo,ti=(s("1017"),Object(h["a"])(ei,Xo,Zo,!1,null,"2ed5763b",null)),si=ti.exports,oi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"table",attrs:{stripe:"","max-height":"450","empty-text":"No matching tags exist",data:e.rows,"span-method":e.getSpan,"row-class-name":e.getRowClasses}},[s("el-table-column",{attrs:{label:"Name"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{key:t.row.id,staticClass:"name",on:{keydown:function(e){e.stopPropagation()}}},[s("transition",{attrs:{name:"fade",mode:"out-in"}},[t.row.create||t.row.update?s("el-input",{ref:"nameInput",attrs:{value:e.newName,maxlength:e.maxLength},on:{input:e.onNewNameChange}}):t.row.delete?s("span",[s("span",[e._v("Are you sure you want to delete this tag?")]),s("input",{ref:"deleteHiddenInput",staticClass:"hidden"})]):s("span",{class:{disabled:t.row.disable}},[e._v("\n\t\t\t\t\t\t"+e._s(t.row.tag.name)+"\n\t\t\t\t\t")])],1)],1)]}}])}),s("el-table-column",{attrs:{label:"Usage",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("transition",{attrs:{name:"fade",mode:"out-in"}},[t.row.create||t.row.delete?e._e():s("div",{class:{disabled:t.row.disable}},[e._v("\n\t\t\t\t\t\t"+e._s(t.row.usage)+"\n\t\t\t\t\t")])])]}}])}),s("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[s("transition",{attrs:{name:"fade",mode:"out-in"}},[t.row.create?s("div",{staticClass:"ops"},[s("el-button",{attrs:{title:"Cancel",size:"small",plain:"",disabled:e.isSaving},on:{click:function(t){return t.stopPropagation(),e.cancel(t)}}},[e._v("Cancel")]),s("el-button",{attrs:{title:"Create Tag",size:"small",loading:e.isSaving},on:{click:function(t){return t.stopPropagation(),e.apply(t)}}},[e._v("\n\t\t\t\t\t\tCreate tag\n\t\t\t\t\t")])],1):t.row.update?s("div",{staticClass:"ops"},[s("el-button",{attrs:{title:"Cancel",size:"small",plain:"",disabled:e.isSaving},on:{click:function(t){return t.stopPropagation(),e.cancel(t)}}},[e._v("Cancel")]),s("el-button",{attrs:{title:"Save Tag",size:"small",loading:e.isSaving},on:{click:function(t){return t.stopPropagation(),e.apply(t)}}},[e._v("Save changes")])],1):t.row.delete?s("div",{staticClass:"ops"},[s("el-button",{attrs:{title:"Cancel",size:"small",plain:"",disabled:e.isSaving},on:{click:function(t){return t.stopPropagation(),e.cancel(t)}}},[e._v("Cancel")]),s("el-button",{attrs:{title:"Delete Tag",size:"small",loading:e.isSaving},on:{click:function(t){return t.stopPropagation(),e.apply(t)}}},[e._v("Delete tag")])],1):t.row.disable?e._e():s("div",{staticClass:"ops main"},[s("el-button",{attrs:{title:"Edit Tag",icon:"el-icon-edit",circle:""},on:{click:function(s){return s.stopPropagation(),e.enableUpdate(t.row)}}}),s("el-button",{attrs:{title:"Delete Tag",icon:"el-icon-delete",circle:""},on:{click:function(s){return s.stopPropagation(),e.enableDelete(t.row)}}})],1)])]}}])})],1)},ii=[];const ai=350,ni=100;var ri=o["default"].extend({name:"TagsTable",props:["rows","isLoading","newName","isSaving"],data(){return{maxLength:_["o"]}},mounted(){1===this.$props.rows.length&&this.$props.rows[0].create&&this.focusOnInput()},methods:{getRowClasses:({row:e})=>e.disable?"disabled":"",getSpan({row:e,columnIndex:t}){return 0===t&&e.tag&&e.delete?[1,2]:1===t&&e.tag&&e.delete?[0,0]:1},enableUpdate(e){e.tag&&(this.$emit("updateEnable",e.tag.id),this.$emit("newNameChange",e.tag.name),this.focusOnInput())},enableDelete(e){e.tag&&(this.$emit("deleteEnable",e.tag.id),this.focusOnDelete())},cancel(){this.$emit("cancelOperation")},apply(){this.$emit("applyOperation")},onNewNameChange(e){this.$emit("newNameChange",e)},focusOnInput(){setTimeout(()=>{const e=this.$refs.nameInput;e&&e.focus&&e.focus()},ai)},focusOnDelete(){setTimeout(()=>{const e=this.$refs.deleteHiddenInput;e&&e.focus&&e.focus()},ni)},focusOnCreate(){this.$refs.table.$refs.bodyWrapper.scrollTop=0,this.focusOnInput()}},watch:{rows(e){e&&e[0]&&e[0].create&&this.focusOnCreate()}}}),li=ri,ci=(s("42b8"),Object(h["a"])(li,oi,ii,!1,null,"749681d8",null)),di=ci.exports;const ui=(e,t)=>e.toLowerCase().trim().includes(t.toLowerCase().trim()),pi=e=>e&&e>0?`${e} workflow${e>1?"s":""}`:"Not being used";var hi=o["default"].extend({components:{TagsTableHeader:si,TagsTable:di},name:"TagsView",props:["tags","isLoading"],data(){return{createEnabled:!1,deleteId:"",updateId:"",search:"",newName:"",stickyIds:new Set,isSaving:!1}},computed:{isCreateEnabled(){return 0===(this.$props.tags||[]).length||this.$data.createEnabled},rows(){const e=this.isCreateEnabled||this.$data.updateId||this.$data.deleteId,t=(this.$props.tags||[]).filter(e=>this.stickyIds.has(e.id)||ui(e.name,this.$data.search)).map(t=>({tag:t,usage:pi(t.usageCount),disable:e&&t.id!==this.deleteId&&t.id!==this.$data.updateId,update:e&&t.id===this.$data.updateId,delete:e&&t.id===this.$data.deleteId}));return this.isCreateEnabled?[{create:!0},...t]:t}},methods:{onNewNameChange(e){this.newName=e},onSearchChange(e){this.$data.stickyIds.clear(),this.$data.search=e},isHeaderDisabled(){return this.$props.isLoading||!!(this.isCreateEnabled||this.$data.updateId||this.$data.deleteId)},onUpdateEnable(e){this.updateId=e},disableUpdate(){this.updateId="",this.newName=""},updateTag(){this.$data.isSaving=!0;const e=this.newName.trim(),t=e=>{this.$data.isSaving=!1,e&&(this.stickyIds.add(this.updateId),this.disableUpdate())};this.$emit("update",this.updateId,e,t)},onDeleteEnable(e){this.deleteId=e},disableDelete(){this.deleteId=""},deleteTag(){this.$data.isSaving=!0;const e=e=>{e&&this.disableDelete(),this.$data.isSaving=!1};this.$emit("delete",this.deleteId,e)},onCreateEnable(){this.$data.createEnabled=!0,this.$data.newName=""},disableCreate(){this.$data.createEnabled=!1,this.$emit("disableCreate")},createTag(){this.$data.isSaving=!0;const e=this.$data.newName.trim(),t=(e,t)=>{e&&(this.stickyIds.add(e.id),this.disableCreate()),this.$data.isSaving=!1};this.$emit("create",e,t)},applyOperation(){this.$data.isSaving||(this.isCreateEnabled?this.createTag():this.$data.updateId?this.updateTag():this.$data.deleteId&&this.deleteTag())},cancelOperation(){this.$data.isSaving||(this.isCreateEnabled?this.disableCreate():this.$data.updateId?this.disableUpdate():this.$data.deleteId&&this.disableDelete())}}}),mi=hi,fi=Object(h["a"])(mi,Go,Yo,!1,null,null,null),gi=fi.exports,wi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("el-col",{staticClass:"notags",attrs:{span:16}},[s("div",{staticClass:"icon"},[e._v("🗄️")]),s("div",[s("div",{staticClass:"headline"},[e._v("Ready to organize your workflows?")]),s("div",{staticClass:"description"},[e._v("\n\t\t\t\tWith workflow tags, you're free to create the perfect tagging system for\n\t\t\t\tyour flows\n\t\t\t")])]),s("el-button",{ref:"create",on:{click:function(t){return e.$emit("enableCreate")}}},[e._v(" Create a tag ")])],1)],1)},vi=[],yi=o["default"].extend({name:"NoTagsView"}),bi=yi,ki=(s("3a3b"),Object(h["a"])(bi,wi,vi,!1,null,"473aea60",null)),xi=ki.exports,Ci=function(){var e,t=this,s=t.$createElement,o=t._self._c||s;return t.dialogVisible?o("div",[o("el-dialog",{class:(e={"dialog-wrapper":!0},e[t.size]=!0,e),attrs:{visible:t.dialogVisible,"before-close":t.closeDialog,title:t.title,width:t.width,"append-to-body":""},scopedSlots:t._u([{key:"title",fn:function(){return[t._t("header")]},proxy:!0}],null,!0)},[o("div",{staticClass:"modal-content",on:{keydown:[function(e){e.stopPropagation()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleEnter(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.closeDialog(e)}]}},[t._t("content")],2),o("el-row",{staticClass:"modal-footer"},[t._t("footer",null,{close:t.closeDialog})],2)],1)],1):t._e()},$i=[];const Ni={xl:"80%",m:"50%",default:"50%"};var Ei=o["default"].extend({name:"Modal",props:["name","title","eventBus","size"],mounted(){window.addEventListener("keydown",this.onWindowKeydown),this.$props.eventBus&&this.$props.eventBus.$on("close",()=>{this.closeDialog()});const e=document.activeElement;e&&e.blur()},beforeDestroy(){window.removeEventListener("keydown",this.onWindowKeydown)},methods:{onWindowKeydown(e){this.isActive&&e&&13===e.keyCode&&this.handleEnter()},handleEnter(){this.isActive&&this.$emit("enter")},closeDialog(){this.$store.commit("ui/closeTopModal")}},computed:{width(){return this.$props.size?Ni[this.$props.size]:Ni.default},isActive(){return this.$store.getters["ui/isModalActive"](this.$props.name)},dialogVisible(){return this.$store.getters["ui/isModalOpen"](this.$props.name)}}}),Ti=Ei,Di=(s("30db"),Object(h["a"])(Ti,Ci,$i,!1,null,null,null)),_i=Di.exports,Oi=Object(y["a"])(C["a"]).extend({name:"TagsManager",created(){this.$store.dispatch("tags/fetchAll",{force:!0,withUsageCount:!0})},props:["modalName"],data(){const e=this.$store.getters["tags/allTags"].map(e=>e.id);return{tagIds:e,isCreating:!1,modalBus:new o["default"]}},components:{TagsView:gi,NoTagsView:xi,Modal:_i},computed:{...Object(b["b"])("tags",["isLoading"]),tags(){return this.$data.tagIds.map(e=>this.$store.getters["tags/getTagById"](e)).filter(Boolean)},hasTags(){return this.tags.length>0}},methods:{onEnableCreate(){this.$data.isCreating=!0},onDisableCreate(){this.$data.isCreating=!1},async onCreate(e,t){try{if(!e)throw new Error("Tag name cannot be empty");const s=await this.$store.dispatch("tags/create",e);this.$data.tagIds=[s.id].concat(this.$data.tagIds),t(s)}catch(s){const o=escape(e);this.$showError(s,"New tag was not created",`A problem occurred when trying to create the "${o}" tag`),t(null,s)}},async onUpdate(e,t,s){const o=this.$store.getters["tags/getTagById"](e),i=o.name;try{if(!t)throw new Error("Tag name cannot be empty");if(t===i)return void s(!0);const o=await this.$store.dispatch("tags/rename",{id:e,name:t});s(!!o);const a=escape(t),n=escape(i);this.$showMessage({title:"Tag was updated",message:`The "${n}" tag was successfully updated to "${a}"`,type:"success"})}catch(a){const e=escape(i);this.$showError(a,"Tag was not updated",`A problem occurred when trying to update the "${e}" tag`),s(!1,a)}},async onDelete(e,t){const s=this.$store.getters["tags/getTagById"](e),o=s.name;try{const s=await this.$store.dispatch("tags/delete",e);if(!s)throw new Error("Could not delete tag");this.$data.tagIds=this.$data.tagIds.filter(t=>t!==e),t(s);const i=escape(o);this.$showMessage({title:"Tag was deleted",message:`The "${i}" tag was successfully deleted from your tag collection`,type:"success"})}catch(i){const e=escape(o);this.$showError(i,"Tag was not deleted",`A problem occurred when trying to delete the "${e}" tag`),t(!1,i)}},onEnter(){this.isLoading||(this.hasTags?this.modalBus.$emit("close"):this.onEnableCreate())}}}),Si=Oi,Ii=(s("fba0"),Object(h["a"])(Si,Jo,Ko,!1,null,"17a9b732",null)),Ai=Ii.exports,Pi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{attrs:{name:e.modalName,eventBus:e.modalBus,size:"sm",title:"Duplicate Workflow"},on:{enter:e.save},scopedSlots:e._u([{key:"content",fn:function(){return[s("el-row",[s("el-input",{ref:"nameInput",attrs:{placeholder:"Enter workflow name",maxlength:e.MAX_WORKFLOW_NAME_LENGTH},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),s("el-row",[s("TagsDropdown",{ref:"dropdown",attrs:{createEnabled:!0,currentTagIds:e.currentTagIds,eventBus:e.dropdownBus,placeholder:"Choose or create a tag"},on:{blur:e.onTagsBlur,esc:e.onTagsEsc,update:e.onTagsUpdate}})],1)]},proxy:!0},{key:"footer",fn:function(t){var o=t.close;return[s("el-button",{attrs:{size:"small",loading:e.isSaving},on:{click:e.save}},[e._v("Save")]),s("el-button",{attrs:{size:"small",disabled:e.isSaving},on:{click:o}},[e._v("Cancel")])]}}])})},Vi=[],Wi=Object(y["a"])(C["a"],N["a"]).extend({components:{TagsDropdown:Ie,Modal:_i},name:"DuplicateWorkflow",props:["dialogVisible","modalName","isActive"],data(){const e=this.$store.getters["workflowTags"];return{name:"",currentTagIds:e,isSaving:!1,modalBus:new o["default"],dropdownBus:new o["default"],MAX_WORKFLOW_NAME_LENGTH:_["p"],prevTagIds:e}},async mounted(){this.$data.name=await this.$store.dispatch("workflows/getDuplicateCurrentWorkflowName"),this.$nextTick(()=>this.focusOnNameInput())},watch:{isActive(e){e&&this.focusOnSelect()}},methods:{focusOnSelect(){this.dropdownBus.$emit("focus")},focusOnNameInput(){const e=this.$refs.nameInput;e&&e.focus&&e.focus()},onTagsBlur(){this.prevTagIds=this.currentTagIds},onTagsEsc(){this.currentTagIds=this.prevTagIds},onTagsUpdate(e){this.currentTagIds=e},async save(){const e=this.name.trim();if(!e)return void this.$showMessage({title:"Name missing",message:"Please enter a name.",type:"error"});this.$data.isSaving=!0;const t=await this.saveAsNewWorkflow({name:e,tags:this.currentTagIds});t&&this.closeDialog(),this.$data.isSaving=!1},closeDialog(){this.modalBus.$emit("close")}}}),Mi=Wi,Li=Object(h["a"])(Mi,Pi,Vi,!1,null,null,null),Ri=Li.exports,ji=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{attrs:{name:e.modalName,size:"xl"},scopedSlots:e._u([{key:"header",fn:function(){return[s("div",{staticClass:"workflows-header"},[s("div",{staticClass:"title"},[s("h1",[e._v("Open Workflow")])]),s("div",{staticClass:"tags-filter"},[s("TagsDropdown",{attrs:{placeholder:"Filter by tags...",currentTagIds:e.filterTagIds,createEnabled:!1},on:{update:e.updateTagsFilter,esc:e.onTagsFilterEsc,blur:e.onTagsFilterBlur}})],1),s("div",{staticClass:"search-filter"},[s("el-input",{ref:"inputFieldFilter",attrs:{placeholder:"Search workflows..."},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}},[s("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1)])]},proxy:!0},{key:"content",fn:function(){return[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isDataLoading,expression:"isDataLoading"}],staticClass:"search-table",attrs:{data:e.filteredWorkflows,stripe:"","default-sort":{prop:"updatedAt",order:"descending"}},on:{"cell-click":e.openWorkflow}},[s("el-table-column",{attrs:{property:"name",label:"Name","class-name":"clickable",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{key:t.row.id},[s("span",{staticClass:"name"},[e._v(e._s(t.row.name))]),s("TagsContainer",{staticClass:"hidden-sm-and-down",attrs:{tagIds:e.getIds(t.row.tags),limit:3,clickable:!0,hoverable:!0},on:{click:e.onTagClick}})],1)]}}])}),s("el-table-column",{attrs:{property:"createdAt",label:"Created","class-name":"clickable",width:"155",sortable:""}}),s("el-table-column",{attrs:{property:"updatedAt",label:"Updated","class-name":"clickable",width:"155",sortable:""}}),s("el-table-column",{attrs:{label:"Active",width:"75"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("workflow-activator",{attrs:{"workflow-active":t.row.active,"workflow-id":t.row.id},on:{workflowActiveChanged:e.workflowActiveChanged}})]}}])})],1)]},proxy:!0}])})},Bi=[],Fi=Object(y["a"])(he["a"],me["a"],C["a"],N["a"]).extend({name:"WorkflowOpen",components:{WorkflowActivator:ve,TagsContainer:ie,TagsDropdown:Ie,Modal:_i},props:["modalName"],data(){return{filterText:"",isDataLoading:!1,workflows:[],filterTagIds:[],prevFilterTagIds:[]}},computed:{filteredWorkflows(){return this.workflows.filter(e=>!(this.filterText&&!e.name.toLowerCase().includes(this.filterText.toLowerCase()))&&(0===this.filterTagIds.length||!(!e.tags||0===e.tags.length)&&this.filterTagIds.reduce((t,s)=>t&&!!e.tags.find(e=>e.id===s),!0)))}},mounted(){this.filterText="",this.filterTagIds=[],this.openDialog(),o["default"].nextTick(()=>{this.$refs.inputFieldFilter.focus()})},methods:{getIds(e){return(e||[]).map(e=>e.id)},updateTagsFilter(e){this.filterTagIds=e},onTagClick(e){"count"===e||this.filterTagIds.includes(e)||this.filterTagIds.push(e)},async openWorkflow(e,t){if("Active"!==t.label){const t=this.$store.getters.workflowId;if(e.id===t)return void this.$showMessage({title:"Already open",message:"This is the current workflow",type:"error",duration:1500});const s=this.$store.getters.getStateIsDirty;if(s){const t=await this.confirmMessage("When you switch workflows your current workflow changes will be lost.","Save your Changes?","warning","Yes, switch workflows and forget changes");if(!1===t)return;this.$store.commit("setStateDirty",!1),this.$router.push({name:"NodeViewExisting",params:{name:e.id}})}else this.$router.push({name:"NodeViewExisting",params:{name:e.id}});this.$store.commit("ui/closeTopModal")}},openDialog(){this.isDataLoading=!0,this.restApi().getWorkflows().then(e=>{this.workflows=e,this.workflows.forEach(e=>{e.createdAt=this.convertToDisplayDate(e.createdAt),e.updatedAt=this.convertToDisplayDate(e.updatedAt)}),this.isDataLoading=!1}).catch(e=>{this.$showError(e,"Problem loading workflows","There was a problem loading the workflows:"),this.isDataLoading=!1})},workflowActiveChanged(e){for(const t of this.workflows)t.id===e.id&&(t.active=e.active)},onTagsFilterBlur(){this.prevFilterTagIds=this.filterTagIds},onTagsFilterEsc(){this.filterTagIds=this.prevFilterTagIds}}}),Ui=Fi,zi=(s("3f8a"),Object(h["a"])(Ui,ji,Bi,!1,null,"2f9206f2",null)),Hi=zi.exports,qi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isOpen(e.name)?s("div",[e._t("default",null,{modalName:e.name,active:e.isActive(e.name)})],2):e._e()},Ji=[],Ki=o["default"].extend({name:"ModalRoot",props:["name"],methods:{isActive(e){return this.$store.getters["ui/isModalActive"](e)},isOpen(e){return this.$store.getters["ui/isModalOpen"](e)}}}),Gi=Ki,Yi=Object(h["a"])(Gi,qi,Ji,!1,null,null,null),Xi=Yi.exports,Zi=o["default"].extend({name:"Modals",components:{TagsManager:Ai,DuplicateWorkflowDialog:Ri,WorkflowOpen:Hi,ModalRoot:Xi},data:()=>({DUPLICATE_MODAL_KEY:_["i"],TAGS_MANAGER_MODAL_KEY:_["w"],WORKLOW_OPEN_MODAL_KEY:_["C"]})}),Qi=Zi,ea=Object(h["a"])(Qi,Ho,qo,!1,null,null,null),ta=ea.exports,sa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"node-wrapper",style:e.nodePosition},[s("div",{directives:[{name:"touch",rawName:"v-touch:start",value:e.touchStart,expression:"touchStart",arg:"start"},{name:"touch",rawName:"v-touch:end",value:e.touchEnd,expression:"touchEnd",arg:"end"}],ref:e.data.name,staticClass:"node-default",class:e.nodeClass,style:e.nodeStyle,on:{dblclick:e.setNodeActive,click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.mouseLeftClick(t)}}},[e.hasIssues?s("div",{staticClass:"node-info-icon node-issues"},[s("el-tooltip",{attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.nodeIssues)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}})],1)],1):s("el-badge",{staticClass:"node-info-icon data-count",attrs:{hidden:0===e.workflowDataItems,value:e.workflowDataItems}}),s("div",{staticClass:"node-executing-info",attrs:{title:"Node is executing"}},[s("font-awesome-icon",{attrs:{icon:"sync-alt",spin:""}})],1),e.isReadOnly?e._e():s("div",{staticClass:"node-options no-select-on-click"},[s("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.deleteNode,expression:"deleteNode",arg:"tap"}],staticClass:"option",attrs:{title:"Delete Node"}},[s("font-awesome-icon",{attrs:{icon:"trash"}})],1),s("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.disableNode,expression:"disableNode",arg:"tap"}],staticClass:"option",attrs:{title:"Activate/Deactivate Node"}},[s("font-awesome-icon",{attrs:{icon:e.nodeDisabledIcon}})],1),s("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.duplicateNode,expression:"duplicateNode",arg:"tap"}],staticClass:"option",attrs:{title:"Duplicate Node"}},[s("font-awesome-icon",{attrs:{icon:"clone"}})],1),e.isReadOnly?e._e():s("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.setNodeActive,expression:"setNodeActive",arg:"tap"}],staticClass:"option touch",attrs:{title:"Edit Node"}},[s("font-awesome-icon",{staticClass:"execute-icon",attrs:{icon:"cog"}})],1),e.isReadOnly||e.workflowRunning?e._e():s("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.executeNode,expression:"executeNode",arg:"tap"}],staticClass:"option",attrs:{title:"Execute Node"}},[s("font-awesome-icon",{staticClass:"execute-icon",attrs:{icon:"play-circle"}})],1)]),s("NodeIcon",{staticClass:"node-icon",style:e.nodeIconStyle,attrs:{nodeType:e.nodeType,size:"60",shrink:!0}})],1),s("div",{staticClass:"node-description"},[s("div",{staticClass:"node-name",attrs:{title:e.data.name}},[e._v("\n\t\t\t"+e._s(e.data.name)+"\n\t\t")]),void 0!==e.nodeSubtitle?s("div",{staticClass:"node-subtitle",attrs:{title:e.nodeSubtitle}},[e._v("\n\t\t\t"+e._s(e.nodeSubtitle)+"\n\t\t")]):e._e()])])},oa=[];const ia=Object(y["a"])(Rs,js).extend({mounted(){null!==this.data&&this.__addNode(this.data)},computed:{data(){return this.$store.getters.nodeByName(this.name)},hasIssues(){return!(void 0===this.data.issues||!Object.keys(this.data.issues).length)},nodeName(){return _["q"]+this.nodeIndex},nodeIndex(){return this.$store.getters.getNodeIndex(this.data.name).toString()},nodePosition(){const e={left:this.data.position[0]+"px",top:this.data.position[1]+"px"};return e},nodeStyle(){const e={"border-color":this.data.color};return e}},props:["name","nodeId","instance","isReadOnly"],methods:{__addNode(e){let t=this.$store.getters.nodeType(e.type);const s={main:{input:{uuid:"-input",maxConnections:-1,endpoint:"Rectangle",endpointStyle:{width:t&&t.outputs.length>2?9:10,height:t&&t.outputs.length>2?18:24,fill:"#777",stroke:"#777",lineWidth:0},dragAllowedWhenFull:!0},output:{uuid:"-output",maxConnections:-1,endpoint:"Dot",endpointStyle:{radius:t&&t.outputs.length>2?7:11,fill:"#555",outlineStroke:"none"},dragAllowedWhenFull:!0}}};t||(t=this.$store.getters.nodeType("n8n-nodes-base.noOp"));const o={input:{1:["Left"],2:[[0,.3,-1,0],[0,.7,-1,0]],3:[[0,.25,-1,0],[0,.5,-1,0],[0,.75,-1,0]],4:[[0,.2,-1,0],[0,.4,-1,0],[0,.6,-1,0],[0,.8,-1,0]]},output:{1:["Right"],2:[[1,.3,1,0],[1,.7,1,0]],3:[[1,.25,1,0],[1,.5,1,0],[1,.75,1,0]],4:[[1,.2,1,0],[1,.4,1,0],[1,.6,1,0],[1,.8,1,0]]}};let i,a,n,r,l={};t.inputs.forEach(e=>{a=s[e].input,l.hasOwnProperty(e)?l[e]++:l[e]=0,i=l[e],n=o.input[t.inputs.length][i],r={uuid:""+this.nodeIndex+a.uuid+i,anchor:n,maxConnections:a.maxConnections,endpoint:a.endpoint,endpointStyle:a.endpointStyle,isSource:!1,isTarget:!this.isReadOnly,parameters:{nodeIndex:this.nodeIndex,type:e,index:i},dragAllowedWhenFull:a.dragAllowedWhenFull,dropOptions:{tolerance:"touch",hoverClass:"dropHover"}},t.inputNames&&(r.overlays=[["Label",{id:"input-name-label",location:[-2,.5],label:t.inputNames[i],cssClass:"node-input-endpoint-label",visible:!0}]]),this.instance.addEndpoint(this.nodeName,r)}),l={},t.outputs.forEach(e=>{a=s[e].output,l.hasOwnProperty(e)?l[e]++:l[e]=0,i=l[e],n=o.output[t.outputs.length][i],r={uuid:""+this.nodeIndex+a.uuid+i,anchor:n,maxConnections:a.maxConnections,endpoint:a.endpoint,endpointStyle:a.endpointStyle,isSource:!this.isReadOnly,isTarget:!1,parameters:{nodeIndex:this.nodeIndex,type:e,index:i},dragAllowedWhenFull:a.dragAllowedWhenFull,dragProxy:["Rectangle",{width:1,height:1,strokeWidth:0}]},t.outputNames&&(r.overlays=[["Label",{id:"output-name-label",location:[1.75,.5],label:t.outputNames[i],cssClass:"node-output-endpoint-label",visible:!0}]]),this.instance.addEndpoint(this.nodeName,r)}),this.instance.draggable(this.nodeName,{grid:[10,10],start:e=>!0!==this.isReadOnly&&(e.e&&!this.$store.getters.isNodeSelected(this.data.name)&&(this.instance.clearDragSelection(),this.$store.commit("resetSelectedNodes")),this.$store.commit("addActiveAction","dragActive"),!0),stop:e=>{if(this.$store.getters.isActionActive("dragActive")){const e=this.$store.getters.getSelectedNodes.slice(),t=e.map(e=>e.name);let s;t.includes(this.data.name)||e.push(this.data),e.forEach(e=>{const t="node-"+this.getNodeIndex(e.name),o=document.getElementById(t);if(null===o)return;s=[parseInt(o.style.left.slice(0,-2),10),parseInt(o.style.top.slice(0,-2),10)];const i={name:e.name,properties:{position:s}};this.$store.commit("updateNodeProperties",i)})}},filter:".node-description, .node-description .node-name, .node-description .node-subtitle"})},touchEnd(e){this.isTouchDevice&&this.$store.getters.isActionActive("dragActive")&&this.$store.commit("removeActiveAction","dragActive")},mouseLeftClick(e){const t=e.path||e.composedPath&&e.composedPath();for(let s=0;s<t.length;s++)if(t[s].className&&"string"===typeof t[s].className&&t[s].className.includes("no-select-on-click"))return;this.isTouchDevice||(this.$store.getters.isActionActive("dragActive")?this.$store.commit("removeActiveAction","dragActive"):(!1===this.isCtrlKeyPressed(e)&&this.$emit("deselectAllNodes"),this.$store.getters.isNodeSelected(this.data.name)?this.$emit("deselectNode",this.name):this.$emit("nodeSelected",this.name)))}}});var aa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"node-icon-wrapper",class:{shrink:e.isSvgIcon&&e.shrink,full:!e.shrink},style:e.iconStyleData},[null!==e.nodeIconData?s("div",{staticClass:"icon"},["file"===e.nodeIconData.type?s("img",{staticStyle:{"max-width":"100%","max-height":"100%"},attrs:{src:e.nodeIconData.path}}):"fa"===e.nodeIconData.type?s("font-awesome-icon",{attrs:{icon:e.nodeIconData.path}}):e._e()],1):s("div",{staticClass:"node-icon-placeholder"},[e._v("\n\t\t"+e._s(null!==e.nodeType?e.nodeType.displayName.charAt(0):"?")+"\n\t")])])},na=[],ra=o["default"].extend({name:"NodeIcon",props:["nodeType","size","shrink"],computed:{iconStyleData(){if(!this.size)return{};const e=parseInt(this.size,10);return{width:e+"px",height:e+"px","font-size":Math.floor(.6*parseInt(this.size,10))+"px","line-height":e+"px","border-radius":Math.ceil(e/2)+"px"}},isSvgIcon(){return!(!this.nodeIconData||"file"!==this.nodeIconData.type||"svg"!==this.nodeIconData.fileExtension)},nodeIconData(){if(null===this.nodeType)return null;const e=this.$store.getters.getRestUrl;if(this.nodeType.icon){let t,s;[t,s]=this.nodeType.icon.split(":");const o={type:t,path:s};return"file"===t&&(o.path=e+"/node-icon/"+this.nodeType.name,o.fileExtension=s.split(".").slice(-1).join()),o}return null}}}),la=ra,ca=(s("4a15"),Object(h["a"])(la,aa,na,!1,null,null,null)),da=ca.exports,ua=Object(y["a"])(k["a"],ia,x["a"],N["a"]).extend({name:"Node",components:{NodeIcon:da},computed:{workflowDataItems(){const e=this.$store.getters.getWorkflowResultDataByNodeName(this.data.name);return null===e?0:e.length},isExecuting(){return this.$store.getters.executingNode===this.data.name},nodeIconStyle(){return{color:this.data.disabled?"#ccc":this.data.color}},nodeType(){return this.$store.getters.nodeType(this.data.type)},nodeClass(){const e=[];return this.data.disabled&&e.push("disabled"),this.isExecuting&&e.push("executing"),0!==this.workflowDataItems&&e.push("has-data"),this.hasIssues&&e.push("has-issues"),this.isTouchDevice&&e.push("is-touch-device"),this.isTouchActive&&e.push("touch-active"),e},nodeIssues(){if(void 0===this.data.issues)return"";const e=Ut["NodeHelpers"].nodeIssuesToString(this.data.issues,this.data);return"Issues:<br />&nbsp;&nbsp;- "+e.join("<br />&nbsp;&nbsp;- ")},nodeDisabledIcon(){return!1===this.data.disabled?"pause":"play"},nodeSubtitle(){return this.getNodeSubtitle(this.data,this.nodeType,this.workflow)},workflowRunning(){return this.$store.getters.isActionActive("workflowRunning")},workflow(){return this.getWorkflow()}},data(){return{isTouchActive:!1}},methods:{disableNode(){this.disableNodes([this.data])},executeNode(){this.$emit("runWorkflow",this.data.name,"Node.executeNode")},deleteNode(){this.$externalHooks().run("node.deleteNode",{node:this.data}),o["default"].nextTick(()=>{this.$emit("removeNode",this.data.name)})},duplicateNode(){o["default"].nextTick(()=>{this.$emit("duplicateNode",this.data.name)})},setNodeActive(){this.$store.commit("setActiveNode",this.data.name)},touchStart(){!0===this.isTouchDevice&&!1===this.isMacOs&&!1===this.isTouchActive&&(this.isTouchActive=!0,setTimeout(()=>{this.isTouchActive=!1},2e3))}}}),pa=ua,ha=(s("470f"),s("3a3bc"),Object(h["a"])(pa,sa,oa,!1,null,null,null)),ma=ha.exports,fa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("SlideTransition",[e.active?s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],staticClass:"node-creator"},[s("MainPanel",{attrs:{categorizedItems:e.categorizedItems,categoriesWithNodes:e.categoriesWithNodes,searchItems:e.searchItems},on:{nodeTypeSelected:e.nodeTypeSelected}})],1):e._e()])],1)},ga=[],wa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"slide"}},[e._t("default")],2)},va=[],ya=o["default"].extend({name:"SlideTransition"}),ba=ya,ka=(s("07f7"),Object(h["a"])(ba,wa,va,!1,null,"7c3ccab7",null)),xa=ka.exports,Ca=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container",on:{click:e.onClickInside}},[s("SlideTransition",[e.activeSubcategory?s("SubcategoryPanel",{attrs:{elements:e.subcategorizedNodes,title:e.activeSubcategory.properties.subcategory,activeIndex:e.activeSubcategoryIndex},on:{close:e.onSubcategoryClose,selected:e.selected}}):e._e()],1),s("div",{staticClass:"main-panel"},[s("SearchBar",{attrs:{eventBus:e.searchEventBus},nativeOn:{keydown:function(t){return e.nodeFilterKeyDown(t)}},model:{value:e.nodeFilter,callback:function(t){e.nodeFilter=t},expression:"nodeFilter"}}),s("div",{staticClass:"type-selector"},[s("el-tabs",{attrs:{stretch:""},model:{value:e.selectedType,callback:function(t){e.selectedType=t},expression:"selectedType"}},[s("el-tab-pane",{attrs:{label:"All",name:e.ALL_NODE_FILTER}}),s("el-tab-pane",{attrs:{label:"Regular",name:e.REGULAR_NODE_FILTER}}),s("el-tab-pane",{attrs:{label:"Trigger",name:e.TRIGGER_NODE_FILTER}})],1)],1),0===e.searchFilter.length?s("div",{staticClass:"scrollable"},[s("ItemIterator",{attrs:{elements:e.categorized,disabled:!!e.activeSubcategory,activeIndex:e.activeIndex,transitionsEnabled:!0},on:{selected:e.selected}})],1):e.filteredNodeTypes.length>0?s("div",{staticClass:"scrollable"},[s("ItemIterator",{attrs:{elements:e.filteredNodeTypes,activeIndex:e.activeIndex},on:{selected:e.selected}})],1):s("NoResults",{on:{nodeTypeSelected:e.nodeTypeSelected}})],1)],1)},$a=[],Na=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s(e.transitionsEnabled?"transition-group":"div",{tag:"div",attrs:{name:"accordion"},on:{"before-enter":e.beforeEnter,enter:e.enter,"before-leave":e.beforeLeave,leave:e.leave}},e._l(e.elements,(function(t,o){return s("div",{key:t.key,class:t.type},[s("CreatorItem",{attrs:{item:t,active:e.activeIndex===o&&!e.disabled,clickable:!e.disabled,lastNode:o===e.elements.length-1||"node"!==e.elements[o+1].type},on:{click:function(){return e.selected(t)}}})],1)})),0)],1)},Ea=[],Ta=function(e,t){var s=t._c;return s("div",{class:{container:!0,clickable:t.props.clickable,active:t.props.active},on:{click:t.listeners["click"]}},["category"===t.props.item.type?s("CategoryItem",{attrs:{item:t.props.item}}):"subcategory"===t.props.item.type?s("SubcategoryItem",{attrs:{item:t.props.item}}):"node"===t.props.item.type?s("NodeItem",{attrs:{nodeType:t.props.item.properties.nodeType,bordered:!t.props.lastNode}}):t._e()],1)},Da=[],_a=function(e,t){var s,o=t._c;return o("div",{class:(s={},s[t.$style["node-item"]]=!0,s[t.$style.bordered]=t.props.bordered,s)},[o("NodeIcon",{class:t.$style["node-icon"],style:{color:t.props.nodeType.defaults.color},attrs:{nodeType:t.props.nodeType}}),o("div",[o("div",{class:t.$style.details},[o("span",{class:t.$style.name},[t._v(t._s(t.props.nodeType.displayName))]),o("span",{class:t.$style["trigger-icon"]},[t.$options.isTrigger(t.props.nodeType)?o("TriggerIcon"):t._e()],1)]),o("div",{class:t.$style.description},[t._v("\n\t\t\t"+t._s(t.props.nodeType.description)+"\n\t\t")])])],1)},Oa=[],Sa=function(e,t){var s=t._c;return s("span",{class:t.$style.trigger},[s("svg",{attrs:{width:"36px",height:"36px",viewBox:"0 0 36 36",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[s("title",[t._v("Trigger node")]),s("g",{attrs:{id:"/integrations-(V1-feature)",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[s("g",{attrs:{id:"Individual-node-view",transform:"translate(-304.000000, -137.000000)","fill-rule":"nonzero"}},[s("g",{attrs:{id:"left-column",transform:"translate(120.000000, 131.000000)"}},[s("g",{attrs:{id:"trigger-badge",transform:"translate(178.000000, 0.000000)"}},[s("g",{attrs:{id:"trigger-icon",transform:"translate(6.857143, 6.857143)"}},[s("g",{attrs:{id:"Icon",transform:"translate(8.571429, 0.000000)",fill:"#FF6150"}},[s("polygon",{attrs:{id:"Icon-Path",points:"7.14285714 21.4285714 0 21.4285714 10 1.42857143 10 12.8571429 17.1428571 12.8571429 7.14285714 32.8571429"}})]),s("rect",{attrs:{id:"ViewBox",x:"0",y:"0",width:"34.2857143",height:"34.2857143"}})])])])])])])])},Ia=[],Aa={name:"TriggerIcon"},Pa=Aa,Va=s("a02c");function Wa(e){this["$style"]=Va["default"].locals||Va["default"]}var Ma=Object(h["a"])(Pa,Sa,Ia,!0,Wa,null,null),La=Ma.exports;o["default"].component("NodeIcon",da),o["default"].component("TriggerIcon",La);var Ra={props:["active","filter","nodeType","bordered"],isTrigger(e){return e.group.includes("trigger")}},ja=Ra,Ba=s("c306");function Fa(e){this["$style"]=Ba["default"].locals||Ba["default"]}var Ua=Object(h["a"])(ja,_a,Oa,!0,Fa,null,null),za=Ua.exports,Ha=function(e,t){var s=t._c;return s("div",{class:t.$style.category},[s("span",{class:t.$style.name},[t._v(t._s(t.props.item.category))]),t.props.item.properties.expanded?s("font-awesome-icon",{class:t.$style.arrow,attrs:{icon:"chevron-down"}}):s("font-awesome-icon",{class:t.$style.arrow,attrs:{icon:"chevron-up"}})],1)},qa=[],Ja={props:["item"]},Ka=Ja,Ga=s("dd28");function Ya(e){this["$style"]=Ga["default"].locals||Ga["default"]}var Xa=Object(h["a"])(Ka,Ha,qa,!0,Ya,null,null),Za=Xa.exports,Qa=function(e,t){var s=t._c;return s("div",{class:t.$style.subcategory},[s("div",{class:t.$style.details},[s("div",{class:t.$style.title},[t._v(t._s(t.props.item.properties.subcategory))]),t.props.item.properties.description?s("div",{class:t.$style.description},[t._v("\n\t\t\t"+t._s(t.props.item.properties.description)+"\n\t\t")]):t._e()]),s("div",{class:t.$style.action},[s("font-awesome-icon",{class:t.$style.arrow,attrs:{icon:"arrow-right"}})],1)])},en=[],tn={props:["item"]},sn=tn,on=s("5d38");function an(e){this["$style"]=on["default"].locals||on["default"]}var nn=Object(h["a"])(sn,Qa,en,!0,an,null,null),rn=nn.exports;o["default"].component("CategoryItem",Za),o["default"].component("SubcategoryItem",rn),o["default"].component("NodeItem",za);var ln={props:["item","active","clickable","lastNode"]},cn=ln,dn=(s("2df2"),Object(h["a"])(cn,Ta,Da,!0,null,"df458df6",null)),un=dn.exports,pn=o["default"].extend({name:"ItemIterator",components:{CreatorItem:un},props:["elements","activeIndex","disabled","transitionsEnabled"],methods:{selected(e){this.$props.disabled||this.$emit("selected",e)},beforeEnter(e){e.style.height="0"},enter(e){e.style.height=e.scrollHeight+"px"},beforeLeave(e){e.style.height=e.scrollHeight+"px"},leave(e){e.style.height="0"}}}),hn=pn,mn=(s("f631"),Object(h["a"])(hn,Na,Ea,!1,null,"40b2b671",null)),fn=mn.exports,gn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"no-results"},[s("div",{staticClass:"icon"},[s("NoResultsIcon")],1),s("div",{staticClass:"title"},[s("div",[e._v("We didn't make that... yet")]),s("div",{staticClass:"action"},[e._v("\n\t\t\tDon’t worry, you can probably do it with the\n\t\t\t"),s("a",{on:{click:e.selectHttpRequest}},[e._v("HTTP Request")]),e._v(" or\n\t\t\t"),s("a",{on:{click:e.selectWebhook}},[e._v("Webhook")]),e._v(" node\n\t\t")])]),s("div",{staticClass:"request"},[s("div",[e._v("Want us to make it faster?")]),s("div",[s("a",{attrs:{href:e.REQUEST_NODE_FORM_URL,target:"_blank"}},[s("span",[e._v("Request the node")]),e._v(" \n\t\t\t\t"),s("span",[s("font-awesome-icon",{staticClass:"external",attrs:{icon:"external-link-alt",title:"Request the node"}})],1)])])])])},wn=[],vn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("svg",{attrs:{width:"75px",height:"75px",viewBox:"0 0 75 75",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[s("title",[e._v("no-nodes-keyart")]),s("g",{attrs:{id:"Nodes-panel-prototype-V2.1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[s("g",{attrs:{id:"nodes-panel-(component)",transform:"translate(-2085.000000, -352.000000)"}},[s("g",{attrs:{id:"nodes_panel",transform:"translate(1880.000000, 151.000000)"}},[s("g",{attrs:{id:"Panel",transform:"translate(50.000000, 0.000000)"}},[s("g",{attrs:{id:"Group-3",transform:"translate(105.000000, 171.000000)"}},[s("g",{attrs:{id:"no-nodes-keyart",transform:"translate(50.000000, 30.000000)"}},[s("rect",{attrs:{id:"Rectangle",x:"0",y:"0",width:"75",height:"75"}}),s("g",{attrs:{id:"Group",transform:"translate(6.562500, 8.164062)",fill:"#C4C8D1","fill-rule":"nonzero"}},[s("polygon",{attrs:{id:"Rectangle",transform:"translate(49.192016, 45.302553) rotate(-45.000000) translate(-49.192016, -45.302553) ",points:"44.5045606 32.0526802 53.8794707 32.0526802 53.8794707 58.5524261 44.5045606 58.5524261"}}),s("path",{attrs:{d:"M48.125,23.0859375 C54.15625,23.0859375 59.0625,18.1796875 59.0625,12.1484375 C59.0625,10.3359375 58.5625,8.6484375 57.78125,7.1484375 L49.34375,15.5859375 L44.6875,10.9296875 L53.125,2.4921875 C51.625,1.7109375 49.9375,1.2109375 48.125,1.2109375 C42.09375,1.2109375 37.1875,6.1171875 37.1875,12.1484375 C37.1875,13.4296875 37.4375,14.6484375 37.84375,15.7734375 L32.0625,21.5546875 L26.5,15.9921875 L28.71875,13.7734375 L24.3125,9.3671875 L30.9375,2.7421875 C27.28125,-0.9140625 21.34375,-0.9140625 17.6875,2.7421875 L6.625,13.8046875 L11.03125,18.2109375 L2.21875,18.2109375 L1.38777878e-15,20.4296875 L11.0625,31.4921875 L13.28125,29.2734375 L13.28125,20.4296875 L17.6875,24.8359375 L19.90625,22.6171875 L25.46875,28.1796875 L2.3125,51.3359375 L8.9375,57.9609375 L44.5,22.4296875 C45.625,22.8359375 46.84375,23.0859375 48.125,23.0859375 Z",id:"Path"}})])])])])])])])])},yn=[],bn={},kn=Object(h["a"])(bn,vn,yn,!1,null,null,null),xn=kn.exports,Cn=o["default"].extend({name:"NoResults",components:{NoResultsIcon:xn},data(){return{REQUEST_NODE_FORM_URL:_["t"]}},computed:{basePath(){return this.$store.getters.getBaseUrl}},methods:{selectWebhook(){this.$emit("nodeTypeSelected",_["B"])},selectHttpRequest(){this.$emit("nodeTypeSelected",_["l"])}}}),$n=Cn,Nn=(s("cd42"),Object(h["a"])($n,gn,wn,!1,null,"7bbcd5dc",null)),En=Nn.exports,Tn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search-container"},[s("div",{class:{prefix:!0,active:e.value.length>0}},[s("font-awesome-icon",{attrs:{icon:"search"}})],1),s("div",{staticClass:"text"},[s("input",{ref:"input",attrs:{placeholder:"Search nodes..."},domProps:{value:e.value},on:{input:e.onInput}})]),e.value.length>0?s("div",{staticClass:"suffix",on:{click:e.clear}},[s("span",{staticClass:"clear el-icon-close clickable"})]):e._e()])},Dn=[],_n=o["default"].extend({name:"SearchBar",props:["value","eventBus"],mounted(){this.$props.eventBus&&this.$props.eventBus.$on("focus",()=>{this.focus()}),setTimeout(()=>{this.focus()},0)},methods:{focus(){const e=this.$refs.input;e&&e.focus()},onInput(e){const t=e.target;this.$emit("input",t.value)},clear(){this.$emit("input","")}}}),On=_n,Sn=(s("366e"),Object(h["a"])(On,Tn,Dn,!1,null,"3597f587",null)),In=Sn.exports,An=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"subcategory-panel"},[s("div",{staticClass:"subcategory-header"},[s("div",{staticClass:"clickable",on:{click:e.onBackArrowClick}},[s("font-awesome-icon",{staticClass:"back-arrow",attrs:{icon:"arrow-left"}})],1),s("span",[e._v(e._s(e.title))])]),s("div",{staticClass:"scrollable"},[s("ItemIterator",{attrs:{elements:e.elements,activeIndex:e.activeIndex},on:{selected:e.selected}})],1)])},Pn=[],Vn=o["default"].extend({name:"SubcategoryPanel",components:{ItemIterator:fn},props:["title","elements","activeIndex"],methods:{selected(e){this.$emit("selected",e)},onBackArrowClick(){this.$emit("close")}}}),Wn=Vn,Mn=(s("4ba5"),Object(h["a"])(Wn,An,Pn,!1,null,"742ed01d",null)),Ln=Mn.exports;const Rn=e=>e.reduce((e,t)=>t.codex&&t.codex.categories?(t.codex.categories.forEach(s=>{const o=s.trim(),i=t.codex&&t.codex.subcategories&&t.codex.subcategories[o]?t.codex.subcategories[o][0]:_["A"];e[o]||(e[o]={}),e[o][i]||(e[o][i]={triggerCount:0,regularCount:0,nodes:[]});const a=t.group.includes("trigger");a&&e[o][i].triggerCount++,a||e[o][i].regularCount++,e[o][i].nodes.push({type:"node",key:`${o}_${t.name}`,category:o,properties:{nodeType:t,subcategory:i},includedByTrigger:a,includedByRegular:!a})}),e):(e[_["z"]][_["A"]].nodes.push({type:"node",category:_["z"],key:`${_["z"]}_${t.name}`,properties:{subcategory:_["A"],nodeType:t},includedByTrigger:t.group.includes("trigger"),includedByRegular:!t.group.includes("trigger")}),e),{[_["z"]]:{[_["A"]]:{triggerCount:0,regularCount:0,nodes:[]}}}),jn=e=>{const t=Object.keys(e),s=t.filter(e=>e!==_["f"]&&e!==_["g"]&&e!==_["z"]);return s.sort(),[_["f"],_["g"],...s,_["z"]]},Bn=e=>{const t=jn(e);return t.reduce((t,s)=>{if(!e[s])return t;const o={type:"category",key:s,category:s,properties:{expanded:!1}},i=Object.keys(e[s]);if(1===i.length){const a=e[s][i[0]];return a.triggerCount>0&&(o.includedByTrigger=a.triggerCount>0),a.regularCount>0&&(o.includedByRegular=a.regularCount>0),[...t,o,...a.nodes]}i.sort();const a=i.reduce((t,i)=>{const a={type:"subcategory",key:`${s}_${i}`,category:s,properties:{subcategory:i,description:_["v"][s][i]},includedByTrigger:e[s][i].triggerCount>0,includedByRegular:e[s][i].regularCount>0};return a.includedByTrigger&&(o.includedByTrigger=!0),a.includedByRegular&&(o.includedByRegular=!0),t.push(a),t},[]);return[...t,o,...a]},[])},Fn=(e,t)=>!(t!==_["s"]||!e.includedByRegular)||(!(t!==_["y"]||!e.includedByTrigger)||t===_["a"]),Un=(e,t)=>!(!e.codex||!e.codex.alias)&&e.codex.alias.reduce((e,s)=>e||s.toLowerCase().indexOf(t)>-1,!1),zn=(e,t)=>{const s=e.properties.nodeType;return-1!==s.displayName.toLowerCase().indexOf(t)||Un(s,t)};var Hn=Object(y["a"])(k["a"]).extend({name:"NodeCreateList",components:{ItemIterator:fn,NoResults:En,SubcategoryPanel:Ln,SlideTransition:xa,SearchBar:In},props:["categorizedItems","categoriesWithNodes","searchItems"],data(){return{activeCategory:[],activeSubcategory:null,activeIndex:1,activeSubcategoryIndex:0,nodeFilter:"",selectedType:_["a"],searchEventBus:new o["default"],REGULAR_NODE_FILTER:_["s"],TRIGGER_NODE_FILTER:_["y"],ALL_NODE_FILTER:_["a"]}},computed:{searchFilter(){return this.nodeFilter.toLowerCase().trim()},filteredNodeTypes(){const e=this.searchItems,t=this.searchFilter,s=e.filter(e=>{e.properties.nodeType;return t&&Fn(e,this.selectedType)&&zn(e,t)});return setTimeout(()=>{this.$externalHooks().run("nodeCreateList.filteredNodeTypesComputed",{nodeFilter:this.nodeFilter,result:s,selectedType:this.selectedType})},0),s},categorized(){return this.categorizedItems&&this.categorizedItems.reduce((e,t)=>("category"===t.type||this.activeCategory.includes(t.category))&&Fn(t,this.selectedType)?"category"===t.type?(e.push({...t,properties:{expanded:this.activeCategory.includes(t.category)}}),e):(e.push(t),e):e,[])},subcategorizedNodes(){const e=this.activeSubcategory,t=e.category,s=e.properties.subcategory;return e&&this.categoriesWithNodes[t][s].nodes.filter(e=>Fn(e,this.selectedType))}},watch:{nodeFilter(e,t){this.activeIndex=0,this.$externalHooks().run("nodeCreateList.nodeFilterChanged",{oldValue:t,newValue:e,selectedType:this.selectedType,filteredNodes:this.filteredNodeTypes})},selectedType(e,t){this.$externalHooks().run("nodeCreateList.selectedTypeChanged",{oldValue:t,newValue:e})}},methods:{nodeFilterKeyDown(e){if(["Escape","Tab"].includes(e.key)||e.stopPropagation(),this.activeSubcategory){const t=this.subcategorizedNodes,s=t[this.activeSubcategoryIndex];return void("ArrowDown"===e.key&&this.activeSubcategory?(this.activeSubcategoryIndex++,this.activeSubcategoryIndex=Math.min(this.activeSubcategoryIndex,t.length-1)):"ArrowUp"===e.key&&this.activeSubcategory?(this.activeSubcategoryIndex--,this.activeSubcategoryIndex=Math.max(this.activeSubcategoryIndex,0)):"Enter"===e.key?this.selected(s):"ArrowLeft"===e.key&&this.onSubcategoryClose())}let t;t=this.searchFilter.length>0?this.filteredNodeTypes:this.categorized;const s=t[this.activeIndex];"ArrowDown"===e.key?(this.activeIndex++,this.activeIndex=Math.min(this.activeIndex,t.length-1)):"ArrowUp"===e.key?(this.activeIndex--,this.activeIndex=Math.max(this.activeIndex,0)):"Enter"===e.key&&s||"ArrowRight"===e.key&&"subcategory"===s.type?this.selected(s):"ArrowRight"!==e.key||"category"!==s.type||s.properties.expanded?"ArrowLeft"===e.key&&"category"===s.type&&s.properties.expanded&&this.selected(s):this.selected(s)},selected(e){if("node"===e.type){const t=e.properties;this.nodeTypeSelected(t.nodeType.name)}else"category"===e.type?this.onCategorySelected(e.category):"subcategory"===e.type&&this.onSubcategorySelected(e)},nodeTypeSelected(e){this.$emit("nodeTypeSelected",e)},onCategorySelected(e){this.activeCategory.includes(e)?this.activeCategory=this.activeCategory.filter(t=>t!==e):this.activeCategory=[...this.activeCategory,e],this.activeIndex=this.categorized.findIndex(t=>t.category===e)},onSubcategorySelected(e){this.activeSubcategoryIndex=0,this.activeSubcategory=e},onSubcategoryClose(){this.activeSubcategory=null,this.activeSubcategoryIndex=0,this.nodeFilter=""},onClickInside(){this.searchEventBus.$emit("focus")}},async mounted(){this.$nextTick(()=>{this.activeCategory=[_["f"]]}),this.$externalHooks().run("nodeCreateList.mounted")},async destroyed(){this.$externalHooks().run("nodeCreateList.destroyed")}}),qn=Hn,Jn=(s("06b5"),Object(h["a"])(qn,Ca,$a,!1,null,"22177eb6",null)),Kn=Jn.exports,Gn=o["default"].extend({name:"NodeCreator",components:{MainPanel:Kn,SlideTransition:xa},props:["active"],computed:{visibleNodeTypes(){return this.$store.getters.allNodeTypes.filter(e=>!_["k"].includes(e.name))},categoriesWithNodes(){return Rn(this.visibleNodeTypes)},categorizedItems(){return Bn(this.categoriesWithNodes)},searchItems(){const e=[...this.visibleNodeTypes];return e.sort((e,t)=>{const s=e.displayName.toLowerCase(),o=t.displayName.toLowerCase();return s<o?-1:s>o?1:0}),e.map(e=>({type:"node",category:"",key:""+e.name,properties:{nodeType:e,subcategory:""},includedByTrigger:e.group.includes("trigger"),includedByRegular:!e.group.includes("trigger")}))}},methods:{onClickOutside(e){"click"===e.type&&this.$emit("closeNodeCreator")},nodeTypeSelected(e){this.$emit("nodeTypeSelected",e)}}}),Yn=Gn,Xn=(s("4e6b"),Object(h["a"])(Yn,fa,ga,!1,null,"2bbe02e1",null)),Zn=Xn.exports;const Qn=e=>e.reduce((e,t)=>t.position[0]>e.position[0]||t.position[1]>e.position[1]?e:t),er=e=>e.reduce((e,t)=>(t.position[0]<e.minX&&(e.minX=t.position[0]),t.position[1]<e.minY&&(e.minY=t.position[1]),t.position[0]>e.maxX&&(e.maxX=t.position[0]),t.position[1]>e.maxY&&(e.maxY=t.position[1]),e),{minX:e[0].position[0],minY:e[0].position[1],maxX:e[0].position[0],maxY:e[0].position[1]}),tr=({scale:e,offset:[t,s]})=>(e/=1.25,t/=1.25,s/=1.25,t+=window.innerWidth/10,s+=window.innerHeight/10,{scale:e,offset:[t,s]}),sr=({scale:e,offset:[t,s]})=>(e*=1.25,t-=window.innerWidth/10,s-=window.innerHeight/10,t*=1.25,s*=1.25,{scale:e,offset:[t,s]}),or=e=>{if(e.scale>1)while(e.scale>1)e=tr(e);else while(e.scale<1)e=sr(e);return e.scale=1,e};var ir=s("2159");const ar=100,nr=250,rr=300,lr=65,cr=65,dr={name:"Start",type:"n8n-nodes-base.start",typeVersion:1,position:[nr,rr],parameters:{}};var ur=Object(y["a"])(Ft,k["a"],he["a"],Bs,zs,me["a"],C["a"],$,N["a"],Cs).extend({name:"NodeView",components:{DataDisplay:zo,Modals:ta,Node:ma,NodeCreator:Zn,NodeSettings:yo,RunData:jo},errorCaptured:(e,t,s)=>{console.error("errorCaptured"),console.error(e)},watch:{$route:"initView",activeNode(){this.createNodeActive=!1},nodes:{async handler(e,t){let s=null;this.$route&&this.$route.params.name&&(s=this.$route.params.name)},deep:!0},connections:{async handler(e,t){let s=null;this.$route&&this.$route.params.name&&(s=this.$route.params.name)},deep:!0}},async beforeRouteLeave(e,t,s){const o=this.$store.getters.getStateIsDirty;if(o){const e=await this.confirmMessage("When you switch workflows your current workflow changes will be lost.","Save your Changes?","warning","Yes, switch workflows and forget changes");!1===e?s(!1):(this.$store.commit("setStateDirty",!1),s())}else s()},computed:{...Object(b["b"])("ui",["sidebarMenuCollapsed"]),activeNode(){return this.$store.getters.activeNode},executionWaitingForWebhook(){return this.$store.getters.executionWaitingForWebhook},lastSelectedNode(){return this.$store.getters.lastSelectedNode},connections(){return this.$store.getters.allConnections},nodes(){return this.$store.getters.allNodes},runButtonText(){return!1===this.workflowRunning?"Execute Workflow":!0===this.executionWaitingForWebhook?"Waiting for Webhook-Call":"Executing Workflow"},workflowStyle(){const e=this.$store.getters.getNodeViewOffsetPosition;return{left:e[0]+"px",top:e[1]+"px"}},backgroundStyle(){const e=this.$store.getters.getNodeViewOffsetPosition;return{transform:`scale(${this.nodeViewScale})`,"background-position":`right ${-e[0]}px bottom ${-e[1]}px`}},workflowClasses(){const e=[];return!0===this.ctrlKeyPressed&&(!0===this.$store.getters.isNodeViewMoveInProgress?e.push("move-in-process"):e.push("move-active")),(this.selectActive||!0===this.ctrlKeyPressed)&&e.push("do-not-select"),e},workflowExecution(){return this.$store.getters.getWorkflowExecution},workflowRunning(){return this.$store.getters.isActionActive("workflowRunning")}},data(){return{createNodeActive:!1,instance:Ls["jsPlumb"].getInstance(),lastClickPosition:[450,450],nodeViewScale:1,ctrlKeyPressed:!1,stopExecutionInProgress:!1,blankRedirect:!1}},beforeDestroy(){document.removeEventListener("keydown",this.keyDown),document.removeEventListener("keyup",this.keyUp)},methods:{clearExecutionData(){this.$store.commit("setWorkflowExecutionData",null),this.updateNodesExecutionIssues()},openNodeCreator(){this.createNodeActive=!0,this.$externalHooks().run("nodeView.createNodeActiveChanged",{source:"add_node_button"})},async openExecution(e){let t;this.resetWorkspace();try{t=await this.restApi().getExecution(e)}catch(s){return void this.$showError(s,"Problem loading execution","There was a problem opening the execution:")}if(void 0===t)throw new Error(`Execution with id "${e}" could not be found!`);this.$store.commit("setWorkflowName",{newName:t.workflowData.name,setStateDirty:!1}),this.$store.commit("setWorkflowId",_["r"]),this.$store.commit("setWorkflowExecutionData",t),await this.addNodes(JSON.parse(JSON.stringify(t.workflowData.nodes)),JSON.parse(JSON.stringify(t.workflowData.connections))),this.$nextTick(()=>{this.zoomToFit(),this.$store.commit("setStateDirty",!1)}),this.$externalHooks().run("execution.open",{workflowId:t.workflowData.id,workflowName:t.workflowData.name,executionId:e})},async openWorkflowTemplate(e){let t;this.setLoadingText("Loading template"),this.resetWorkspace();try{if(this.$externalHooks().run("template.requested",{templateId:e}),t=await this.$store.dispatch("workflows/getWorkflowTemplate",e),!t)throw new Error(`Workflow template with id "${e}" could not be found!`);t.workflow.nodes.forEach(e=>{if(!this.$store.getters.nodeType(e.type)){const t=e.type.replace("n8n-nodes-base.","");throw new Error(`The ${t} node is not supported`)}})}catch(r){return this.$showError(r,"Couldn't import workflow"),void this.$router.push({name:"NodeViewNew"})}const s=t.workflow.nodes,o=!!s.find(e=>e.type===_["u"]),i=Qn(s),a=nr-i.position[0],n=rr-i.position[1];t.workflow.nodes.map(e=>{e.position[0]+=a+(o?0:2*ar),e.position[1]+=n}),o||t.workflow.nodes.push(dr),this.blankRedirect=!0,this.$router.push({name:"NodeViewNew"}),await this.addNodes(t.workflow.nodes,t.workflow.connections),await this.$store.dispatch("workflows/setNewWorkflowName",t.name),this.$nextTick(()=>{this.zoomToFit(),this.$store.commit("setStateDirty",!0)}),this.$externalHooks().run("template.open",{templateId:e,templateName:t.name,workflow:t.workflow})},async openWorkflow(e){let t;this.resetWorkspace();try{t=await this.restApi().getWorkflow(e)}catch(i){return void this.$showError(i,"Problem opening workflow","There was a problem opening the workflow:")}if(void 0===t)throw new Error(`Workflow with id "${e}" could not be found!`);this.$store.commit("setActive",t.active||!1),this.$store.commit("setWorkflowId",e),this.$store.commit("setWorkflowName",{newName:t.name,setStateDirty:!1}),this.$store.commit("setWorkflowSettings",t.settings||{});const s=t.tags||[];this.$store.commit("tags/upsertTags",s);const o=s.map(e=>e.id);return this.$store.commit("setWorkflowTagIds",o||[]),await this.addNodes(t.nodes,t.connections),this.$store.commit("setStateDirty",!1),this.zoomToFit(),this.$externalHooks().run("workflow.open",{workflowId:e,workflowName:t.name}),t},touchTap(e){this.isTouchDevice&&this.mouseDown(e)},mouseDown(e){const t=this.getMousePosition(e),s=this.$store.getters.getNodeViewOffsetPosition;this.lastClickPosition[0]=t.x-s[0],this.lastClickPosition[1]=t.y-s[1],this.mouseDownMouseSelect(e),this.mouseDownMoveWorkflow(e),this.createNodeActive=!1},mouseUp(e){this.mouseUpMouseSelect(e),this.mouseUpMoveWorkflow(e)},wheelScroll(e){if(e.ctrlKey)return e.deltaY>0?this.zoomOut():this.zoomIn(),void e.preventDefault();this.wheelMoveWorkflow(e)},keyUp(e){e.key===this.controlKeyCode&&(this.ctrlKeyPressed=!1)},async keyDown(e){const t=e.path||e.composedPath&&e.composedPath();for(let s=0;s<t.length;s++)if(t[s].className&&"string"===typeof t[s].className&&t[s].className.includes("ignore-key-press"))return;if(!window.document.body.classList.contains("el-popup-parent--hidden")){if("Escape"===e.key)return this.createNodeActive=!1,void(this.activeNode&&(this.$externalHooks().run("dataDisplay.nodeEditingFinished"),this.$store.commit("setActiveNode",null)));if(!this.activeNode)if("d"===e.key)this.callDebounced("deactivateSelectedNode",350);else if("Delete"===e.key)e.stopPropagation(),e.preventDefault(),this.callDebounced("deleteSelectedNodes",500);else if("Tab"===e.key)this.createNodeActive=!this.createNodeActive&&!this.isReadOnly;else if(e.key===this.controlKeyCode)this.ctrlKeyPressed=!0;else if("F2"!==e.key||this.isReadOnly)if("="!==e.key&&"+"!==e.key||this.isCtrlKeyPressed(e))if("_"!==e.key&&"-"!==e.key||this.isCtrlKeyPressed(e))if("0"!==e.key||this.isCtrlKeyPressed(e))if("1"!==e.key||this.isCtrlKeyPressed(e)){if("a"===e.key&&!0===this.isCtrlKeyPressed(e))e.stopPropagation(),e.preventDefault(),this.callDebounced("selectAllNodes",1e3);else if("c"===e.key&&!0===this.isCtrlKeyPressed(e))this.callDebounced("copySelectedNodes",1e3);else if("x"===e.key&&!0===this.isCtrlKeyPressed(e))e.stopPropagation(),e.preventDefault(),this.callDebounced("cutSelectedNodes",1e3);else if("o"===e.key&&!0===this.isCtrlKeyPressed(e))e.stopPropagation(),e.preventDefault(),this.$store.dispatch("ui/openWorklfowOpenModal");else if("n"===e.key&&!0===this.isCtrlKeyPressed(e)&&!0===e.altKey)e.stopPropagation(),e.preventDefault(),"NodeViewNew"===this.$router.currentRoute.name?this.$root.$emit("newWorkflow"):this.$router.push({name:"NodeViewNew"}),this.$showMessage({title:"Workflow created",message:"A new workflow got created!",type:"success"});else if("s"===e.key&&!0===this.isCtrlKeyPressed(e)){if(e.stopPropagation(),e.preventDefault(),this.isReadOnly)return;this.callDebounced("saveCurrentWorkflow",1e3)}else if("Enter"===e.key){const e=this.$store.getters.lastSelectedNode;null!==e&&this.$store.commit("setActiveNode",e.name)}else if("ArrowRight"===e.key&&!0===e.shiftKey)e.stopPropagation(),e.preventDefault(),this.callDebounced("selectDownstreamNodes",1e3);else if("ArrowRight"===e.key){const e=this.$store.getters.lastSelectedNode;if(null===e)return;const t=this.$store.getters.connectionsByNodeName(e.name);if(void 0===t.main||0===t.main.length)return;this.callDebounced("nodeSelectedByName",100,t.main[0][0].node,!1,!0)}else if("ArrowLeft"===e.key&&!0===e.shiftKey)e.stopPropagation(),e.preventDefault(),this.callDebounced("selectUpstreamNodes",1e3);else if("ArrowLeft"===e.key){const e=this.$store.getters.lastSelectedNode;if(null===e)return;const t=this.getWorkflow();if(!t.connectionsByDestinationNode.hasOwnProperty(e.name))return;const s=t.connectionsByDestinationNode[e.name];if(void 0===s.main||0===s.main.length)return;this.callDebounced("nodeSelectedByName",100,s.main[0][0].node,!1,!0)}else if(["ArrowUp","ArrowDown"].includes(e.key)){const t=this.$store.getters.lastSelectedNode;if(null===t)return;const s=this.getWorkflow();if(!s.connectionsByDestinationNode.hasOwnProperty(t.name))return;const o=s.connectionsByDestinationNode[t.name];if(void 0===o.main||0===o.main.length)return;const i=o.main[0][0].node,a=this.$store.getters.connectionsByNodeName(i);if(void 0===a.main||0===a.main.length)return;let n,r="ArrowUp"===e.key?-99999999:99999999,l=null;for(const c of a.main)for(const s of c)s.node!==t.name&&(n=this.$store.getters.nodeByName(s.node),"ArrowUp"===e.key?n.position[1]<=t.position[1]&&n.position[1]>r&&(l=n.name,r=n.position[1]):n.position[1]>=t.position[1]&&n.position[1]<r&&(l=n.name,r=n.position[1]));null!==l&&this.callDebounced("nodeSelectedByName",100,l,!1,!0)}}else this.zoomToFit();else this.resetZoom();else this.zoomOut();else this.zoomIn();else{const e=this.lastSelectedNode;null!==e&&this.callDebounced("renameNodePrompt",1500,e.name)}}},deactivateSelectedNode(){!1!==this.editAllowedCheck()&&this.disableNodes(this.$store.getters.getSelectedNodes)},deleteSelectedNodes(){const e=this.$store.getters.getSelectedNodes.map(e=>e.name);e.forEach(e=>{this.removeNode(e)})},selectAllNodes(){this.nodes.forEach(e=>{this.nodeSelectedByName(e.name)})},selectUpstreamNodes(){const e=this.$store.getters.lastSelectedNode;if(null===e)return;this.deselectAllNodes();const t=this.getWorkflow();for(const s of t.getParentNodes(e.name))this.nodeSelectedByName(s);this.nodeSelectedByName(e.name)},selectDownstreamNodes(){const e=this.$store.getters.lastSelectedNode;if(null===e)return;this.deselectAllNodes();const t=this.getWorkflow();for(const s of t.getChildNodes(e.name))this.nodeSelectedByName(s);this.nodeSelectedByName(e.name)},cutSelectedNodes(){this.copySelectedNodes(),this.deleteSelectedNodes()},copySelectedNodes(){this.getSelectedNodesToSave().then(e=>{const t=JSON.stringify(e,null,2);this.copyToClipboard(t)})},resetZoom(){const{scale:e,offset:t}=or({scale:this.nodeViewScale,offset:this.$store.getters.getNodeViewOffsetPosition});this.setZoomLevel(e),this.$store.commit("setNodeViewOffsetPosition",{newOffset:t})},zoomIn(){const{scale:e,offset:[t,s]}=sr({scale:this.nodeViewScale,offset:this.$store.getters.getNodeViewOffsetPosition});this.setZoomLevel(e),this.$store.commit("setNodeViewOffsetPosition",{newOffset:[t,s]})},zoomOut(){const{scale:e,offset:[t,s]}=tr({scale:this.nodeViewScale,offset:this.$store.getters.getNodeViewOffsetPosition});this.setZoomLevel(e),this.$store.commit("setNodeViewOffsetPosition",{newOffset:[t,s]})},setZoomLevel(e){this.nodeViewScale=e;const t=this.instance.getContainer(),s=["webkit","moz","ms","o"],o="scale("+e+")";for(let i=0;i<s.length;i++)t.style[s[i]+"Transform"]=o;t.style["transform"]=o,this.instance.setZoom(e)},zoomToFit(){const e=this.$store.getters.allNodes;if(0===e.length)return;const{minX:t,minY:s,maxX:o,maxY:i}=er(e),a=4*ar,n=window.innerWidth,r=o-t+cr+a,l=n/r,c=window.innerHeight,d=i-s+lr+a,u=c/d,p=Math.min(l,u,1);let h=-1*t*p+cr;h+=(n-cr-(o-t+ar)*p)/2;let m=-1*s*p+lr;m+=(c-lr-(i-s+2*ar)*p)/2,this.setZoomLevel(p),this.$store.commit("setNodeViewOffsetPosition",{newOffset:[h,m]})},async stopExecution(){const e=this.$store.getters.activeExecutionId;if(null!==e){try{this.stopExecutionInProgress=!0;await this.restApi().stopCurrentExecution(e);this.$showMessage({title:"Execution stopped",message:`The execution with the id "${e}" got stopped!`,type:"success"})}catch(t){const s=await this.restApi().getExecution(e);if(s.finished){const t={data:s.data,finished:s.finished,mode:s.mode,startedAt:s.startedAt,stoppedAt:s.stoppedAt},o={data:t,executionId:e,retryOf:s.retryOf};this.$store.commit("finishActiveExecution",o),this.$titleSet(s.workflowData.name,"IDLE"),this.$store.commit("setExecutingNode",null),this.$store.commit("setWorkflowExecutionData",t),this.$store.commit("removeActiveAction","workflowRunning"),this.$showMessage({title:"Workflow finished executing",message:"Unable to stop operation in time. Workflow finished executing already.",type:"success"})}else this.$showError(t,"Problem stopping execution","There was a problem stopping the execuction:")}this.stopExecutionInProgress=!1}},async stopWaitingForWebhook(){let e;try{e=await this.restApi().removeTestWebhook(this.$store.getters.workflowId)}catch(t){return void this.$showError(t,"Problem deleting the test-webhook","There was a problem deleting webhook:")}this.$showMessage({title:"Webhook got deleted",message:"The webhook got deleted!",type:"success"})},async receivedCopyPasteData(e){let t;if(e.match(/^http[s]?:\/\/.*\.json$/i)){if(!1===this.editAllowedCheck())return;const s=await this.confirmMessage(`Import workflow from this URL:<br /><i>${e}<i>`,"Import Workflow from URL?","warning","Yes, import!");if(!1===s)return;if(t=await this.getWorkflowDataFromUrl(e),void 0===t)return}else try{if(t=JSON.parse(e),!1===this.editAllowedCheck())return}catch(s){return}return this.importWorkflowData(t)},async getWorkflowDataFromUrl(e){let t;this.startLoading();try{t=await this.restApi().getWorkflowFromUrl(e)}catch(s){return this.stopLoading(),void this.$showError(s,"Problem loading workflow","There was a problem loading the workflow data from URL:")}return this.stopLoading(),t},async importWorkflowData(e){if(e.hasOwnProperty("nodes")&&e.hasOwnProperty("connections"))try{this.deselectAllNodes(),this.updateNodePositions(e,this.getNewNodePosition());const t=await this.addNodesToWorkflow(e);setTimeout(()=>{t.nodes.forEach(e=>{this.nodeSelectedByName(e.name)})})}catch(t){this.$showError(t,"Problem importing workflow","There was a problem importing workflow data:")}},closeNodeCreator(){this.createNodeActive=!1},nodeTypeSelected(e){this.addNodeButton(e),this.createNodeActive=!1},nodeDeselectedByName(e){const t=this.$store.getters.nodeByName(e);t&&this.nodeDeselected(t)},nodeSelectedByName(e,t=!1,s){!0===s&&this.deselectAllNodes();const o=this.$store.getters.nodeByName(e);o&&this.nodeSelected(o),this.$store.commit("setLastSelectedNode",o.name),this.$store.commit("setLastSelectedNodeOutputIndex",null),!0===t&&this.$store.commit("setActiveNode",o.name)},canUsePosition(e,t){return!(Math.abs(e[0]-t[0])<=100&&Math.abs(e[1]-t[1])<=50)},getNewNodePosition(e,t){void 0===e&&(e=this.lastClickPosition),e=e.slice(),t||(t=[50,50]);let s,o,i=!1;do{for(i=!1,s=0;s<this.nodes.length;s++)if(o=this.nodes[s],!this.canUsePosition(o.position,e)){i=!0;break}!0===i&&(e[0]+=t[0],e[1]+=t[1])}while(!0===i);return e},getUniqueNodeName(e,t){t=t||[];const s=this.$store.getters.allNodes.map(e=>e.name);if(!s.includes(e)&&!t.includes(e))return e;const o=e.match(/(.*\D+)(\d*)/);let i,a,n,r,l=1;null===o?(l=parseInt(e,10),a="",r=a+l):([i,a,n]=o,""!==n&&(l=parseInt(n,10)),r=a);while(s.includes(r)||t.includes(r))r=a+l++;return r},showMaxNodeTypeError(e){const t=e.maxNodes;this.$showMessage({title:"Could not create node!",message:`Node can not be created because in a workflow max. ${t} ${1===t?"node":"nodes"} of type "${e.displayName}" ${1===t?"is":"are"} allowed!`,type:"error",duration:0})},async addNodeButton(e){if(!1===this.editAllowedCheck())return;const t=this.$store.getters.nodeType(e);if(null===t)return void this.$showMessage({title:"Could not create node!",message:`Node of type "${e}" could not be created as it is not known.`,type:"error"});if(void 0!==t.maxNodes&&this.getNodeTypeCount(e)>=t.maxNodes)return void this.showMaxNodeTypeError(t);const s={name:t.defaults.name,type:t.name,typeVersion:t.version,position:[0,0],parameters:{}},i=this.$store.getters.lastSelectedNode,a=this.$store.getters.lastSelectedNodeOutputIndex;s.position=i?this.getNewNodePosition([i.position[0]+200,i.position[1]],[100,0]):this.getNewNodePosition(),s.name=this.getUniqueNodeName(s.name),t.webhooks&&t.webhooks.length&&(s.webhookId=Object(ir["a"])()),await this.addNodes([s]),this.$store.commit("setStateDirty",!0),this.$externalHooks().run("nodeView.addNodeButton",{nodeTypeName:e}),this.deselectAllNodes(),setTimeout(()=>{this.nodeSelectedByName(s.name,!0)});const n=a||0;if(i){await o["default"].nextTick();let e=this.$store.getters.connectionsByNodeName(i.name);e=JSON.parse(JSON.stringify(e));for(const o of Object.keys(e))n<=e[o].length&&e[o][n].forEach(e=>{const t=[{node:i.name,type:o,index:n},e];this.__removeConnection(t,!0);const a=[{node:s.name,type:o,index:0},e];this.__addConnection(a,!0)});const t=[{node:i.name,type:"main",index:n},{node:s.name,type:"main",index:0}];this.__addConnection(t,!0)}},initNodeView(){const e=[];!1===this.isReadOnly&&e.push.apply(e,[["Arrow",{location:1,foldback:.7,width:12}],["Label",{id:"drop-add-node",label:"Drop connection<br />to create node",cssClass:"drop-add-node-label",location:.5}]]),this.instance.importDefaults({Connector:["Bezier",{curviness:40}],Endpoint:["Dot",{radius:5}],DragOptions:{cursor:"pointer",zIndex:5e3},PaintStyle:{strokeWidth:2,stroke:"#334455"},EndpointStyle:{radius:9,fill:"#acd",stroke:"red"},HoverPaintStyle:{stroke:"#ff6d5a",lineWidth:4},EndpointHoverStyle:{fill:"#ff6d5a",stroke:"#acd"},ConnectionOverlays:e,Container:"#node-view"}),this.instance.bind("connectionAborted",e=>{const t=this.$store.getters.getNodeNameByIndex(e.sourceId.slice(_["q"].length));this.$store.commit("setLastSelectedNode",t);const s=e.getParameters();this.$store.commit("setLastSelectedNodeOutputIndex",s.index),this.createNodeActive=!0,this.$externalHooks().run("nodeView.createNodeActiveChanged",{source:"node_connection_drop"})}),this.instance.bind("connection",e=>{const t=e.sourceEndpoint.getParameters(),s=e.targetEndpoint.getParameters(),o=this.$store.getters.getNodeNameByIndex(t.nodeIndex),i=this.$store.getters.getNodeNameByIndex(s.nodeIndex),a=this.$store.getters.nodeByName(o),n=this.$store.getters.nodeByName(i);if(e.sourceEndpoint.anchor.lastReturnValue[0]>=e.targetEndpoint.anchor.lastReturnValue[0]?(e.connection.setConnector(["Flowchart",{cornerRadius:15}]),e.connection.addOverlay(["Arrow",{location:.55,foldback:.7,width:12}]),e.connection.setPaintStyle({strokeWidth:2,stroke:"#334455"})):Math.abs(e.sourceEndpoint.anchor.lastReturnValue[1]-e.targetEndpoint.anchor.lastReturnValue[1])<30&&e.connection.setConnector(["Straight"]),e.connection.removeOverlay("drop-add-node"),!1===this.isReadOnly){let t;e.connection.bind("mouseover",s=>{void 0!==t&&clearTimeout(t);const o=e.connection.getOverlay("remove-connection");o.setVisible(!0)}),e.connection.bind("mouseout",s=>{t=setTimeout(()=>{const s=e.connection.getOverlay("remove-connection");s.setVisible(!1),t=void 0},500)}),e.connection.addOverlay(["Label",{id:"remove-connection",label:'<span class="delete-connection clickable" title="Delete Connection">x</span>',cssClass:"remove-connection-label",visible:!1,events:{mousedown:()=>{this.__removeConnectionByConnectionInfo(e,!0)}}}])}const r=this.$store.getters.nodeType(n.type);if(void 0!==r.inputNames)for(const u of r.inputNames){const t=r.inputNames[s.index];e.connection.getOverlay("input-name-label")&&e.connection.removeOverlay("input-name-label"),e.connection.addOverlay(["Label",{id:"input-name-label",label:t,cssClass:"connection-input-name-label",location:.8}])}const l=this.$store.getters.nodeType(a.type);if(void 0!==l.outputNames)for(const u of l.outputNames){const s=l.outputNames[t.index];e.connection.getOverlay("output-name-label")&&e.connection.removeOverlay("output-name-label"),e.connection.addOverlay(["Label",{id:"output-name-label",label:s,cssClass:"connection-output-name-label",location:.2}])}const c=e.connection.endpoints[0].getOverlay("output-name-label");[null,void 0].includes(c)||c.setVisible(!1);const d=e.targetEndpoint.getOverlay("input-name-label");[null,void 0].includes(d)||d.setVisible(!1),this.$store.commit("addConnection",{connection:[{node:o,type:t.type,index:t.index},{node:i,type:s.type,index:s.index}],setStateDirty:!0})});const t=(e,t,s)=>{if(void 0!==e&&e.connections.length===s){const t=e.getOverlay("output-name-label");[null,void 0].includes(t)||t.setVisible(!0)}if(void 0!==t&&t.connections.length===s){const e=t.getOverlay("input-name-label");[null,void 0].includes(e)||e.setVisible(!0)}};this.instance.bind("connectionMoved",e=>{t(e.originalSourceEndpoint,e.originalTargetEndpoint,0);const s=e.originalSourceEndpoint.getParameters(),o=e.originalTargetEndpoint.getParameters(),i=[{node:this.$store.getters.getNodeNameByIndex(s.nodeIndex),type:s.type,index:s.index},{node:this.$store.getters.getNodeNameByIndex(o.nodeIndex),type:o.type,index:o.index}];this.__removeConnection(i,!1),e.connection.removeOverlays()}),this.instance.bind("connectionDetached",e=>{t(e.sourceEndpoint,e.targetEndpoint,1),e.connection.removeOverlays(),this.__removeConnectionByConnectionInfo(e,!1)})},async newWorkflow(){await this.resetWorkspace(),await this.$store.dispatch("workflows/setNewWorkflowName"),this.$store.commit("setStateDirty",!1),await this.addNodes([dr]),this.$store.commit("setStateDirty",!1),this.setZoomLevel(1)},async initView(){if("workflowSave"===this.$route.params.action)return this.$store.commit("setStateDirty",!1),Promise.resolve();if(this.blankRedirect)this.blankRedirect=!1;else if("WorkflowTemplate"===this.$route.name){const e=this.$route.params.id;await this.openWorkflowTemplate(e)}else if("ExecutionById"===this.$route.name){const e=this.$route.params.id;await this.openExecution(e)}else{const e=this.$store.getters.getStateIsDirty;if(e){const e=await this.confirmMessage("When you switch workflows your current workflow changes will be lost.","Save your Changes?","warning","Yes, switch workflows and forget changes");if(!1===e)return Promise.resolve()}let t=null;if(this.$route.params.name&&(t=this.$route.params.name),null!==t){const e=await this.restApi().getWorkflow(t);if(!e)throw new Error("Could not find workflow");this.$titleSet(e.name,"IDLE"),await this.openWorkflow(t)}else await this.newWorkflow()}document.addEventListener("keydown",this.keyDown),document.addEventListener("keyup",this.keyUp),window.addEventListener("beforeunload",e=>{if(!0===this.$store.getters.getStateIsDirty){const t="It looks like you have been editing something. If you leave before saving, your changes will be lost.";return(e||window.event).returnValue=t,t}this.startLoading("Redirecting")})},__addConnection(e,t=!1){if(!0===t){const t=[`${this.getNodeIndex(e[0].node)}-output${e[0].index}`,`${this.getNodeIndex(e[1].node)}-input${e[1].index}`];this.instance.connect({uuids:t,detachable:!this.isReadOnly})}else{const t={connection:e,setStateDirty:!1};this.$store.commit("addConnection",t)}},__removeConnection(e,t=!1){if(!0===t){const t=this.instance.getConnections({source:_["q"]+this.getNodeIndex(e[0].node),target:_["q"]+this.getNodeIndex(e[1].node)});t.forEach(e=>{this.instance.deleteConnection(e)})}this.$store.commit("removeConnection",{connection:e})},__removeConnectionByConnectionInfo(e,t=!1){const s=e.sourceEndpoint.getParameters(),o=e.targetEndpoint.getParameters(),i=[{node:this.$store.getters.getNodeNameByIndex(s.nodeIndex),type:s.type,index:s.index},{node:this.$store.getters.getNodeNameByIndex(o.nodeIndex),type:o.type,index:o.index}];this.__removeConnection(i,t)},async duplicateNode(e){if(!1===this.editAllowedCheck())return;const t=this.$store.getters.nodeByName(e),s=this.$store.getters.nodeType(t.type);if(void 0!==s.maxNodes&&this.getNodeTypeCount(t.type)>=s.maxNodes)return void this.showMaxNodeTypeError(s);const o=JSON.parse(JSON.stringify(this.getNodeDataToSave(t)));o.name=this.getUniqueNodeName(o.name),o.position=this.getNewNodePosition([t.position[0],t.position[1]+150],[0,150]),o.webhookId&&(o.webhookId=Object(ir["a"])()),await this.addNodes([o]),this.$store.commit("setStateDirty",!0),this.deselectAllNodes(),setTimeout(()=>{this.nodeSelectedByName(o.name,!0)})},removeNode(e){if(!1===this.editAllowedCheck())return;const t=this.$store.getters.nodeByName(e),s=["n8n-nodes-base.start"];if(s.includes(t.type)){let e=!1;for(const o of this.nodes)if(o.name!==t.name&&s.includes(o.type)){e=!0;break}if(!1===e)return}const o=this.$store.getters.getNodeIndex(e),i="node-"+o;this.instance.setSuspendDrawing(!0),this.instance.removeAllEndpoints(i),this.instance.destroyDraggable(i),this.$store.commit("removeAllNodeConnection",t),this.$store.commit("removeNode",t),this.instance.setSuspendDrawing(!1,!0),this.$store.commit("removeNodeFromSelection",t),-1!==o&&this.$store.commit("setNodeIndex",{index:o,name:null})},valueChanged(e){"name"===e.name&&e.oldValue&&this.renameNode(e.oldValue,e.value)},async renameNodePrompt(e){try{const t=this.$prompt("New Name:",`Rename Node: "${e}"`,{customClass:"rename-prompt",confirmButtonText:"Rename",cancelButtonText:"Cancel",inputErrorMessage:"Invalid Name",inputValue:e});await o["default"].nextTick();const s=document.querySelector(".rename-prompt .el-input__inner");s&&(s.focus(),s.select());const i=await t;this.renameNode(e,i.value)}catch(t){}},async renameNode(e,t){if(e===t)return;t=this.getUniqueNodeName(t);const s=this.getWorkflow(void 0,void 0,!0);s.renameNode(e,t),this.$store.commit("renameNodeSelectedAndExecution",{old:e,new:t}),this.instance&&this.instance.deleteEveryEndpoint(),this.$store.commit("removeAllConnections"),this.$store.commit("removeAllNodes",{setStateDirty:!0}),await o["default"].nextTick(),await this.addNodes(Object.values(s.nodes),s.connectionsBySourceNode),this.deselectAllNodes(),this.nodeSelectedByName(t)},async addNodes(e,t){if(!e||!e.length)return;let s,i;if(await this.loadNodesProperties(e.map(e=>e.type)),e.forEach(e=>{if(s=this.$store.getters.nodeType(e.type),e.hasOwnProperty("disabled")||(e.disabled=!1),e.hasOwnProperty("color")||s&&s.defaults.color&&(e.color=s.defaults.color),e.hasOwnProperty("parameters")||(e.parameters={}),null!==s){let o=null;try{o=Ut["NodeHelpers"].getNodeParameters(s.properties,e.parameters,!0,!1)}catch(t){console.error(`There was a problem loading the node-parameters of node: "${e.name}"`),console.error(t)}e.parameters=null!==o?o:{},"n8n-nodes-base.webhook"===e.type&&""===e.parameters.path&&(e.parameters.path=e.webhookId)}i=this.getNodeIssues(s,e),null!==i&&(e.issues=i),this.$store.commit("addNode",e)}),await o["default"].nextTick(),this.instance.setSuspendDrawing(!0),void 0!==t){let e;for(const s of Object.keys(t))for(const o of Object.keys(t[s]))for(let i=0;i<t[s][o].length;i++)t[s][o][i].forEach(t=>{e=[{node:s,type:o,index:i},{node:t.node,type:t.type,index:t.index}],this.__addConnection(e,!0)})}this.instance.setSuspendDrawing(!1,!0)},async addNodesToWorkflow(e){const t={},s=[];if(!e.nodes)throw new Error("No nodes given to add!");const o=this.getNodeTypesMaxCount();let i,a;const n=[];await this.loadNodesProperties(e.nodes.map(e=>e.type)),e.nodes.forEach(e=>{if(void 0!==o[e.type]){if(o[e.type].exist>=o[e.type].max)return void(t[e.name]=o[e.type].nodeNames[0]);o[e.type].exist+=1}i=e.name,a=this.getUniqueNodeName(e.name,s),s.push(a),t[i]=a,n.push(e)});const r={},l=e.connections,c=n.map(e=>e.name);let d,u,p,h,m;for(d of Object.keys(l)){if(!c.includes(d))continue;const e={};for(u of Object.keys(l[d]))for(e[u]=[],p=0;p<l[d][u].length;p++){const t=[];if(l[d][u][p])for(h=0;h<l[d][u][p].length;h++){m=l[d][u][p][h],c.includes(m.node)&&t.push(m)}e[u].push(t)}r[d]=e}const f=this.getWorkflow(n,r);for(i in t)i!==t[i]&&f.renameNode(i,t[i]);return await this.addNodes(Object.values(f.nodes),f.connectionsBySourceNode),this.$store.commit("setStateDirty",!0),{nodes:Object.values(f.nodes),connections:f.connectionsBySourceNode}},getSelectedNodesToSave(){const e={nodes:[],connections:{}};let t;const s=[];for(const u of this.$store.getters.getSelectedNodes){try{t=this.getNodeDataToSave(u),s.push(u.name)}catch(d){return Promise.reject(d)}e.nodes.push(t)}let o,i,a,n,r,l,c;return e.nodes.forEach(t=>{if(i=this.$store.getters.connectionsByNodeName(t.name),0!==Object.keys(i).length){for(a of(c={},Object.keys(i)))for(r=0;r<i[a].length;r++){for(o=[],n=0;n<i[a][r].length;n++)l=i[a][r][n],-1!==s.indexOf(l.node)&&o.push(l);o.length&&(c.hasOwnProperty(a)||(c[a]=[]),c[a][r]=o)}Object.keys(c).length&&(e.connections[t.name]=c)}}),Promise.resolve(e)},resetWorkspace(){return this.instance&&this.instance.deleteEveryEndpoint(),!0===this.executionWaitingForWebhook&&this.restApi().removeTestWebhook(this.$store.getters.workflowId).catch(()=>{}),this.$store.commit("removeAllConnections",{setStateDirty:!1}),this.$store.commit("removeAllNodes",{setStateDirty:!1}),this.$store.commit("setWorkflowExecutionData",null),this.$store.commit("resetAllNodesIssues"),this.$store.commit("setActive",!1),this.$store.commit("setWorkflowId",_["r"]),this.$store.commit("setWorkflowName",{newName:"",setStateDirty:!1}),this.$store.commit("setWorkflowSettings",{}),this.$store.commit("setWorkflowTagIds",[]),this.$store.commit("setActiveExecutionId",null),this.$store.commit("setExecutingNode",null),this.$store.commit("removeActiveAction","workflowRunning"),this.$store.commit("setExecutionWaitingForWebhook",!1),this.$store.commit("resetNodeIndex"),this.$store.commit("resetSelectedNodes"),this.$store.commit("setNodeViewOffsetPosition",{newOffset:[0,0],setStateDirty:!1}),Promise.resolve()},async loadActiveWorkflows(){const e=await this.restApi().getActiveWorkflows();this.$store.commit("setActiveWorkflows",e)},async loadSettings(){const e=await this.restApi().getSettings();this.$store.commit("setUrlBaseWebhook",e.urlBaseWebhook),this.$store.commit("setEndpointWebhook",e.endpointWebhook),this.$store.commit("setEndpointWebhookTest",e.endpointWebhookTest),this.$store.commit("setSaveDataErrorExecution",e.saveDataErrorExecution),this.$store.commit("setSaveDataSuccessExecution",e.saveDataSuccessExecution),this.$store.commit("setSaveManualExecutions",e.saveManualExecutions),this.$store.commit("setTimezone",e.timezone),this.$store.commit("setExecutionTimeout",e.executionTimeout),this.$store.commit("setMaxExecutionTimeout",e.maxExecutionTimeout),this.$store.commit("setVersionCli",e.versionCli),this.$store.commit("setOauthCallbackUrls",e.oauthCallbackUrls),this.$store.commit("setN8nMetadata",e.n8nMetadata||{})},async loadNodeTypes(){const e=await this.restApi().getNodeTypes();this.$store.commit("setNodeTypes",e)},async loadCredentialTypes(){const e=await this.restApi().getCredentialTypes();this.$store.commit("setCredentialTypes",e)},async loadCredentials(){const e=await this.restApi().getAllCredentials();this.$store.commit("setCredentials",e)},async loadNodesProperties(e){const t=this.$store.getters.allNodeTypes,s=t.filter(t=>e.includes(t.name)&&!t.hasOwnProperty("properties")).map(e=>e.name);if(s.length>0){this.startLoading();const e=await this.restApi().getNodesInformation(s);this.$store.commit("updateNodeTypes",e),this.stopLoading()}}},async mounted(){this.$root.$on("importWorkflowData",async e=>{await this.importWorkflowData(e.data)}),this.$root.$on("newWorkflow",this.newWorkflow),this.$root.$on("importWorkflowUrl",async e=>{const t=await this.getWorkflowDataFromUrl(e.url);if(void 0!==t){await this.importWorkflowData(t)}}),this.startLoading();const e=[this.loadActiveWorkflows(),this.loadCredentials(),this.loadCredentialTypes(),this.loadNodeTypes(),this.loadSettings()];try{await Promise.all(e)}catch(t){return void this.$showError(t,"Init Problem","There was a problem loading init data:")}this.instance.ready(async()=>{try{this.initNodeView(),await this.initView()}catch(t){this.$showError(t,"Init Problem","There was a problem initializing the workflow:")}this.stopLoading()}),this.$externalHooks().run("nodeView.mount")},destroyed(){this.resetWorkspace()}}),pr=ur,hr=(s("186c"),s("2d96"),Object(h["a"])(pr,Ws,Ms,!1,null,"434540c4",null)),mr=hr.exports;o["default"].use(g["a"]);var fr=new g["a"]({mode:"history",base:"/%BASE_PATH%/"===window.BASE_PATH?"/":window.BASE_PATH,routes:[{path:"/execution/:id",name:"ExecutionById",components:{default:mr,header:Dt,sidebar:Vs}},{path:"/oauth2/callback",name:"oAuth2Callback",components:{}},{path:"/workflow",name:"NodeViewNew",components:{default:mr,header:Dt,sidebar:Vs}},{path:"/workflow/:name",name:"NodeViewExisting",components:{default:mr,header:Dt,sidebar:Vs}},{path:"/",redirect:"/workflow"},{path:"/workflows/templates/:id",name:"WorkflowTemplate",components:{default:mr,header:Dt,sidebar:Vs}}]}),gr=s("a9e2"),wr=s.n(gr),vr=s("4bea"),yr=s("96ee"),br=s("dc04"),kr=s("a185");async function xr(e,t=!1){return await Object(kr["b"])(e,"GET","/tags",{withUsageCount:t})}async function Cr(e,t){return await Object(kr["b"])(e,"POST","/tags",t)}async function $r(e,t,s){return await Object(kr["b"])(e,"PATCH","/tags/"+t,s)}async function Nr(e,t){return await Object(kr["b"])(e,"DELETE","/tags/"+t)}const Er={namespaced:!0,state:{tags:{},isLoading:!1,fetchedAll:!1,fetchedUsageCount:!1},mutations:{setLoading:(e,t)=>{e.isLoading=t},setAllTags:(e,t)=>{e.tags=t.reduce((e,t)=>(e[t.id]=t,e),{}),e.fetchedAll=!0},upsertTags(e,t){t.forEach(t=>{const s=t.id,i=e.tags[s];if(i){const a={...i,...t};o["default"].set(e.tags,s,a)}else o["default"].set(e.tags,s,t)})},deleteTag(e,t){o["default"].delete(e.tags,t)}},getters:{allTags(e){return Object.values(e.tags).sort((e,t)=>e.name.localeCompare(t.name))},isLoading:e=>e.isLoading,hasTags:e=>Object.keys(e.tags).length>0,getTagById:e=>t=>e.tags[t]},actions:{fetchAll:async(e,t)=>{const{force:s=!1,withUsageCount:o=!1}=t||{};if(!s&&e.state.fetchedAll&&e.state.fetchedUsageCount===o)return e.state.tags;e.commit("setLoading",!0);const i=await xr(e.rootGetters.getRestApiContext,Boolean(o));return e.commit("setAllTags",i),e.commit("setLoading",!1),i},create:async(e,t)=>{const s=await Cr(e.rootGetters.getRestApiContext,{name:t});return e.commit("upsertTags",[s]),s},rename:async(e,{id:t,name:s})=>{const o=await $r(e.rootGetters.getRestApiContext,t,{name:s});return e.commit("upsertTags",[o]),o},delete:async(e,t)=>{const s=await Nr(e.rootGetters.getRestApiContext,t);return s&&(e.commit("deleteTag",t),e.commit("removeWorkflowTagId",t,{root:!0})),s}}};var Tr=Er;const Dr={namespaced:!0,state:{modals:{[_["i"]]:{open:!1},[_["w"]]:{open:!1},[_["C"]]:{open:!1}},modalStack:[],sidebarMenuCollapsed:!0,isPageLoading:!0},getters:{isModalOpen:e=>t=>e.modals[t].open,isModalActive:e=>t=>e.modalStack.length>0&&t===e.modalStack[0],sidebarMenuCollapsed:e=>e.sidebarMenuCollapsed},mutations:{openModal:(e,t)=>{o["default"].set(e.modals[t],"open",!0),e.modalStack=[t].concat(e.modalStack)},closeTopModal:e=>{const t=e.modalStack[0];o["default"].set(e.modals[t],"open",!1),e.modalStack=e.modalStack.slice(1)},toggleSidebarMenuCollapse:e=>{e.sidebarMenuCollapsed=!e.sidebarMenuCollapsed}},actions:{openTagsManagerModal:async e=>{e.commit("openModal",_["w"])},openWorklfowOpenModal:async e=>{e.commit("openModal",_["C"])},openDuplicateModal:async e=>{e.commit("openModal",_["i"])}}};var _r=Dr;async function Or(e,t){return await Object(kr["b"])(e,"GET","/workflows/new",t?{name:t}:{})}async function Sr(e){return await Object(kr["a"])(_["x"],"/workflows/templates/"+e)}const Ir={namespaced:!0,state:{},actions:{setNewWorkflowName:async(e,t)=>{let s="";try{const o=await Or(e.rootGetters.getRestApiContext,t);s=o.name}catch(o){s=t||_["h"]}e.commit("setWorkflowName",{newName:s},{root:!0})},getDuplicateCurrentWorkflowName:async e=>{const t=e.rootGetters.workflowName;if(t&&t.length+_["j"].length>=_["p"])return t;let s=`${t}${_["j"]}`;try{const t=await Or(e.rootGetters.getRestApiContext,s);s=t.name}catch(o){}return s},getWorkflowTemplate:async(e,t)=>await Sr(t)}};var Ar=Ir;o["default"].use(b["a"]);const Pr={activeExecutions:[],activeWorkflows:[],activeActions:[],activeNode:null,baseUrl:Object({VUE_APP_PUBLIC_PATH:"/%BASE_PATH%/",NODE_ENV:"production",BASE_URL:"/%BASE_PATH%/"}).VUE_APP_URL_BASE_API?Object({VUE_APP_PUBLIC_PATH:"/%BASE_PATH%/",NODE_ENV:"production",BASE_URL:"/%BASE_PATH%/"}).VUE_APP_URL_BASE_API:"/%BASE_PATH%/"===window.BASE_PATH?"/":window.BASE_PATH,credentials:null,credentialTypes:null,endpointWebhook:"webhook",endpointWebhookTest:"webhook-test",executionId:null,executingNode:"",executionWaitingForWebhook:!1,pushConnectionActive:!0,saveDataErrorExecution:"all",saveDataSuccessExecution:"all",saveManualExecutions:!1,timezone:"America/New_York",stateIsDirty:!1,executionTimeout:-1,maxExecutionTimeout:Number.MAX_SAFE_INTEGER,versionCli:"0.0.0",oauthCallbackUrls:{},n8nMetadata:{},workflowExecutionData:null,lastSelectedNode:null,lastSelectedNodeOutputIndex:null,nodeIndex:[],nodeTypes:[],nodeViewOffsetPosition:[0,0],nodeViewMoveInProgress:!1,selectedNodes:[],sessionId:Math.random().toString(36).substring(2,15),urlBaseWebhook:"http://localhost:5678/",workflow:{id:_["r"],name:"",active:!1,createdAt:-1,updatedAt:-1,connections:{},nodes:[],settings:{},tags:[]},sidebarMenuItems:[]},Vr={tags:Tr,ui:_r,workflows:Ar},Wr=new b["a"].Store({strict:!1,modules:Vr,state:Pr,mutations:{addActiveAction(e,t){e.activeActions.includes(t)||e.activeActions.push(t)},removeActiveAction(e,t){const s=e.activeActions.indexOf(t);-1!==s&&e.activeActions.splice(s,1)},addActiveExecution(e,t){const s=e.activeExecutions.find(e=>e.id===t.id);void 0===s?e.activeExecutions.unshift(t):void 0===s.workflowName&&(s.workflowName=t.workflowName)},finishActiveExecution(e,t){const s=e.activeExecutions.find(e=>e.id===t.executionId);void 0!==s&&(void 0!==t.executionId&&o["default"].set(s,"id",t.executionId),o["default"].set(s,"finished",t.data.finished),o["default"].set(s,"stoppedAt",t.data.stoppedAt))},setActiveExecutions(e,t){o["default"].set(e,"activeExecutions",t)},setActiveWorkflows(e,t){e.activeWorkflows=t},setWorkflowActive(e,t){e.stateIsDirty=!1;const s=e.activeWorkflows.indexOf(t);-1===s&&e.activeWorkflows.push(t)},setWorkflowInactive(e,t){const s=e.activeWorkflows.indexOf(t);-1!==s&&e.selectedNodes.splice(s,1)},setStateDirty(e,t){e.stateIsDirty=t},addSelectedNode(e,t){e.selectedNodes.push(t)},removeNodeFromSelection(e,t){let s;for(s in e.selectedNodes)if(e.selectedNodes[s].name===t.name){e.selectedNodes.splice(parseInt(s,10),1);break}},resetSelectedNodes(e){o["default"].set(e,"selectedNodes",[])},setActive(e,t){e.workflow.active=t},addConnection(e,t){if(2!==t.connection.length)return;!0===t.setStateDirty&&(e.stateIsDirty=!0);const s=t.connection[0],i=t.connection[1];if(e.workflow.connections.hasOwnProperty(s.node)||o["default"].set(e.workflow.connections,s.node,{}),e.workflow.connections[s.node].hasOwnProperty(s.type)||o["default"].set(e.workflow.connections[s.node],s.type,[]),e.workflow.connections[s.node][s.type].length<s.index+1)for(let o=e.workflow.connections[s.node][s.type].length;o<=s.index;o++)e.workflow.connections[s.node][s.type].push([]);const a=["index","node","type"];let n,r=!1;e:for(const o of e.workflow.connections[s.node][s.type][s.index]){for(n of a)if(o[n]!==i[n])continue e;r=!0;break}!1===r&&e.workflow.connections[s.node][s.type][s.index].push(i)},removeConnection(e,t){const s=t.connection[0],o=t.connection[1];if(!e.workflow.connections.hasOwnProperty(s.node))return;if(!e.workflow.connections[s.node].hasOwnProperty(s.type))return;if(e.workflow.connections[s.node][s.type].length<s.index+1)return;e.stateIsDirty=!0;const i=e.workflow.connections[s.node][s.type][s.index];for(const a in i)i[a].node===o.node&&i[a].type===o.type&&i[a].index===o.index&&i.splice(parseInt(a,10),1)},removeAllConnections(e,t){t&&!0===t.setStateDirty&&(e.stateIsDirty=!0),e.workflow.connections={}},removeAllNodeConnection(e,t){e.stateIsDirty=!0,e.workflow.connections.hasOwnProperty(t.name)&&delete e.workflow.connections[t.name];const s=[];let o,i,a,n,r;for(o of Object.keys(e.workflow.connections))for(i of Object.keys(e.workflow.connections[o]))for(a of Object.keys(e.workflow.connections[o][i])){for(n of(s.length=0,Object.keys(e.workflow.connections[o][i][parseInt(a,10)])))r=e.workflow.connections[o][i][parseInt(a,10)][parseInt(n,10)],r.node===t.name&&s.push(n);s.forEach(t=>{e.workflow.connections[o][i][parseInt(a,10)].splice(parseInt(t,10),1)})}},addCredentials(e,t){null!==e.credentials&&e.credentials.push(t)},removeCredentials(e,t){if(null!==e.credentials)for(let s=0;s<e.credentials.length;s++)if(e.credentials[s].id===t.id)return void e.credentials.splice(s,1)},updateCredentials(e,t){if(null!==e.credentials)for(let s=0;s<e.credentials.length;s++)if(e.credentials[s].id===t.id)return void(e.credentials[s]=t)},setCredentials(e,t){o["default"].set(e,"credentials",t)},setCredentialTypes(e,t){o["default"].set(e,"credentialTypes",t)},renameNodeSelectedAndExecution(e,t){e.stateIsDirty=!0,null!==e.workflowExecutionData&&e.workflowExecutionData.data.resultData.runData.hasOwnProperty(t.old)&&(e.workflowExecutionData.data.resultData.runData[t.new]=e.workflowExecutionData.data.resultData.runData[t.old],delete e.workflowExecutionData.data.resultData.runData[t.old]),e.lastSelectedNode===t.old&&(e.lastSelectedNode=t.new)},resetAllNodesIssues(e){return e.workflow.nodes.forEach(e=>{e.issues=void 0}),!0},setNodeIssue(e,t){const s=e.workflow.nodes.find(e=>e.name===t.node);if(!s)return!1;if(null===t.value){if(void 0===s.issues||void 0===s.issues[t.type])return!0;o["default"].delete(s.issues,t.type)}else void 0===s.issues&&o["default"].set(s,"issues",{}),o["default"].set(s.issues,t.type,t.value);return!0},setWorkflowId(e,t){e.workflow.id=t},setWorkflowName(e,t){!0===t.setStateDirty&&(e.stateIsDirty=!0),e.workflow.name=t.newName},addNode(e,t){t.hasOwnProperty("name")&&e.workflow.nodes.push(t)},removeNode(e,t){for(let s=0;s<e.workflow.nodes.length;s++)if(e.workflow.nodes[s].name===t.name)return e.workflow.nodes.splice(s,1),void(e.stateIsDirty=!0)},removeAllNodes(e,t){!0===t.setStateDirty&&(e.stateIsDirty=!0),e.workflow.nodes.splice(0,e.workflow.nodes.length)},updateNodeProperties(e,t){const s=e.workflow.nodes.find(e=>e.name===t.name);if(s)for(const i of Object.keys(t.properties))e.stateIsDirty=!0,o["default"].set(s,i,t.properties[i])},setNodeValue(e,t){const s=e.workflow.nodes.find(e=>e.name===t.name);if(void 0===s||null===s)throw new Error(`Node with the name "${t.name}" could not be found to set parameter.`);e.stateIsDirty=!0,o["default"].set(s,t.key,t.value)},setNodeParameters(e,t){const s=e.workflow.nodes.find(e=>e.name===t.name);if(void 0===s||null===s)throw new Error(`Node with the name "${t.name}" could not be found to set parameter.`);e.stateIsDirty=!0,o["default"].set(s,"parameters",t.value)},addToNodeIndex(e,t){e.nodeIndex.push(t)},setNodeIndex(e,t){e.nodeIndex[t.index]=t.name},resetNodeIndex(e){o["default"].set(e,"nodeIndex",[])},setNodeViewMoveInProgress(e,t){e.nodeViewMoveInProgress=t},setNodeViewOffsetPosition(e,t){e.nodeViewOffsetPosition=t.newOffset},setNodeTypes(e,t){o["default"].set(e,"nodeTypes",t)},setExecutingNode(e,t){e.executingNode=t},setExecutionWaitingForWebhook(e,t){e.executionWaitingForWebhook=t},setActiveExecutionId(e,t){e.executionId=t},setPushConnectionActive(e,t){e.pushConnectionActive=t},setUrlBaseWebhook(e,t){o["default"].set(e,"urlBaseWebhook",t)},setEndpointWebhook(e,t){o["default"].set(e,"endpointWebhook",t)},setEndpointWebhookTest(e,t){o["default"].set(e,"endpointWebhookTest",t)},setSaveDataErrorExecution(e,t){o["default"].set(e,"saveDataErrorExecution",t)},setSaveDataSuccessExecution(e,t){o["default"].set(e,"saveDataSuccessExecution",t)},setSaveManualExecutions(e,t){o["default"].set(e,"saveManualExecutions",t)},setTimezone(e,t){o["default"].set(e,"timezone",t)},setExecutionTimeout(e,t){o["default"].set(e,"executionTimeout",t)},setMaxExecutionTimeout(e,t){o["default"].set(e,"maxExecutionTimeout",t)},setVersionCli(e,t){o["default"].set(e,"versionCli",t)},setOauthCallbackUrls(e,t){o["default"].set(e,"oauthCallbackUrls",t)},setN8nMetadata(e,t){o["default"].set(e,"n8nMetadata",t)},setActiveNode(e,t){e.activeNode=t},setLastSelectedNode(e,t){e.lastSelectedNode=t},setLastSelectedNodeOutputIndex(e,t){e.lastSelectedNodeOutputIndex=t},setWorkflowExecutionData(e,t){e.workflowExecutionData=t},addNodeExecutionData(e,t){if(null===e.workflowExecutionData)throw new Error('The "workflowExecutionData" is not initialized!');void 0===e.workflowExecutionData.data.resultData.runData[t.nodeName]&&o["default"].set(e.workflowExecutionData.data.resultData.runData,t.nodeName,[]),e.workflowExecutionData.data.resultData.runData[t.nodeName].push(t.data)},setWorkflowSettings(e,t){o["default"].set(e.workflow,"settings",t)},setWorkflowTagIds(e,t){o["default"].set(e.workflow,"tags",t)},removeWorkflowTagId(e,t){const s=e.workflow.tags,i=s.filter(e=>e!==t);o["default"].set(e.workflow,"tags",i)},setWorkflow(e,t){o["default"].set(e,"workflow",t),e.workflow.hasOwnProperty("active")||o["default"].set(e.workflow,"active",!1),e.workflow.hasOwnProperty("connections")||o["default"].set(e.workflow,"connections",{}),e.workflow.hasOwnProperty("createdAt")||o["default"].set(e.workflow,"createdAt",-1),e.workflow.hasOwnProperty("updatedAt")||o["default"].set(e.workflow,"updatedAt",-1),e.workflow.hasOwnProperty("id")||o["default"].set(e.workflow,"id",_["r"]),e.workflow.hasOwnProperty("nodes")||o["default"].set(e.workflow,"nodes",[]),e.workflow.hasOwnProperty("settings")||o["default"].set(e.workflow,"settings",{})},updateNodeTypes(e,t){const s=t.map(e=>e.name),i=e.nodeTypes.filter(e=>!s.includes(e.name)),a=[...i,...t];o["default"].set(e,"nodeTypes",a),e.nodeTypes=a},addSidebarMenuItems(e,t){const s=e.sidebarMenuItems.concat(t);o["default"].set(e,"sidebarMenuItems",s)}},getters:{isActionActive:e=>t=>e.activeActions.includes(t),getActiveExecutions:e=>e.activeExecutions,getBaseUrl:e=>e.baseUrl,getRestUrl:e=>{let t="rest";return Object({VUE_APP_PUBLIC_PATH:"/%BASE_PATH%/",NODE_ENV:"production",BASE_URL:"/%BASE_PATH%/"}).VUE_APP_ENDPOINT_REST&&(t=Object({VUE_APP_PUBLIC_PATH:"/%BASE_PATH%/",NODE_ENV:"production",BASE_URL:"/%BASE_PATH%/"}).VUE_APP_ENDPOINT_REST),`${e.baseUrl}${t}`},getRestApiContext(e){let t="rest";return Object({VUE_APP_PUBLIC_PATH:"/%BASE_PATH%/",NODE_ENV:"production",BASE_URL:"/%BASE_PATH%/"}).VUE_APP_ENDPOINT_REST&&(t=Object({VUE_APP_PUBLIC_PATH:"/%BASE_PATH%/",NODE_ENV:"production",BASE_URL:"/%BASE_PATH%/"}).VUE_APP_ENDPOINT_REST),{baseUrl:`${e.baseUrl}${t}`,sessionId:e.sessionId}},getWebhookBaseUrl:e=>e.urlBaseWebhook,getWebhookUrl:e=>`${e.urlBaseWebhook}${e.endpointWebhook}`,getWebhookTestUrl:e=>`${e.urlBaseWebhook}${e.endpointWebhookTest}`,getStateIsDirty:e=>e.stateIsDirty,saveDataErrorExecution:e=>e.saveDataErrorExecution,saveDataSuccessExecution:e=>e.saveDataSuccessExecution,saveManualExecutions:e=>e.saveManualExecutions,timezone:e=>e.timezone,executionTimeout:e=>e.executionTimeout,maxExecutionTimeout:e=>e.maxExecutionTimeout,versionCli:e=>e.versionCli,oauthCallbackUrls:e=>e.oauthCallbackUrls,n8nMetadata:e=>e.n8nMetadata,pushConnectionActive:e=>e.pushConnectionActive,sessionId:e=>e.sessionId,getActiveWorkflows:e=>e.activeWorkflows,getNodeIndex:e=>t=>e.nodeIndex.indexOf(t),getNodeNameByIndex:e=>t=>e.nodeIndex[t],getNodeViewOffsetPosition:e=>e.nodeViewOffsetPosition,isNodeViewMoveInProgress:e=>e.nodeViewMoveInProgress,getSelectedNodes:e=>e.selectedNodes,isNodeSelected:e=>t=>{let s;for(s in e.selectedNodes)if(e.selectedNodes[s].name===t)return!0;return!1},isActive:e=>e.workflow.active,allConnections:e=>e.workflow.connections,connectionsByNodeName:e=>t=>e.workflow.connections.hasOwnProperty(t)?e.workflow.connections[t]:{},allNodes:e=>e.workflow.nodes,nodeByName:e=>t=>{const s=e.workflow.nodes.find(e=>e.name===t);return void 0===s?null:s},nodesIssuesExist:e=>{for(const t of e.workflow.nodes)if(void 0!==t.issues&&0!==Object.keys(t.issues).length)return!0;return!1},allCredentialTypes:e=>e.credentialTypes,allCredentials:e=>e.credentials,credentialsByType:e=>t=>null===e.credentials?null:e.credentials.filter(e=>e.type===t),credentialType:e=>t=>{if(null===e.credentialTypes)return null;const s=e.credentialTypes.find(e=>e.name===t);return void 0===s?null:s},allNodeTypes:e=>e.nodeTypes,nodeType:e=>t=>{const s=e.nodeTypes.find(e=>e.name===t);return void 0===s?null:s},activeNode:(e,t)=>t.nodeByName(e.activeNode),lastSelectedNode:(e,t)=>t.nodeByName(e.lastSelectedNode),lastSelectedNodeOutputIndex:(e,t)=>e.lastSelectedNodeOutputIndex,executingNode:e=>e.executingNode,activeExecutionId:e=>e.executionId,executionWaitingForWebhook:e=>e.executionWaitingForWebhook,workflowName:e=>e.workflow.name,workflowId:e=>e.workflow.id,workflowSettings:e=>void 0===e.workflow.settings?{}:e.workflow.settings,workflowTags:e=>e.workflow.tags,getWorkflowExecution:e=>e.workflowExecutionData,getWorkflowRunData:e=>null===e.workflowExecutionData?null:e.workflowExecutionData.data.resultData.runData,getWorkflowResultDataByNodeName:(e,t)=>e=>{const s=t.getWorkflowRunData;return null===s?null:s.hasOwnProperty(e)?s[e]:null},sidebarMenuItems:e=>e.sidebarMenuItems}});o["default"].use(a.a),o["default"].use(n,{locale:l.a}),o["default"].use(wr.a),vr["c"].add(yr["a"]),vr["c"].add(yr["b"]),vr["c"].add(yr["c"]),vr["c"].add(yr["d"]),vr["c"].add(yr["e"]),vr["c"].add(yr["f"]),vr["c"].add(yr["g"]),vr["c"].add(yr["h"]),vr["c"].add(yr["i"]),vr["c"].add(yr["j"]),vr["c"].add(yr["k"]),vr["c"].add(yr["l"]),vr["c"].add(yr["m"]),vr["c"].add(yr["r"]),vr["c"].add(yr["s"]),vr["c"].add(yr["t"]),vr["c"].add(yr["u"]),vr["c"].add(yr["o"]),vr["c"].add(yr["p"]),vr["c"].add(yr["q"]),vr["c"].add(yr["v"]),vr["c"].add(yr["w"]),vr["c"].add(yr["x"]),vr["c"].add(yr["y"]),vr["c"].add(yr["z"]),vr["c"].add(yr["E"]),vr["c"].add(yr["B"]),vr["c"].add(yr["C"]),vr["c"].add(yr["D"]),vr["c"].add(yr["A"]),vr["c"].add(yr["F"]),vr["c"].add(yr["G"]),vr["c"].add(yr["H"]),vr["c"].add(yr["I"]),vr["c"].add(yr["J"]),vr["c"].add(yr["K"]),vr["c"].add(yr["L"]),vr["c"].add(yr["M"]),vr["c"].add(yr["N"]),vr["c"].add(yr["O"]),vr["c"].add(yr["P"]),vr["c"].add(yr["Q"]),vr["c"].add(yr["R"]),vr["c"].add(yr["S"]),vr["c"].add(yr["T"]),vr["c"].add(yr["U"]),vr["c"].add(yr["V"]),vr["c"].add(yr["W"]),vr["c"].add(yr["X"]),vr["c"].add(yr["Y"]),vr["c"].add(yr["Z"]),vr["c"].add(yr["ab"]),vr["c"].add(yr["bb"]),vr["c"].add(yr["cb"]),vr["c"].add(yr["db"]),vr["c"].add(yr["eb"]),vr["c"].add(yr["fb"]),vr["c"].add(yr["gb"]),vr["c"].add(yr["hb"]),vr["c"].add(yr["ib"]),vr["c"].add(yr["jb"]),vr["c"].add(yr["kb"]),vr["c"].add(yr["lb"]),vr["c"].add(yr["mb"]),vr["c"].add(yr["nb"]),vr["c"].add(yr["ob"]),vr["c"].add(yr["pb"]),vr["c"].add(yr["qb"]),vr["c"].add(yr["rb"]),vr["c"].add(yr["sb"]),vr["c"].add(yr["tb"]),vr["c"].add(yr["ub"]),vr["c"].add(yr["vb"]),vr["c"].add(yr["wb"]),vr["c"].add(yr["xb"]),vr["c"].add(yr["yb"]),vr["c"].add(yr["zb"]),vr["c"].add(yr["Ab"]),vr["c"].add(yr["n"]),o["default"].component("font-awesome-icon",br["a"]),o["default"].config.productionTip=!1,fr.afterEach((e,t)=>{Object(k["b"])("main.routeChange",Wr,{from:t,to:e})}),new o["default"]({router:fr,store:Wr,render:e=>e(f)}).$mount("#app")},cf47:function(e,t,s){},cfbe:function(e,t,s){},d0c7:function(e,t,s){},d2e2:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var o=s("85ee"),i=s("e105"),a=s("debe"),n=s("7b04"),r=s("6fae"),l=s("77f0"),c=s("9ec3"),d=s("aaf5");const u=Object(d["a"])(a["a"],r["a"],n["a"],l["a"]).extend({methods:{connectionInputData(e,t,s,o){let i=null;if(e.length){const a=e[0],n=this.$store.getters.getWorkflowRunData;if(null===n)return null;i=!n[a]||n[a].length<=s||!n[a][s].hasOwnProperty("data")||void 0===n[a][s].data||!n[a][s].data.hasOwnProperty(t)||n[a][s].data[t].length<=o?[]:n[a][s].data[t][o]}return i},getNodes(){const e=this.$store.getters.allNodes,t=[];for(const s of e)t.push(Object.assign({},s));return t},getNodeTypesMaxCount(){const e=this.$store.getters.allNodes,t={},s=this.$store.getters.allNodeTypes;for(const o of s)void 0!==o.maxNodes&&(t[o.name]={exist:0,max:o.maxNodes,nodeNames:[]});for(const o of e)void 0!==t[o.type]&&(t[o.type].exist+=1,t[o.type].nodeNames.push(o.name));return t},getNodeTypeCount(e){const t=this.$store.getters.allNodes;let s=0;for(const o of t)o.type===e&&s++;return s},checkReadyForExecution(e){let t,s,o=null;const i={};for(const a of Object.keys(e.nodes))o=null,t=e.nodes[a],!0!==t.disabled&&(s=e.nodeTypes.getByName(t.type),o=void 0===s?{typeUnknown:!0}:this.getNodeIssues(s.description,t,["execution"]),null!==o&&(i[t.name]=o));return 0===Object.keys(i).length?null:i},getWorkflow(e,t,s){e=e||this.getNodes(),t=t||this.$store.getters.allConnections;const a={nodeTypes:{},init:async e=>{},getAll:()=>[],getByName:e=>{const t=this.$store.getters.nodeType(e);if(null!==t)return{description:t}}};let n=this.$store.getters.workflowId;n===o["r"]&&(n=void 0);const r=this.$store.getters.workflowName;return!0===s?new i["Workflow"]({id:n,name:r,nodes:JSON.parse(JSON.stringify(e)),connections:JSON.parse(JSON.stringify(t)),active:!1,nodeTypes:a}):new i["Workflow"]({id:n,name:r,nodes:e,connections:t,active:!1,nodeTypes:a})},getWorkflowDataToSave(){const e=this.$store.getters.allNodes,t=this.$store.getters.allConnections;let s;const i=[];for(let o=0;o<e.length;o++){try{s=this.getNodeDataToSave(e[o])}catch(r){return Promise.reject(r)}i.push(s)}const a={name:this.$store.getters.workflowName,nodes:i,connections:t,active:this.$store.getters.isActive,settings:this.$store.getters.workflowSettings,tags:this.$store.getters.workflowTags},n=this.$store.getters.workflowId;return n!==o["r"]&&(a.id=n),Promise.resolve(a)},getNodeDataToSave(e){const t=["color","continueOnFail","credentials","disabled","issues","notes","parameters","status"],s={parameters:{}};for(const i in e)"_"!==i.charAt(0)&&-1===t.indexOf(i)&&(s[i]=e[i]);const o=this.$store.getters.nodeType(e.type);if(null!==o){const t=i["NodeHelpers"].getNodeParameters(o.properties,e.parameters,!1,!1);if(s.parameters=null!==t?t:{},void 0!==e.credentials&&void 0!==o.credentials){const t={};for(const s of Object.keys(e.credentials)){const i=o.credentials.find(e=>e.name===s);void 0!==i&&(!1!==this.displayParameter(e.parameters,i,"")&&(t[s]=e.credentials[s]))}0!==Object.keys(t).length&&(s.credentials=t)}e.color&&e.color!==o.defaults.color&&(s.color=e.color)}else s.credentials=e.credentials,s.parameters=e.parameters,void 0!==s.color&&(s.color=e.color);return!0===e.disabled&&(s.disabled=!0),!0===e.continueOnFail&&(s.continueOnFail=!0),[void 0,""].includes(e.notes)||(s.notes=e.notes),s},resolveParameter(e){const t=0,s=0,o=0,i="main",a=this.$store.getters.activeNode,n=this.getWorkflow(),r=n.getParentNodes(a.name,i,1),l=this.$store.getters.getWorkflowExecution;let c,d=this.connectionInputData(r,i,o,t);return c=null===l?{resultData:{runData:{}}}:l.data,null===d&&(d=[]),n.expression.getParameterValue(e,c,o,s,a.name,d,"manual",!1)},resolveExpression(e,t={}){const s={__xxxxxxx__:e,...t},o=this.resolveParameter(s);if("object"===typeof o["__xxxxxxx__"]){const e=this.getWorkflow();return e.expression.convertObjectValueToString(o["__xxxxxxx__"])}return o["__xxxxxxx__"]},async saveCurrentWorkflow({name:e,tags:t}={}){const s=this.$route.params.name;if(!s)return this.saveAsNewWorkflow({name:e,tags:t});try{this.$store.commit("addActiveAction","workflowSaving");const o=await this.getWorkflowDataToSave();e&&(o.name=e.trim()),t&&(o.tags=t);const i=await this.restApi().updateWorkflow(s,o);if(e&&this.$store.commit("setWorkflowName",{newName:i.name}),t){const e=i.tags||[],t=e.map(e=>e.id);this.$store.commit("setWorkflowTagIds",t)}return this.$store.commit("setStateDirty",!1),this.$store.commit("removeActiveAction","workflowSaving"),this.$externalHooks().run("workflow.afterUpdate",{workflowData:i}),!0}catch(o){return this.$store.commit("removeActiveAction","workflowSaving"),this.$showMessage({title:"Problem saving workflow",message:`There was a problem saving the workflow: "${o.message}"`,type:"error"}),!1}},async saveAsNewWorkflow({name:e,tags:t}={}){try{this.$store.commit("addActiveAction","workflowSaving");const s=await this.getWorkflowDataToSave();s.active=!1,e&&(s.name=e.trim()),t&&(s.tags=t);const o=await this.restApi().createNewWorkflow(s);this.$store.commit("setActive",o.active||!1),this.$store.commit("setWorkflowId",o.id),this.$store.commit("setWorkflowName",{newName:o.name,setStateDirty:!1}),this.$store.commit("setWorkflowSettings",o.settings||{}),this.$store.commit("setStateDirty",!1);const i=o.tags||[],a=i.map(e=>e.id);return this.$store.commit("setWorkflowTagIds",a),this.$router.push({name:"NodeViewExisting",params:{name:o.id,action:"workflowSave"}}),this.$store.commit("removeActiveAction","workflowSaving"),this.$store.commit("setStateDirty",!1),this.$externalHooks().run("workflow.afterUpdate",{workflowData:o}),!0}catch(s){return this.$store.commit("removeActiveAction","workflowSaving"),this.$showMessage({title:"Problem saving workflow",message:`There was a problem saving the workflow: "${s.message}"`,type:"error"}),!1}},updateNodePositions(e,t){if(void 0===e.nodes)return;const s=[99999999,99999999];for(const i of e.nodes)(i.position[1]<s[1]||i.position[1]===s[1]&&i.position[0]<s[0])&&(s[0]=i.position[0],s[1]=i.position[1]);const o=[t[0]-s[0],t[1]-s[1]];for(const i of e.nodes)i.position[0]+=o[0],i.position[1]+=o[1]},async dataHasChanged(e){const t=await this.getWorkflowDataToSave();let s;if(s=await this.restApi().getWorkflow(e),void 0!==s){const e={nodes:s.nodes,connections:s.connections,settings:s.settings,name:s.name},o={nodes:t.nodes,connections:t.connections,settings:t.settings,name:t.name};return!Object(c["isEqual"])(e,o)}return!0}}})},d4d1:function(e,t,s){},d79a:function(e,t,s){"use strict";s("5d93")},dbb9:function(e,t,s){},dd28:function(e,t,s){"use strict";var o=s("e889"),i=s.n(o);s.d(t,"default",(function(){return i.a}))},dd9c:function(e,t,s){},debe:function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return a}));var o=s("9869");async function i(e,t,s){if(!window.n8nExternalHooks)return;const[o,i]=e.split(".");if(window.n8nExternalHooks[o]&&window.n8nExternalHooks[o][i]){const e=window.n8nExternalHooks[o][i];for(const o of e)await o(t,s)}}const a=o["default"].extend({methods:{$externalHooks(){return{run:async(e,t)=>{await i.call(this,e,this.$store,t)}}}}})},e1e8:function(e,t,s){"use strict";s("e846")},e78d:function(e,t,s){},e82f:function(e,t,s){"use strict";s("9147")},e846:function(e,t,s){},e889:function(e,t,s){e.exports={category:"CategoryItem_category_2Mn3E",name:"CategoryItem_name_3wwGu",arrow:"CategoryItem_arrow_YtIA6"}},ea6e:function(e,t,s){},eaf6:function(e,t,s){},ee76:function(e,t,s){},f039:function(e,t,s){"use strict";s("9c4d")},f1c2:function(e,t,s){},f3ce:function(e,t,s){},f408:function(e,t,s){"use strict";s("f3ce")},f427:function(e,t,s){"use strict";s("368d")},f481:function(e,t,s){},f631:function(e,t,s){"use strict";s("cfbe")},f9da:function(e,t,s){},fa1e:function(e,t,s){"use strict";s("f1c2")},fba0:function(e,t,s){"use strict";s("8aed")},fc5a:function(e,t,s){},fc8e:function(e,t,s){},fd90:function(e,t,s){},fe0b:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fixed-collection-parameter",on:{keydown:function(e){e.stopPropagation()}}},[0===e.getProperties.length?s("div",{staticClass:"no-items-exist"},[e._v("\n\t\tCurrently no items exist\n\t")]):e._e(),e._l(e.getProperties,(function(t){return s("div",{key:t.name,staticClass:"fixed-collection-parameter-property"},[s("div",{staticClass:"parameter-name",attrs:{title:t.displayName}},[e._v(e._s(t.displayName)+":")]),!0===e.multipleValues?s("div",e._l(e.values[t.name],(function(o,i){return s("div",{key:t.name+i,staticClass:"parameter-item"},[s("div",{staticClass:"parameter-item-wrapper"},[e.isReadOnly?e._e():s("div",{staticClass:"delete-option"},[s("font-awesome-icon",{staticClass:"reset-icon clickable",attrs:{icon:"trash",title:"Delete Item"},on:{click:function(s){return e.deleteOption(t.name,i)}}}),e.sortable?s("div",[0!==i?s("font-awesome-icon",{staticClass:"clickable",attrs:{icon:"angle-up",title:"Move up"},on:{click:function(s){return e.moveOptionUp(t.name,i)}}}):e._e(),i!==e.values[t.name].length-1?s("font-awesome-icon",{staticClass:"clickable",attrs:{icon:"angle-down",title:"Move down"},on:{click:function(s){return e.moveOptionDown(t.name,i)}}}):e._e()],1):e._e()],1),s("parameter-input-list",{attrs:{parameters:t.values,nodeValues:e.nodeValues,path:e.getPropertyPath(t.name,i),hideDelete:!0},on:{valueChanged:e.valueChanged}})],1)])})),0):s("div",{staticClass:"parameter-item"},[s("div",{staticClass:"parameter-item-wrapper"},[e.isReadOnly?e._e():s("div",{staticClass:"delete-option"},[s("font-awesome-icon",{staticClass:"reset-icon clickable",attrs:{icon:"trash",title:"Delete Item"},on:{click:function(s){return e.deleteOption(t.name)}}})],1),s("parameter-input-list",{staticClass:"parameter-item",attrs:{parameters:t.values,nodeValues:e.nodeValues,path:e.getPropertyPath(t.name),hideDelete:!0},on:{valueChanged:e.valueChanged}})],1)])])})),e.parameterOptions.length>0&&!e.isReadOnly?s("div",[1===e.parameter.options.length?s("el-button",{staticClass:"add-option",attrs:{size:"small"},on:{click:function(t){return e.optionSelected(e.parameter.options[0].name)}}},[e._v(e._s(e.getPlaceholderText))]):s("el-select",{staticClass:"add-option",attrs:{placeholder:e.getPlaceholderText,size:"small",filterable:""},on:{change:e.optionSelected},model:{value:e.selectedOption,callback:function(t){e.selectedOption=t},expression:"selectedOption"}},e._l(e.parameterOptions,(function(e){return s("el-option",{key:e.name,attrs:{label:e.displayName,value:e.name}})})),1)],1):e._e()],2)},i=[],a=s("9ec3"),n=s("4971"),r=s("aaf5"),l=Object(r["a"])(n["a"]).extend({name:"FixedCollectionParameter",props:["nodeValues","parameter","path","values"],data(){return{selectedOption:void 0}},computed:{getPlaceholderText(){return this.parameter.placeholder?this.parameter.placeholder:"Choose Option To Add"},getProperties(){const e=[];let t;for(const s of this.propertyNames)t=this.getOptionProperties(s),void 0!==t&&e.push(t);return e},multipleValues(){return void 0!==this.parameter.typeOptions&&!0===this.parameter.typeOptions.multipleValues},parameterOptions(){return!0===this.multipleValues?this.parameter.options:this.parameter.options.filter(e=>!this.propertyNames.includes(e.name))},propertyNames(){return this.values?Object.keys(this.values):[]},sortable(){return this.parameter.typeOptions&&this.parameter.typeOptions.sortable}},methods:{deleteOption(e,t){const s={name:this.getPropertyPath(e,t),value:void 0};this.$emit("valueChanged",s)},getPropertyPath(e,t){return`${this.path}.${e}`+(void 0!==t?`[${t}]`:"")},getOptionProperties(e){for(const t of this.parameter.options)if(t.name===e)return t},moveOptionDown(e,t){this.values[e].splice(t+1,0,this.values[e].splice(t,1)[0]);const s={name:this.getPropertyPath(e),value:this.values[e]};this.$emit("valueChanged",s)},moveOptionUp(e,t){this.values[e].splice(t-1,0,this.values[e].splice(t,1)[0]);const s={name:this.getPropertyPath(e),value:this.values[e]};this.$emit("valueChanged",s)},optionSelected(e){const t=this.getOptionProperties(e);if(void 0===t)return;const s=`${this.path}.${t.name}`;let o;const i={};for(const r of t.values)"fixedCollection"===r.type&&void 0!==r.typeOptions&&!0===r.typeOptions.multipleValues?i[r.name]={}:void 0!==r.typeOptions&&!0===r.typeOptions.multipleValues?(i[r.name]=Object(a["get"])(this.nodeValues,`${this.path}.${r.name}`,[]),Array.isArray(r.default)?i[r.name].push(...JSON.parse(JSON.stringify(r.default))):""!==r.default&&"object"!==typeof r.default&&i[r.name].push(JSON.parse(JSON.stringify(r.default)))):i[r.name]=JSON.parse(JSON.stringify(r.default));let n;!0===this.multipleValues?(n=Object(a["get"])(this.nodeValues,s,[]),n.push(i)):n=i,o={name:s,value:n},this.$emit("valueChanged",o),this.selectedOption=void 0},valueChanged(e){this.$emit("valueChanged",e)}},beforeCreate:function(){this.$options.components.ParameterInputList=s("3c38").default}}),c=l,d=(s("4fe2"),s("2be6")),u=Object(d["a"])(c,o,i,!1,null,"61ffc89f",null);t["default"]=u.exports}});
//# sourceMappingURL=app.92832b7a.js.map